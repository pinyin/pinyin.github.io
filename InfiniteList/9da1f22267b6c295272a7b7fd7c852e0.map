{"version":3,"sources":["..\\..\\..\\typecheck\\existing.ts","..\\..\\..\\utils\\cloneFastBinaryIndexedTree.ts","..\\..\\..\\utils\\ensure.ts","..\\..\\..\\utils\\nothing.ts","..\\..\\..\\layouts\\ListLayoutImpl.ts","..\\..\\..\\rxjs\\applyMiddleware.ts","..\\..\\..\\rxjs\\createPublishers.ts","..\\..\\..\\rxjs\\createSubjects.ts","..\\..\\..\\rxjs\\createDispatcher.ts","..\\..\\..\\rxjs\\Pipe.ts","..\\..\\..\\typecheck\\isFalse.ts","..\\..\\..\\typecheck\\isTrue.ts","..\\..\\..\\typecheck\\isFunction.ts","..\\..\\..\\utils\\assume.ts","..\\..\\..\\utils\\publishAll.ts","..\\..\\..\\utils\\Pulse.ts","..\\..\\..\\utils\\statics.ts","..\\..\\..\\utils\\forDuration.ts","..\\..\\..\\utils\\nextAnimationFrame.ts","..\\..\\..\\utils\\uniqueID.ts","..\\..\\..\\view\\calcOutline.ts","..\\..\\..\\view\\hasStyle.ts","..\\..\\..\\view\\calcOutlineOrigin.ts","..\\..\\..\\view\\calcTransform.ts","..\\..\\..\\view\\tweenHere.ts","..\\src\\functions\\calcFocusOffset.ts","..\\src\\functions\\calcSegments.ts","..\\src\\functions\\projectScroll.ts","..\\src\\functions\\updateLayout.ts","..\\..\\..\\react\\measure\\measuring.tsx","..\\src\\MeasuredSegment.tsx","..\\InfiniteList.tsx","..\\..\\..\\utils\\getRandomIntInclusive.ts","SegmentExample.tsx","InfiniteList.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA4B,KAAkB;IAC1C,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI,CAAA;AACzD,CAAC;AAFD,ACAA,4BDEC,yCCF2D;ADG5D,ACDA,ACFA,qBFG+B,KAAe,UCDH,MAA6B,QCFvB;AAEjD,IFEI,ACDA,IAAM,GDCC,CAAC,ECDI,ECDU,CDCP,GDCC,CAAC,ACDE,ACDkB,EAAE,GFEjB,CAAC,CAAA,OEF+B,oBDCd,CAAC;ADE7C,AGLa,CHKZ,GEFG,IDCI,AEJK,GDGF,ICHS,GAAY,IAAI,CAAA,CFIZ,EAAE,MAAM,CAAC,ACDX,CAAC,KAAK,CAAC,IAAI,KDCgB,CCDV,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAA;AFA3E,AECA,CAAC,ODCO,MAAM,EAAE,MAAM,CAAC,MAAM,KDA5B;AEHD,KDIK,CAAC,CAAA,iBCFL;AEJD,IHQI,MAAM,CAAC,OAAO,CAAC,wBAAO,MAAM,CAAC,OAAO,CAAC,CAAC,CAAA,SGRkB;AAC5D,ACEA,IJMI,MAAM,CAAC,WAAW,CAAC,EILnB,CJKsB,KILA,CJKM,CILJ,AJKK,KILU,MJKC,CAAC,CAAA,IGRI;AACjD,ICII,AJKA,OILO,AJKA,MILM,AJKA,CILC,AJKD,IILK,CAAC,MAAM,CAAC,oDDJgD;AAC9E,AEDA,ALUA,CAAC,QILQ,GAAG,CAAC,UAAA,GAAG,ACLmC,QAAqB,QFClC;AACtC,AHFA,IKCI,IDIgB,GCJT,IDIS,ECJH,CAAC,IAAI,CAAC,EDID,GAAC,GAAG,ACJK,CAAC,GDIH,KAAK,CAAC,GDHK,ACGF,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAE,CJKrD;AGuBD,AGnCA,SDIS,GAAG,CAAC,UAAA,GAAG,cCJoB;AAGpC,IH4LI,ACxLgB,CAAkC,CAAC,ECHnC,OAAA,SCD6B,CDC3B,GF4LE,AE5LD,CCD2C,EDCxC,IAAG,MF4LY,EAChB,EE7LK,KAAoB,EF6LW,EACpC,AE9L8B,OAAA,EF8LY,EAC1C,IE/LsC,CAAC,GAAG,CAAC,CAAC,EF+LX,EACjC,AEhMgD,CAAC,KAAK,CAAC,EAAzB,CAAyB,IFgMlB,CEhMoB;AEJlF,IDII,IH4LoB,CCxLf,EEJE,IFII,CAAC,CEJC,CAAC,IAAI,CAAC,GH4Lc,ACxLpB,EEJW,CH4LJ,AG5LK,CFIR,EAAE,IAAI,IAAK,EDwLK,CAAI,ICxLT,MAAM,AGRW,CHQV,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CAAA;AACjE,AGRA,CHQC,GCLmB,CAA8D,CAAC,EF6L1D,CG5LhB,GAAG,CAAC,SH4LqB,CG5LrB,EH4LY,CG5LT,QH4LkB,CAA2B,oBIhMV;ACItC,AJFb,AGDA,QJgMyB,AK7LZ,AFAO,CDAX,GGAQ,GAAG,AHAL,ACAK,CDAJ,MF6LkB,GAAT,AK7LD,AFAF,CDAL,ECAM,EDAF,CCAK,CDAH,EF6LW,CAAiC,AK7LlB,AFApB,CDAF,GGA0C,AFApC,CDAD,EDI/B,IIJoE,CHArC,IEHe,EFGT,CAAC,EGAwC,AFAvC,EEA6B,AFA3B,CEAqC,CAAA,AHAlC,CAAC,ECAF,EDAM,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CAAA;AECjE,AFAA,CAAC,OF6LwB,iBAAY,CI5LjC,EJ4LqB,QI5LS,IJ4LG,CAAqB;AEjM1D,AIFA,IFSI,ADJgB,CAAwB,CAAC,EH+LpB,AI3Lf,QAAQ,CETM,EFSH,GETa,KNoMK,GAAd,cAAc,AE9LtC,CF8L6D,KI3L3B,CAAc,UAAU,CAAC,CAAA;IACxD,AETA,INqMI,CGhMC,ECIE,AETA,CNqMC,CAAC,EGhME,CAAC,AGLA,CFSC,CAAC,GETG,GNqMG,AI5LA,CAChB,CDLS,AGLS,CNqMC,AI3LlB,AEViB,GHKL,CHgMU,CAAC,AGhMT,ECKP,EAAE,ADLS,IAAK,MHgMc,CAAC,AGhMf,IHgMmB,CAAC,CGhMd,CAAC,EHgMiB,CAAC,GGhMZ,CAAC,IAAI,CHgMgB,CAAC,AGhMf,ICKlB,ADLsB,CCKR,ADLS,CHgMgB,CAAC,AGhM1C,CHgM0C,AGhMjB,CAAQ,CAAA,GCKT,CAAC,EAAC,EAClD,iCAAe,CAAc,QAAQ,EAAE,UAAU,CAAC,CACrD,CAAA;AACL,ADPA,AGLA,ACFA,CHcC,ADPA,AGLA,GNqMG,CAAC,WOvMkB,KAAU;AHMjC,ADHA,AGHA,INoCW,AOnCP,OAAO,KAAK,KAAK,IAAI,CDCxB,ACDwB,UPmCP,GAAd,CG7BH,ICOA,KJsBkB,EAAc;AQpCjC,ADEA,CAAC,OPmCO,IAAI,IAAI,CAAC,GQrCU,CRqCN,AQrCY,KRqCP,CAAC,EAAE;AOrC7B,ICCI,OAAO,CRoCoB,MQpCb,CRoCoB,AQpCnB,KAAK,ADCvB,UCDiC,CAAA,CRoCW,CAAA;AQnC7C,CAAC,QRmC8C;AQrC/C,ACAA,QTsCQ,IAAM,KAAK,GAAG,IAAI,CAAC,OQpC1B,ERoCmC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA,OStCK;AACjD,ACDA,QVuCQ,IAAI,QUvCiC,KAAQ,EAAE,OVuChC,CAAC,AUvCmE,KVuC9D,CAAC,EAAE,WStCkB;AAClD,ICDI,MAAM,CAAC,CVsCuB,GUtCnB,CAAC,GVsCyB,KUtCjB,CAAC,CAAC,OAAO,CAAC,EVsCc,CAAA,ASrCf,OCDC,GAAG,IAAI,OAAA,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAzB,CAAyB,CAAC,CAAA;ACAxD,AFKX,ACJA,CAAC,OCDU,CXsCuC,IWtClC,GAAU,IAAI,CAAA;ADD9B,IDM0B,ITkClB,IAAM,MAAM,ESlCqE,CTkClE,IAAI,CAAC,MUtC3B,QVsCyC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;AYxCtD,QZyCQ,CSnCkB,GTmCZ,MAAM,CSnCqE,ETmClE,ASnCG,ITmCC,CAAC,cAAc,CAAC,CSnC8C,EAA/D,IAA+D,EGNxC,CZyCI,CAAC,KAAK,CAAC,CAAA;AYxC5D,QZyCQ,ASpCkB,OToCX,EAAC,EAAE,IAAA,EAAE,KAAK,KSpCgE,EToChE,AYzCQ,EZyCN,MAAM,QAAA,EAAE,MAAM,QAAA,EAAC,CAAA;AYvC1C,IZwCI,CAAC,YYxCmB,KAAoB;ACH5C,Ib6CW,AStCP,AGHA,IHGM,GGHC,CHGG,GAAG,CGHD,CAAC,IHGM,AIPW,CJOV,CGHD,CAAC,IHGM,CAAC,AIPe,KDIrB,CHGY,EGHT,CHGY,CTsCnB,AStCoB,AGHX,CHGY,CAAA,CTsCtC,CYzC8B,IAAK,KZyCjB,EYzCiB,GZyCJ,AYzCO,GAAG,IAAI,EAAV,CAAU,EAAE,CAAC,CAAC,CAAA;AACrD,CAAC,GHGG,ITsCI,AStCE,ITsCE,IAAI,CAAC,CStCG,GTsCC,AStCE,KTsCG,CAAC,AStCE,CAAC,CTsCD,IStCM,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AKRzD,AFGA,IHMI,IAAI,CAAC,GTqCsB,OAAO,OYzCrC,MHIkB,CAAC,GTqCyB,CAAA,ASrCrB,CAAC,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,sBAAW,CAAC,EAAE;AGFpF,AGPA,QNUQ,CToCuC,Ga7C3C,GJSW,MGHa,KAAoB,MHG1B,CAAA,CITX,IAAI,OAAO,CAAO,CEDkB,SFCjB,IAAI,IAAK,OAAA,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,EAA1B,CAA0B,CAAC,EAAA;AEAlE,IHOI,CHGC,GToCG,AYvCA,IZuCM,CYvCD,CZuCG,AYvCF,GZuCK,GYvCC,CZuCG,CAAC,GYvCC,CAAC,KZuCO,CAAC,KAAK,CAAC,CAAA;AgB/CxC,IPYI,AMVA,If8CI,AYvCA,GHGG,AMVA,Cf8CC,Ac/CR,GLWW,AGHA,AGPA,CAAC,ECFE,IDEI,EAAE,CAAC,OHOH,CAAA,AGPW,Cf8CV,Ac/CZ,ACCuB,Cf8CV,Ce9CY,Cf8CV,Ae9CW,Cf8CV,Ac/CZ,ACCuB,Ef8CT,Kc/CP,CAAC,CLWJ,AMV4B,CAAC,CAAC,CAAC,MDD3B,CLWM,GAAC,GKXA,IAAI,OAAA,qBAAqB,CAAC,OAAO,CAAC,EAA9B,CAA8B,CAAiB,EAAC;ALYlF,AOZA,CPYC,AIXA,GDQG,MGPM,CHOC,AGPA,Cf6CoB,Ge7ChB,GHOG,CZsCoB,AYtCnB,AGPA,EAAE,CAAC,CAAC,CHOC,CAAC,GZsCsB,AYtCnB,CZsCmB,Ce7CjB,EAAE,CHOC,AGPA,CHOC,MAAM,CAAA,AGPC,CAAC,ACFJ,EDEM,CAAC,CAAC;ANG9C,AINA,ADWA,AGPA,ACDA,CJQC,AGPA,Qf4CgD,YgB7CrB,GPU3B,AOVuC,UHDvC;ADKD,AGNA,CDCC,GEEG,IhB6CI,AgB7CE,IhB6CI,AgB7CA,GAAG,GhB6CG,AgB7CA,CAAC,EhB6CE,IAAI,CAAC,Ee7C3B,MHOA,MZsCyC,AgB7CA,ChB6CC,CgB7CC,CAAA,EhB6CG,CAAC,KAAK,CAAC,CAAA;AcjDtD,AFaA,IIRI,IhB6CI,AgB7CE,IhB6CI,MAAM,AgB7CA,GhB6CG,AgB7CA,IhB6CI,CAAC,AYrCK,KAAoB,KIRxB,CAAS,GhB6CI,CAAC,OchD1C,GdgDoD,CAAC,CgB7CA,CAAC,GhB6CI,AgB7CD,ChB6CE,AgB7CD,ChB6CC,AgB7CA,OAAO,EAAE,GAAG,CAAC,CAAA;IJSrE,AIPA,IhB4CI,AYrCE,AIPA,OhB4CK,AYrCE,AIPA,EhB4CD,CYrCI,AIPA,ChB4CF,IAAA,EAAE,GgB5CU,CJOC,AIPA,ChB4CN,AYrCO,KAAK,CAAC,CZqCb,AYrCa,EZqCX,AgB5Cc,CAAC,CAAA,IhB4CT,QAAA,EAAE,MAAM,QAAA,EAAC,CAAA;IACtC,AYrCA,AIPO,ChB4CN,GYrCG,AIPG,KJOE,CAAC,MAAM,KAAK,CAAC,AIPV,EAAE,EJOY,kBIPN,CAAQ,GJOS,CAAC,OAAO,CAAC;IZuCvC,AgB7CP,IJOI,AIPE,CAAC,GAAG,GJOC,CIPG,CAAC,IAAI,CAAA,UJOD,CAAA,WZsCI,GAAtB,UAAuB,IAAY,EAAE,EAAU;AiBtDnD,ILiBI,AIPA,IhB6CI,AYtCE,AIPA,CAAC,GhB6CC,AgB7CE,EJOE,EZsCA,AgB7CE,ChB6CD,AYtCE,AIPA,GAAG,ChB6CD,AgB7CC,CJOE,CAAC,GZsCC,CAAC,AYtCE,CAAC,CZsCD,SYtCE,CAAC,EAAE,CAAC,IAAK,IKjBS,GLiBT,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,EAA7C,CAA6C,CAAC,CAAA;AKftF,ILgBI,AINA,OJMO,AINA,ChB2CmB,CgB3ClB,CAAC,GJMI,AINJ,CJMK,AKhBO,CjBqDY,AYrClB,AINJ,CJMK,AINJ,ChB2CuB,AYrCnB,CZqCmB,CgB3CvB,ACV6B,EDU3B,KAAK,OAAA,EAAE,MAAM,QAAA,EAAE,OAAO,SAAA,EAAC,CAAA;AJOzC,AINA,CJMC,AINA,GCVG,KjBoDoC,EiBpD7B,CAAC,CAAC,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,EAAE,IAAI,sBAAW,CAAC,KAAK,CAAC,CAAC,CAAC;ALUrE,AIVA,AEHA,ADIA,CAAC,OjBoDO,IAAM,QAAQ,GAAG,WgB3CxB,IhB2C8B,CAAmB,IAAI,CAAC,AYrCtD,UZqCgE,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAE,CAAC,CAAA,sFkBxD7B;ANqBhE,AMpBA,ADCA,QjBuDQ,IAAM,MAAM,GAAG,EYpCO,KAAoB,AKjBjD,QjBqD4B,CAAmB,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAE,CAAC,CAAA,0EkBxD1C;AAC3D,INoBI,IZoCI,AYpCE,IZoCI,GYpCG,GAAG,CZoCC,GAA4B,EAAE,CAAA,IYpCpB,CAAC,KAAK,CAAC,CAAA,yHMpBe;AACrD,INoBI,IZoCI,AYpCA,KZoCK,AYpCA,CAAC,GZoCG,CAAC,EYpCE,CZoCC,IYpCI,CAAC,GZoCG,CAAC,AYpCA,KZoCK,EAAE,CAAC,IAAI,GkBxDD,GlBwDO,CAAC,GYpCR,CAAC,CZoCY,EAAE,CAAC,EAAE,CYpCV,CZoCY,AYpCX;AMnBlD,ACJA,QPwBQ,IZoCI,GYpCG,IZoCI,CAAC,IAAI,CAAC,IAAI,CAAC,EYpCR,CAAA,MMpBa,ClBwDK,CAAC,CAAC,CAAE,CAAC,CAAA,kBmB5D2B;ADMxE,ACJA,IPuBI,KZoCK,EYpCE,OMnBO,INmBI,CAAC,AOvBO,IAAa,CPuBf,CAAC,AOvBgB,EAAW,CPuBxB,CAAC,UAAA,GAAG,IAAI,OAAA,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,EAAvB,CAAuB,CAAC,CAAC,CAAA;AACjE,AMnBA,AEPA,CR0BC,GOvBG,InB2DI,AmB3DE,OnB2DK,GmB3DK,GAAG,CnB2DD,CAAA,IkBvDY,GAAY,CCJtB,IAAa,mBCHa;ARqBlD,AQpBA,ACDA,IrB+DI,AkBvDA,ClBuDC,GkBvDG,ACJA,ODIO,ACJA,uBPsBd,CMlB8B,YGRgB,CDCC,YFON,CAAC,GAAG,CAAC,IAAE,OAAO,EAAE,CAAC,GAAC,CAAA;AEN5D,ACAA,IrB+DW,AkBvDP,IAAM,ICLE,IAAI,CAAC,CAAC,EDKI,CCLD,EDKI,ECLA,AEHO,CFGN,GDKK,CAAC,CCLD,GAAG,EEHoB,CFGjB,CEHmB,ErB+DlC,GAAlB,GkBvD4C,CAAC,GAAG,CAAC,CAAC,AGRoB,CrB+DnD,QAAY,AkBvD4B,CAAA,IERD;AAC9D,AEFA,IJUI,AGRA,IrB+DI,AkBvDA,GGRG,CrB+DC,AmB5DA,InB4DI,AmB5DA,CnB4DC,AmB5DA,CAAC,GnB4DG,AmB5DA,IAAI,CnB4DC,AmB5DA,AEHT,CrB+DU,AkBvDX,AGRM,CHQL,ClBuDY,GmB5DG,GAAG,GAAG,AEHL,EHQJ,AGRM,CHQL,EAAE,GERU,QCAO,GAAG,CAAC,CAAC,ACFE,CDEF;ADCtD,ACAA,ACDA,CDCC,GCDK,IJSS,CCLN,CAAA,EnB2DsB,AkBtDhB,AITD,GAAG,EAAE,CAAA,CtB+DmB,MkBtDtB,EAAE,ClBsD6B,CAAA,WkBtD5B,EAAE,GERoB,kBFQf,EAAE,uBAAM,CAAW;AEP7C,ACHA,ACGA,ACJA,IJOI,CAAC,CAAA,EDKG,ClBqDyC,GkBrDnC,SAAS,CIRM,EJQH,IIRa,EAAE,OAAW,EACvB,GDF5B,GCEsC,EAAE,MAAkB,IFDN,EGJK,+CLYtB,CAAC,YAAY,CAAC,CAAA;AEPlD,AGJA,IJOU,AGFN,ItB4DI,AkBrDA,ACLE,AGFA,ItB4DE,AkBrDE,IIPI,CtB4DD,EsB5D6B,CtB4D1B,AkBrDE,CIP0B,CAAA,CJOvB,ClBqDD,CAAC,cAAc,CAAC,QmB1DG,CCHE,CpB6DK,AmB1DvC,CnB0DwC,AuBjEJ,QvBiEY,CAAC,CAAA,EmB1D5C,EAAE,aAAK,CAAoB,oBDKX,CAAC,SAAS,CAAC,CAAA;AEN3C,AGJA,ACDA,ILOU,AGDN,ItB2DI,AkBrDM,ACLJ,AGDA,ItB2DI,AkBrDA,IINI,CtB2DC,EoB5Da,AECX,CtB2DC,EwBjEO,CDCC,EvBgEH,AsB3DA,CFDyB,AECxB,EFAI,CGLQ,CvBgER,CuBhEU,CHK+D,AINtD,ExBiEf,AoB1DJ,AINH,CxBgEQ,EsB3DE,CAC/B,CtB0DiC,CAAC,CAAC,CAAC,AoB1D+C,AEA/E,ACN6C,CDM5C,CFCmB,AGP2B,ACAM,ELM5B,AGArB,AELa,CxB+DoB,AsBzDrC,CHDD,AINgE,EvBgEvB,AoBzDS,AGPgB,CvBgExB,AsBzDrC,CtByDsC,AsBzDrC,ACP0E,CvBgEpC,AwB/DW,CxB+DV,CsBzDpC,CACJ,GtBwD6C,AmB1D/C,CnB0D+C,CmB1D7C,CGEM,GAAG,MAAM,CHFZ,CAAkB,AGGrB,MAAM,GAAG,OAAO,CACnB,EACD,CAAC,CACJ,CACJ,CAAA,wFJDuE,EAD7D,eAAO,EAAE,mBAAW,CACyC;ICJxE,ACH4B,AES5B,ACbA,ACCA,IxB+DI,AkBpDA,ACLE,AGMA,ACbA,ACCF,IxB+DM,AuBhEA,EvBgEE,AmBzDA,CDKD,AICE,ACbA,EvBgEE,AmBzDA,AKNF,CNWC,AICE,CCbC,CAAC,ACCF,CxB+DG,CAAC,EsBnDE,CFTM,AESL,EFTK,GIHF,CxB+DG,AuBhEA,ACCH,CxB+DI,AuBhEA,IDaI,CtBmDC,AsBlD/B,CtBkDgC,AuBhEA,CvBgEA,EsBlD5B,ACd+B,CDc9B,GAAG,CACJ,EFXyE,EDGzD,AGQZ,CHPR,AGOS,CCfqC,CAAC,CDenC,ACfmC,CHI8B,AEYrE,MAAM,GAAG,MAAM,GAAG,MAAM,CFZwD,CAAC,AEajF,GHTC,CAAC,EGSI,CHTD,ACJmF,CAAC,CEahF,CHTD,ACJ6D,CAAoB,IDI5E,AGSE,EHTA,CGSG,EHTA,GAAG,EGSI,CAC5B,EHV6B,AGW9B,CHX+B,EACnC,GGUU,CAAC,WAAW,CACrB,CACJ,CAAA,WHZQ,CAAC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CACxD,CAAA;IAED,ACP4B,AEiB5B,ACrBA,ACCA,IxB+DI,AsB3CA,ACrBE,ACCA,GLUC,CnBqDG,AkBpDF,AKZE,CLYD,EAAE,AKZE,GvBgEG,GAAG,AwB/DA,CNWD,CAAC,CAAC,AMXE,CxB+DC,CAAC,CsB3CZ,CAAC,CFjBe,CGJT,CHIS,AGJR,ECCW,CAAC,CDDR,CDqBH,CAAC,ACrBI,GvBgEY,AmBrD1B,CnBqD2B,AmBrD1B,AGUa,AEpBa,IxB+DI,AoB5D4C,CpB4D3C,AwB/DA,CLUzB,AIXO,CJWN,CAAA,EnBqD6B,AuBhEnB,CvBgEoB,CAAA,EuBhEhB,CCCoB,CAAA,GFoBpB,CAAC,CCrBD,EAAE,CAAC,GDqBK,CAAC,EAAE,CCrBD,CAAC,IAAI,CAAC,EAAE,CAAC,EAAnB,CAAmB,CAAC,CAAA;AJY1D,CAAC,GCP+B,AGJ5B,ACCA,IxB+DI,AsB3CA,ACrBA,ACCA,IxB+DM,AkBpDF,AISE,CJTD,EAAE,GlBoDK,GAAG,AsB3CA,AEpBF,CNWC,CAAC,AMXA,CNWC,AISE,CtB2CC,CAAC,CoB5DI,CEiBF,CFjBE,AEiBD,CCrBZ,CAAC,GDqBgB,CAAC,ACrBb,CAAC,GHIyB,CpB4DR,AoB5DS,AGJtB,CvBgEc,CoB5DU,CAAC,AEiBT,CAAC,CFjBU,CAAC,EAAE,CAAC,AEiBT,CFjBU,CpB4DR,CAAC,AsB3CA,KtB2CK,CAAC,CAAA,CsB3CE,CAAC,CCrBvB,CAAC,CDqByB,GCrBrB,CAAC,IDqB4B,CAAA;AH1B1E,QnBsEQ,AsB3CA,ACrBA,ACCA,INWI,AISE,GtB2CC,AuBhEA,EvBgEC,AkBpDC,AMXA,ExB+DC,AkBpDC,AISE,CEpBD,CDDC,CDqBG,ACrBH,CvBgEH,AkBpDK,CAAC,ClBoDJ,CsB3CQ,CJTD,AISE,CJTD,CMXC,CxB+DJ,AsB3CO,AEpBF,CFqBlB,GErBsB,CFqBlB,AErBmB,CFqBlB,CtB0CQ,CmBtDxB,CnBsD0B,AkBpDY,CAAC,AIUnB,CJVoB,AIUnB,GJVsB,ClBoDX,AwB/DY,CAAC,CAAA,CFqBjB,CAAC,EJVqB,CAAC,ClBoDnB,AkBpDoB,CAAC,AIUnB,CtB0CA,EsB1CG,ItB0CG,IsB1CK,CAAC,GtB0CN,AsB1CS,EtB0CR,CAAA,KsB1CgB,EAC9C,MAAM,CAAC,IAAI,GAAG,CAAC,CAClB,CAAA;ItByCL,AuBhEA,CvBgEC,AwB/DA,GFuBG,ACxBE,ILYE,CIYC,IAAI,CJZC,EAAE,EIYE,EJZE,CAAC,AIYA,GJZG,CAAC,AKZE,GAAG,EDwBA,EAAE,ECxBI,ELYA,CAAC,AIYA,ACxBE,CLYD,GAAG,AIYA,OJZO,AIYA,ACxBE,CLYD,CAAC,AIYA,CJZC,AKZE,IDwBE,ACxBE,CAAC,CDwBD,EAAE,GCxBK,CAAA;IvBkEzD,AuBjEP,ACCA,IDDM,GCCC,CNWC,AIYA,OJZO,CIYC,AEvBA,CNWC,AIYA,AEvBA,CNWC,GIYG,CAAC,GCxBK,ECCA,CFuBC,ACxBE,ACCF,CFuBC,ACxBE,MCCI,CAAC,CAAA,EFuBG,CAAC,CtByCjB,GAAvB,CsBzC6C,CAAE,CAAC,CAAA,ECxBI,GAAG,CvBiE/B,GuBjEmC,CvBiE3B,AuBjE4B,EvBiE1B,EAAM,EuBjE0B,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA;ACErF,CAAC,GDDG,IvBiEI,CkBrDC,AIYA,CJZA,CKZE,CvBiEC,GuBjEG,CvBiEC,AuBjEA,CvBiEC,IAAI,CuBjEC,GAAG,CvBiEC,AuBjEA,CvBiEC,EAAE,QuBjEQ,GAAG,qBAAqB,CAAC,CAAA;AAC9D,ACTA,CD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IyBvFnC,ACWA,Q1B6EQ,QoBlER,OpBkEuB,CAAC,CoBlEQ,AMXpB,CNWoB,CpBkEL,CAAC,EAAE,A0B7EN,E1B6EQ,MAAM,CAAC,CAAA;QyBxFrB,ACWlB,I1B8EQ,QoBlER,AMXI,INWA,KpBkEqB,CAAC,Q0B7EhB,CDZsD,ALuB7C,CAAC,CpBkEiB,CAAC,CoBlEf,AMXR,CNWS,AMXR,O1B6E+B,AoBlEhB,CpBkEiB,AoBlEhB,CMT/B,E1B2EkD,CAAC,CoBlEf,CpBkEiB,CAAE,AoBlEjB,EpBkEmB,MAAM,CAAC,CAAA;A2BrGrE,Q3BsGQ,AyBpEA,ACnBI,C1BuFH,CAAC,CAAA,UyBpEU,GLEZ,EKF4C,ACnB5B,CCfQ,EDeL,UAAC,MAAU,CNqBxB;AOnCd,Q3BuGQ,IyBtEA,AClBA,G1BwFO,C0BxFD,EAAE,C1BwFG,CoBnEf,CMrBe,GDmBP,ECnBW,CNqBZ,AMrBa,CNqBZ,COpCkB,GDeD,C1BwFI,AoBnEhB,AMrBa,C1ByFlB,AoBpEM,CMrBc,CAAA,MDmBd,ELEU,GpBoEH,AyBtEF,ALEQ,CKFP,CzBuEZ,IoBrEyB,CAAA,GKY5B,CzByDY,EACT,SAAS,EACT,eAAe,EACf,iBAAiB,CACpB,CAAA;A2B3GT,I3B4GI,CAAC,OyB1EO,ACnBJ,IAAI,CDmBI,CAAC,ELCb,MKDqB,GAAG,IAAI,ELCb,AMpBC,CNoBA,AMpBC,KAAI,CNoBC,AMpBA,CNoBC,IMpBI,CAAC,ENoBE,CAAC,CAAA,IOnCkB,MDeP,CAAC,EAAE,EDmBH,CAC9B,UAAC,OAA8B,EAAE,QAAwB;AEjCzE,I3B4GW,YyB1ES,ACpBR,IDoBc,CCpBV,CAAC,IDoBe,CCpBV,CAAC,CDoBY,IzB0EpB,GAAX,AyB1EsC,CAAC,CAAC,CAAC,CAAC,ECpBT,CAAC,EAAC,C1B8FvB,C0B9FyB,IDoBgB,ACpBhB,CDoBiB,CElCT,ADcN,K1B8FY,AyB1ES,CAAA,ACpBf,QAAA,EAAC,CAAC,CAAA;ACbnD,Q3B4Gc,IAAA,C0B9FL,GDoBW,IAAM,CzB0EmD,EAA9D,EyB1EgB,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KEnBtB,G3B6FC,EAAE,CyB1E8B,CAAC,KAAK,CAAA,sBzB0ExB,EAAE,gCAAa,EAAE,kCAAc,CAAQ;A2B5F7E,Q3B8FQ,A0B/FJ,CAAC,CAAA,MDoBe,IAAI,mBAAQ,CAAC,KAAI,CAAC,KzB2Ea,AyB3ER,CAAC,YEnBgB,EFmBF,CAAC,EAAE;AGzC7D,ADuBA,Q3B8FQ,A0B5FA,KAAI,CAAC,MDiBW,CCjBJ,GAAG,CDiBK,CzB2EF,AyB3EG,KAAK,CAAC,aCjBH,CDiBiB,ACjBhB,CDiBiB,GEnBJ,CDER,CAAC,CDiBiB,CAAC,CAAA,ICjBX,CAAC,CAAA,kCEzBgD;ADwB/F,CPeC,OpB+EO,SyB3Ea,qCzB2EiC,G2B9FZ;ACtB1C,ARMA,AOiBA,IDCI,CAAC,G1B8FG,IAAM,IyB5EM,IAAI,IzB4EE,GAAG,GoBjF5B,CpBiFgC,A4BtHK,G5BsHF,A4BtHa,E5BsHX,A4BtHa,C5BsHb,EyB5EN,AG1C8B,CH0C7B,KAAI,CAAC,KAAK,CAAC,WEnB4D,EFmB/C,CAAC,EAAE;ALH5D,AOfA,ICvBI,ARsCE,AMhCF,GENG,C5BsHC,E4BtHE,IAAI,CAAC,IAAI,ARsCE,CpBgFD,AyB5EI,AG1CJ,C5BsHC,CoBhFiC,CQtC/B,CAAC,CH0CI,AG1CH,CH0CI,ALJ6B,EpBgF9B,CAAC,EyB5EK,CAAC,CLJ8B,EAAuB,CAAA,AMhC9E,G1BgHoB,A0BhH1B,E1BgH4B,EAAE,EyB5Ec,CAAC,EzB4EV,GyB5Ee,CzB4EV,AyB5EW,CAAA,MzB4EX,K2B/FgB,O3B+FJ,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,EAA3B,CAA2B,CAAC,CAAA;A2B9FxE,AE3BA,IDII,GAAG,C5BuHC,A0BjHM,EENJ,E5BuHI,A0BjHA,EENA,CAAC,EH0CM,GG1CD,CAAC,GAAG,CAAC,CAAC,C5BuHG,A0BjHS,EAAvB,C1BiHiB,IAAI,GAAG,EAAE,A0BjHxB,C1BiHwB,A2BhGJ,AE3BI,CHUtB,gBAAK,CAAc;ACmBtC,AE5BA,IDII,I5BuHI,A0BjHO,GENJ,C5BuHG,AyB7EE,ACpCD,CDoCE,CACJ,CAAA,AG3CE,CAAC,KAAK,CAAC,IAAI,CAAC,E5BuHI,A6B3HA,G7B2HG,C4BvHD,CFMX,CENa,AFML,C1BiHQ,E4BvHA,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,ADwBJ,CCxBK,GAAG,GAAG,CAAC,CAAC,Q5BuHH,CAAC,8C4BvHyD;AACrH,ADwBA,AG9BA,ADGA,CDGC,OFMO,I1BiHI,G0BjHG,a1BiHa,C8B7HG,C9B6HD,K0BjHd,OAAO,E1BiHqB,CAAC,C0BjHrB,EAAE,AGTkB,EHShB,CCkBoB,CDlBlB,EAAE,KAAK,E1BiHwB,A0BjHtB,KAAK,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,GAAG,CAAA;AEVlF,AD6BA,AG9BA,ADGA,IHSI,CAAC,GDoCG,CAAC,GzB6EG,MAAM,EAAE,YAAY,CAAC,G8B7HI,G9B6HE,U2B/FO,KCzB7C,wBCFyE;AF4B1E,AG9BA,ADKA,IHsBA,IDhBQ,CzBkHC,CAAC,CAAA,e0BlGT,EDhBa,GAAN,cEmBiC,gBG9BO;AH+BhD,ADJA,AI1BA,CJKA,AAqBC,CArBoC,EGDD,GHCM,C1BwHlC,A0BxHmC,IDM/B,QzBkHQ,CAAC,A0BxHmC,GAqBvD,I1BmG2B,CAAC,UAAA,EAAE,I2B/FU,CE1BmC,ECJhC,gBLWoB;AEoBhE,AD1Ba,AIHb,IDoCI,Q7BwFQ,AyBpHJ,IzBoHU,Y6BxFF,C7BwFe,AyBpGtB,GzBoGyB,C6BxFK,SHjCX,E1ByHkB,CAAC,E2B/FJ,C3B+FO,CAAC,EAAE,A8B5HN,C9B4HO,CAAA;A2B9FtD,ADAA,AI5BA,IJ4BM,AI5BA,IDkCF,GHNS,C1B+FD,AyBlHA,ECmBI,AI5BA,E9B2HA,AyBlHE,CKTmB,EAAE,CAAA,ADmC/B,CJ1Be,GAAe,GCmBR,CAAC,EDnBa,CAAC,MAAM,CzBkHxB,AyBjHX,AIyBF,C7BwFc,CyBjHV,EACF,CIwBG,CHP4B,AGO3B,CHP4B,CDjB5B,CAAC,KzBgHoB,AyBhHf,CzBgHgB,A2B/FO,AEuB5C,CJvCW,EAAC,GAAG,EAAE,UAAC,EAAO,IAAK,OAAA,KAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAlB,CAAkB,EAAC,CAClC,CAAA;AEgBpB,AG5BA,IJ4BI,CI5BC,GJ4BG,AGOA,CCnCC,CJ4BC,AI5BA,ELaE,AIsBE,CCnCD,CAAC,E9B2HE,A8B3HA,ADmCE,CCnCD,ELaE,AIsBE,CCnCD,G9B2HE,CyB9GE,CAAC,CKbC,EAAE,CAAC,EAAE,EAAE,CDmCN,CAAC,MJtBa,CAAC,CAAA,AEeH,CEOF,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;AFNxF,IG5BI,IJ4BI,AGOA,I7BwFI,AyB9GA,EKbE,CJ4BC,AI5BA,EJ4BE,AGOA,CAAC,CJtBC,AKbA,CAAC,CAAC,CAAC,CDmCC,CJtBC,ACeA,AGOA,CJtBC,CIsBC,C7BwFC,A6BxFA,C7BwFC,E8B3HE,ADmCA,C7BwFC,CAAC,A8B3HA,CAAC,C9B2HC,A8B3HD,ADmCC,CAAA,C7BwFE,IyB9GI,CAAC,CAAA,KEeyB,C3B+FlB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;A2B9FzD,CG5BC,OJ4BO,AGQA,I7BuFI,AyB7GA,AIsBA,GHRG,EAAE,AGQO,CAAA,CJtBL,KAAK,CAAC,CCcC,G1B+FG,CAAC,QyB7GQ,CACtB,EzB4GyB,CAAC,MyB5GjB,EACT,AEY8B,I3B+FQ,CAAC,AyB3GlC,EACL,CzB0G0C,CAAC,EAAE,AyB1GzC,CzB0G2C,AyB1G1C,EzB0G4C,GyB1GvC,CAAC,QAAQ,CzB0G2C,AyBzGjE,CzByGkE,AyBzGlE,CzByGkE;A2B9F/E,AG3BA,Q9B0HQ,AyBzGA,ACUA,AGSA,C7BsFC,AyBzGA,CzByGC,CAAA,C6BtFE,EHTE,EAAE,AGSA,KAAK,CHTC,KGSK,EAAE,sCFTkC;AAC/D,IG5B0B,I9B4HlB,AyBrFA,ACXA,IGSI,G7BuFG,C6BvFC,EHTE,C1BgGC,C0BhGC,AGSA,GAAG,KHTK,IGSI,C7BuFC,A6BvFA,C7BwFrB,E8BzHV,EDiCoC,CAAC,EAAE,CJEb,AIFc,GJElC,CIFsC,C7BwFrB,EACb,O6BzF4C,CAAC,EAAC,E7ByFlC,A2BlGiC,E3BmG7C,C6B1FmD,EAAE,S7B0FzC,EACZ,eAAe,EACf,iBAAiB,A6B5FyD,C7B6F7E,A6B7F8E,C7B6F9E,A6B7F+E,EAAE,EAAE,CAAC,EAAC,CAAC,CAAA;AFR/F,I3BsGI,A8BtGA,C9BsGC,A0BtGA,ODWO,AIFA,IJEI,CAAC,CKXD,GDSK,CAAC,CCTG,ELWA,CAAC,CIFC,CAAC,EAAE,CAAC,GAAG,EJEE,EAAE,AIFA,CJEA,AIFA,wBFTqB;AAC3D,CDAC,CAAC,CAAC,C1B2GC,IyBhGI,AKZJ,CLYK,ACXA,EAAE,CAAC,AGSA,KAAI,CAAC,CHTE,CAAA,AIAX,GDSc,G7BkGd,A6BlGiB,EAAC,IAAI,MCThB,ADSgB,EAAE,GCTb,CAAC,ADSgB,MAAA,EAAC,CCHhC,ADGgC,K7BkGzB,G2B3G6C;AACzD,Q3BsGI,AyB1FY,AKtBZ,CDmBK,aCnBG,GAAG,MLsBU,GAAjB,CKtBQ,MAAU,GLsBA,GAA+B,UEZH,kB3BsGiB;A2BnGvE,Q3BoGI,EAAE,EyB1FM,AKtBJ,CDkBO,GJIC,AKtBJ,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GLsBJ,AKtBO,CLsBN,CKtBQ,CHYO,CGZL,CLsBN,CAAC,SAAS,CAAC,EAAE;AER1C,Q3BmGI,IAAI,A6B9FI,IJII,AKtBJ,ADkBM,IJIE,CAAC,AKtBL,ADkBO,CClBN,EDkBS,KJIG,CAAC,AKtBL,CAAC,CDkBQ,CClBP,ADkBQ,KAAK,CJID,AIJE,CJID,CIJG,CAAC,EJIA,AKtBN,CLsBO,CKtBL,CAAC,EAAC,CAAC,CAAA,GLsBW,CAAC,CAAA;IETrB,S3BqG9B,A8BjHK,GLsBO,GIJG,CJIC,CAAC,SAAS,GAAG,WEV8B,MFUvB,AIJQ,CJIR,4CIJ6B,CAAC,GAAG,EAAE,GAAG,CAAG,CAAA;IF0C7E,Q3BsDI,A6B/FI,CJIC,IKvBE,E9BkHA,C6B/FK,CAAC,E7B+FF,CAAC,E2BtDJ,AEzCU,CAAC,EAAE,CAAC,CFyCF,E3BsDC,A6B/FI,C7B+FH,IAAI,A6B/FI,C7B+FJ,A6B/FI;Q7BgGlC,A2BvDA,C3BuDC,GyB3FO,AIJA,IJII,AKvBJ,CDmBI,CAAC,EFyCT,CG5DQ,CAAC,CDmBK,GAAG,EAAC,ECnBD,CAAC,CDmBI,CCnBH,KLuBA,AEqCb,AEzCgB,CJIF,CIJI,EJID,CAAC,AEqCb,CAAC,AG5DkB,CLuBJ,AIJG,CCnBG,KAAI,CAAC,ADmBR,CFsDhC,CEtDiC,CAAA,ECnBY,CAAC,MAAM,GAAG,CAAC,EAAC,CAAC,CAAA;QHsI1C,CElHZ,ICnBA,GLuBO,EE8GS,GAAiB,EF9GpB,EE8GwB,2BAAY,EAAE,CAAA;QAIvC,AGxIjB,CAAC,CAAA,GLuBQ,SEiHgB,GAAG,mCAAgB,CAAU,aAAa,CAAC,CAAA;IErHpE,CAAC,E7B6FA,C2ByBgB,AGrIb,ILoBI,CKpBA,CAAC,ELoBK,GAAG,AKpBH,CHqIS,EFjHM,AKpBZ,CHqIS,EFjHM,YAAY,KAAK,CAAC,SAAS,MEiHjB,CAAQ,WAAW,CAAC,CAAA;I3BvB9D,A6BjJA,IF4NiB,IGxLT,ILoBI,CAAC,AKpBA,CLoBC,CKpBC,MAAM,C9B6GjB,AyBzFkB,AKpBA,CLoBC,EEoKS,GAAmB,IAAI,AGxLvB,ELoBE,CAAC,GAAG,CAAC,GIxDtB,GAAjB,mB7BiJkB,C2B2EoD,CAAC,CAAC,CAAC,CAAA;QAlIrE,AE1FJ,ICqCQ,C9B4GR,A2BvDQ,CAAC,EFjCG,CAAC,CAAC,AKpBA,EAAE,CLoBC,CAAA,AEiCA,GAAG,AElFnB,CC6BqB,CAAC,WAAW;QDpC9B,I7BiJA,AyBxFI,AEiCA,AGrDA,ADrCA,CAAC,GJyDG,GzBwFD,E2BvDM,AE1FA,E7BiJF,A2BvDI,AGrDA,C9B4GH,A6BjJI,CCqCC,CAAC,KHqDK,CAAC,GFjCR,AIzDW,C7BiJH,AyBxFP,AIzDW,C7BiJJ,EyBxFJ,CAAC,EAAE,GEiCc,CAAC,KAAK,CAAC;Q3BwDhD,CAAC,A8B5GI,CAAA,EHqDG,AE1FA,IJyDI,AIzDA,GF0FG,CFjCC,CAAC,AEiCA,AE1FD,CAAC,KAAK,CAAC,CJyDE,AEiCA,CFjCC,AEiCA,EE1FC,KJyDM,AIzDD,CJyDE,GAAG,CAAC,CAAA,AEiCC,AE1FD,CF0FE,KAAK,CAAC;YACtC,IFjCI,AIzDA,IJyDI,AEiCA,CFjCC,CEiCC,CE1FA,GF0FI,GAAG,CFjCC,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GGRJ,CDpBY,CAAC,CF4BH,AE5BI,EF4BF,EE5BM,CAAC,C7B4ID,E2BhHA,C3BgHG,A2BhHF,CE5BK,CAAC,E7B4IA,E6B5II,C7B4ID,EAAE,CAAA,C2BhHA,MGRzB,KAAK,EAAE,EAAC,KAAK,EAAE,MAAM,CAAC,UAAU,EAAE,SAAS,EAAE,WAAW,EAAC;Q9ByH9D,I2BhHI,AGRC,C9BwHA,CAAC,E8BxHG,ADpBG,CCoBF,ADpBG,C7B4IH,A6B5II,C7B4IH,E2BhHE,EAAE,G3BgHG,A8BxHC,C9BwHA,A8BxHC,O9BwHM,EAAE,CAAC,A2BhHA,C3BgHC,G8BxHI,CHQA,CAAC,AGRC,E9BwHC,CAAC,C8BxHE,ADpBrB,ECoBuB,CAAC,CAAC,CDpBpB,EAAE,E7B4Ia,A6B5IZ,E7B4IwB,G6B5InB,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAC,EAAE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;YCqBxE,ADnBD,I7B0ImC,A2B/G/B,AGRC,CHQA,AGRC,CHQA,MAAM,EGRG,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,C9BuHiB,A8BvHhB,CAC7B,ADpBG,C7B0I+B,A6BzIlC,CAAA,S7ByIoC,EAAE,cAAM;I8BzHlD,ADfJ,CCkBU,ADlBT,O7ByIO,IAAI,A2B/GA,C3B+GC,A2B/GA,CAAC,Q3B+GQ,CAAC,GAAG,CAAC,EAAE,CAAC,A2B/GF,CAAC,cAAc,QAAK;IGN5C,ADER,KFKS,CAAA,M3B+GO,OAAM,C8BtHb,CDER,GCFY,OAAE,CACK,EAChB,IAAI,CACP,CAAA;ADDD,CAtDA,AAsDC,CAtDmC,KAAK,CF4DjC,AE5DkC,I7B2K9B,A2B/GE,KE5DqC,GAsDlD,I7BqHuB,A2B/GE,C3B+GD,E2B/GI,C3B+GD,CAAC,EAAE,EAAE,I2B/GH,E3B+GS,CAAC,CAAA,E2B/GA;AE5D3B,Y7B4KD,A2B/GA,OAAO,O3B+GO,CAAC,K2B/GK,M3B+GM,CAAC,C6B5KZ,Q7B4KqB,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,MAAM,CAAC,CAAA;A6BpHlE,IAAM,I7BqHE,CAAC,CAAC,CAAA,E6BrHK,GFMC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","file":"9da1f22267b6c295272a7b7fd7c852e0.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\n\nexport function cloneFastBinaryIndexedTree(source: FastBinaryIndexedTree): FastBinaryIndexedTree {\n    const target = new FastBinaryIndexedTree({\n        defaultFrequency: source.defaultFrequency,\n        maxVal: source.maxVal\n    })\n\n    target['_tree'] = {...source['_tree']}\n    target['_countNeg'] = source['_countNeg']\n\n    return target\n}\n","import {notExisting} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: Maybe<A>, defaultValue: A): A {\n    return notExisting(maybe) || Number.isNaN(maybe) ? defaultValue : maybe\n}\n\n","export const nothing: nothing = null\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\nimport {notExisting} from '../typecheck/existing'\nimport {cloneFastBinaryIndexedTree} from '../utils/cloneFastBinaryIndexedTree'\nimport {ensure} from '../utils/ensure'\nimport {nothing} from '../utils/nothing'\n\nexport type ListItemID = string\nexport type ListItemShape = {\n    id: ListItemID\n    height: px\n}\nexport type ListItemPosition = {\n    id: ListItemID\n    index: number\n    height: px\n    offset: px\n}\n\nexport interface ListLayout {\n    getByID(id: ListItemID): Maybe<ListItemPosition>\n    getByIndex(index: number): Maybe<ListItemPosition>\n    getByIndexRange(from: number, to: number): Array<ListItemPosition>\n    getByOffset(position: px): Maybe<ListItemPosition>\n    getByOffsetRange(from: px, to: px): Array<ListItemPosition>\n\n    readonly itemIDs: ReadonlyArray<ListItemID>\n    readonly size: number\n    readonly totalHeight: px\n    readonly defaultHeight: px\n    readonly updatedHeights: ReadonlyMap<ListItemID, px>\n\n    join(itemIDs: ReadonlyArray<ListItemID>): ListLayout\n    updateWith(updates: ReadonlyArray<ListItemShape>): ListLayout\n}\n\nexport class ListLayoutImpl implements ListLayout {\n    public getByID(id: ListItemID): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const index = this.idToIndex.get(id)\n        if (notExisting(index)) { return nothing }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndex(index: number): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const id = this.indexToID[index]\n        if (notExisting(id)) { return undefined }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndexRange(from: number, to: number): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByIndex(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByIndex(to), this.getByIndex(this.size - 1)!)\n        const results: Array<ListItemPosition> = []\n        for (let i = fromItem.index; i <= toItem.index; i++) {\n            results.push(this.getByIndex(i)!)\n        }\n        return results\n    }\n\n    public getByOffset(position: px): Maybe<ListItemPosition> {\n        if (this.size === 0) { return undefined }\n        let bound = this.prefixSumIndex.upperBound(position)\n        const index = bound === this.size ? bound - 1 : bound\n        const id = this.indexToID[index]\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByOffsetRange(from: px, to: px): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByOffset(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByOffset(to), this.getByIndex(this.size - 1)!)\n        const results: Array<ListItemPosition> = []\n        for (let i = fromItem.index; i <= toItem.index; i++) {\n            results.push(this.getByIndex(i)!)\n        }\n        return results\n    }\n\n    public readonly totalHeight: px\n\n    public updateWith(updates: ReadonlyArray<ListItemShape>): ListLayout {\n        const {indexToID, idToIndex, knownHeights, defaultHeight, prefixSumIndex} = this\n\n        if (!updates.some(update => this.knownHeights.get(update.id) !== update.height)) {\n            return this\n        }\n\n        const newKnownHeights = new Map(knownHeights)\n        const newPrefixSumIndex = cloneFastBinaryIndexedTree(prefixSumIndex)\n\n        updates.forEach(update => {\n            const {height, id} = update\n            newKnownHeights.set(id, height)\n            newPrefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            indexToID,\n            idToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    public join(newIndexToID: ReadonlyArray<ListItemID>): ListLayout {\n        const {indexToID, knownHeights, defaultHeight, prefixSumIndex} = this\n\n        // if(deepEqual(indexToID, newIndexToID)) {\n        //     return this\n        // } // TODO too time-consuming for large list\n\n        const newIdToIndex = new Map()\n        newIndexToID.forEach((id, index) => newIdToIndex.set(id, index))\n\n        const newKnownHeights = new Map()\n        const newPrefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: prefixSumIndex.defaultFrequency,\n            maxVal: newIndexToID.length\n        })\n        newIndexToID.forEach(id => {\n            const currentHeight = knownHeights.get(id)\n            if (notExisting(currentHeight))\n                return\n            newKnownHeights.set(id, knownHeights.get(id))\n            newPrefixSumIndex.writeSingle(newIdToIndex.get(id)!, currentHeight)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            newIndexToID,\n            newIdToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    // diff(from: ListLayout, only?: Array<ItemID>): Array<ItemShape> {\n    //\n    // }\n\n    get size(): number {\n        return this.idToIndex.size\n    }\n\n    get updatedHeights(): ReadonlyMap<ListItemID, px> {\n        return this.knownHeights\n    }\n\n    get itemIDs(): ReadonlyArray<ListItemID> {\n        return this.indexToID\n    }\n\n    static create(segments: ReadonlyArray<ListItemID>,\n                  defaultHeight: px = 100,\n                  heights: ReadonlyMap<ListItemID, px> = new Map()): ListLayout {\n        const indexToID = Array.from(segments)\n\n        const idToIndex = new Map()\n        indexToID.forEach((id, index) => idToIndex.set(id, index))\n\n        const prefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: defaultHeight,\n            maxVal: indexToID.length\n        })\n\n        const knownHeights = new Map()\n        Array.from(heights.entries()).forEach(([id, height]) => {\n            if (!idToIndex.has(id))\n                return\n            knownHeights.set(id, height)\n            prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            indexToID,\n            idToIndex,\n            knownHeights,\n            prefixSumIndex\n        )\n    }\n\n    private constructor(\n        public readonly defaultHeight: px,\n        private readonly indexToID: ReadonlyArray<ListItemID>,\n        private readonly idToIndex: ReadonlyMap<ListItemID, number>,\n        private readonly knownHeights: Map<ListItemID, px>,\n        private readonly prefixSumIndex: FastBinaryIndexedTree\n    ) {\n        this.totalHeight = this.prefixSumIndex.read(this.indexToID.length)\n    }\n}\n\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        {publish: createPublishers<Required<T>>(subjects)},\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {Observable} from 'rxjs/Observable'\n\nexport type Pipe<A, B=A> = (source: Observable<A>) => Observable<B>\n\nexport type Pass<T> = Pipe<T, T>\nexport const Pass = <T>(observable: Observable<T>): Observable<T> => observable\n\n","export function isFalse(value: any): value is false {\n    return value === false\n}\n","export function isTrue(value: any): value is true {\n    return value === true\n}\n","export function isFunction(a: any): a is Function {\n    return typeof a === 'function'\n}\n","import {notExisting} from '../typecheck/existing'\nimport {isFunction} from '../typecheck/isFunction'\nimport {nothing} from './nothing'\n\nexport function assume<A, B>(a: Maybe<A>, func: (a: A) => B): Maybe<B>\nexport function assume<A, B, C>(a: Maybe<A>, b: Maybe<B>, func: (a: A, b: B) => C): Maybe<C>\nexport function assume<T>(...params: Array<Maybe<any> | ((...p: Array<Maybe<any>>) => T)>): Maybe<T> {\n    const func = params[params.length - 1]\n    const funcParams = params.slice(0, params.length - 1)\n    if (!isFunction(func) || funcParams.length < 1 || funcParams.some(notExisting)) {\n        return nothing\n    }\n    return func(...funcParams)\n}\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","export type Pulse = any\nexport let Pulse: Pulse = true\n","import {notExisting} from '../typecheck/existing'\nimport {nothing} from './nothing'\n\nexport function calcSum(array: Array<number>): number {\n    return array.reduce((acc, curr) => acc + curr, 0)\n}\n\nexport function calcAverage(array: Array<number>): Maybe<number> {\n    if (array.length === 0)\n        return nothing\n    return calcSum(array) / array.length\n}\n\nexport function nearestToAverage(array: Array<number>): Maybe<number> { // TODO better name\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    const sorted = array.sort((a, b) => Math.abs(a - average) - Math.abs(b - average))\n    return sorted[0]\n}\n\nexport function calcDeviation(array: Array<number>): Maybe<number> {\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    return calcAverage(array.map(num => Math.abs(num - average)))\n}\n\n\n","export async function forDuration(duration: ms): Promise<void> {\n    return new Promise<void>((then) => setTimeout(then, duration))\n}\n","export async function nextAnimationFrame(): Promise<undefined> {\n    return new Promise(resolve => requestAnimationFrame(resolve)) as Promise<any>;\n}\n","// https://stackoverflow.com/a/44078785/1815491\nexport function uniqueID() {\n    return Math.random().toString(36).substring(2)\n        + (new Date()).getTime().toString(36);\n}\n","// ignoring rotate\r\nimport {ensure} from '../utils/ensure'\r\n\r\nexport function calcOutline(dom: Element): Outline {\r\n    const rect = dom.getBoundingClientRect()\r\n    const opacityCSS = ensure<string>(getComputedStyle(dom).opacity, '1')\r\n\r\n    const opacity = parseFloat(opacityCSS)\r\n    const {width, height} = rect\r\n    const x = rect.left\r\n    const y = rect.top\r\n\r\n    return {x, y, width, height, opacity}\r\n}\r\n","import {notExisting} from '../typecheck/existing'\n\nexport function hasStyle(style: Maybe<string>): style is string {\n    return !(style === 'none' || style === '' || notExisting(style));\n}\n\n","import {applyToPoints} from 'transformation-matrix/applyToPoint'\nimport {fromString} from 'transformation-matrix/fromString'\nimport {inverse} from 'transformation-matrix/inverse'\nimport {calcOutline} from './calcOutline'\nimport {hasStyle} from './hasStyle'\n\n// ignoring rotate\nexport function calcOutlineOrigin(dom: Element): Outline {\n    let outline: Outline = {...calcOutline(dom), opacity: 1}\n\n    const transformCSS = window.getComputedStyle(dom).transform\n    if (hasStyle(transformCSS)) {\n        const {x, y, width, height} = outline\n        const transform = fromString(transformCSS)\n        const inverted = inverse(transform)\n        const [topLeft, bottomRight] =\n            applyToPoints(inverted, [{x, y}, {x: x + width, y: y + height}])\n        outline = {\n            x: topLeft.x,\n            y: topLeft.y,\n            width: Math.abs(bottomRight.x - topLeft.x),\n            height: Math.abs(bottomRight.y - topLeft.y),\n            opacity: 1\n        }\n    }\n\n    return outline\n}\n","import {scale, toCSS, transform, translate} from 'transformation-matrix'\n\nexport function calcTransform(from: Outline, to: Outline): string {\n    const withAnchor = (rect: Outline): [px, px] => {\n        return [\n            rect.x + rect.width * 0.5,\n            rect.y + rect.height * 0.5\n        ]\n    }\n    const [fromX, fromY] = withAnchor(from)\n    const [toX, toY] = withAnchor(to)\n\n    const matrix = transform(\n        translate(toX - fromX, toY - fromY),\n        scale(to.width / from.width, to.height / from.height)\n    )\n\n    return toCSS(matrix)\n}\n\n","import {isFunction} from '../typecheck/isFunction'\nimport {forDuration} from '../utils/forDuration'\nimport {nextAnimationFrame} from '../utils/nextAnimationFrame'\nimport {uniqueID} from '../utils/uniqueID'\nimport {calcOutline} from './calcOutline'\nimport {calcOutlineOrigin} from './calcOutlineOrigin'\nimport {calcTransform} from './calcTransform'\n\nexport async function tweenHere(element: HTMLElement,\n                                from: Outline | ((curr: Outline) => Outline) = () => calcOutline(element),\n                                duration: ms | ((prev: Outline, curr: Outline) => ms) = 200,\n                                easing: Easing = [0, 0, 1, 1]): Promise<void> {\n    const id: TweeningID = uniqueID()\n    singleTweenLock.set(element, id)\n\n    const curr = calcOutlineOrigin(element)\n    const prev = isFunction(from) ? from({...curr}) : from\n    const invert = calcTransform(curr, prev)\n\n    element.style.transition = 'none'\n    element.style.transform = invert\n    element.style.opacity = `${prev.opacity}`\n\n    await nextAnimationFrame()\n    if (singleTweenLock.get(element) !== id)\n        return\n    const tweenDuration = isFunction(duration) ? duration(prev, curr) : duration\n    element.style.transition = `\n        opacity ${tweenDuration}ms cubic-bezier(${easing.join(',')}),\n        transform ${tweenDuration}ms cubic-bezier(${easing.join(',')})\n    `\n    element.style.transform = 'none'\n    element.style.opacity = '1'\n\n    await forDuration(tweenDuration)\n    if (singleTweenLock.get(element) !== id)\n        return\n    element.style.transition = `none`\n    singleTweenLock.delete(element)\n}\n\nconst singleTweenLock: WeakMap<Element, TweeningID> = new WeakMap<Element, TweeningID>()\n\ntype TweeningID = string\n","import {ensure} from '../../../../utils/ensure'\n\nexport function calcFocusOffset(focusOffset: Maybe<px>, viewportHeight: px): px {\n    return ensure<px>(focusOffset, viewportHeight / 3)\n}\n","import {ListItemPosition, ListLayout} from '../../../../layouts/ListLayoutImpl'\nimport {existing} from '../../../../typecheck/existing';\n\nconst pageSize = 10\n\nexport function calcSegments(scroll: px, preload: px,\n                             height: px, layout: ListLayout): Array<ListItemPosition> {\n    const segments: Array<ListItemPosition> = []\n\n    const floorSeg = layout.getByOffset(\n        Math.max(\n            Math.min(\n                scroll - height,\n                scroll + preload\n            ),\n            0\n        )\n    )\n    const ceilSeg = layout.getByOffset(\n        Math.min(\n            Math.max(\n                scroll + height + height,\n                scroll + height + preload\n            ),\n            layout.totalHeight\n        )\n    )\n    if (existing(floorSeg) && existing(ceilSeg)) {\n        const fromIndex = Math.floor(floorSeg.index / pageSize) * pageSize\n        const toIndex = Math.min(\n            Math.ceil(ceilSeg.index / pageSize) * pageSize,\n            layout.size - 1\n        )\n        for (let index = fromIndex; index <= toIndex; index++) {\n            segments.push(layout.getByIndex(index)!)\n        }\n    }\n\n    return segments\n}\n","import {ListLayout} from '../../../../layouts/ListLayoutImpl'\nimport {notExisting} from '../../../../typecheck/existing'\nimport {assume} from '../../../../utils/assume'\n\nexport function projectScroll(scroll: px, focusOffset: px, from: ListLayout, to: ListLayout): px {\n    const prev = from.getByOffset(scroll + focusOffset)\n    const curr = assume(prev, prev => to.getByID(prev.id))\n    if (notExisting(prev) || notExisting(curr))\n        return scroll\n    const prevHeightBeforeFocus = scroll + focusOffset - prev.offset\n    const currHeightBeforeFocus = (prevHeightBeforeFocus / prev.height) * curr.height\n    return curr.offset - (focusOffset - currHeightBeforeFocus)\n}\n","import {ListItemShape, ListLayout} from '../../../../layouts/ListLayoutImpl'\nimport {SegmentID} from '../types/SegmentID'\n\nexport function updateLayout(prevLayout: ListLayout,\n                             segmentIDs: ReadonlyArray<SegmentID>,\n                             updates: ReadonlyArray<ListItemShape>): ListLayout {\n    let newLayout = prevLayout\n    const areIDsUpdated = newLayout.itemIDs !== segmentIDs\n    if (areIDsUpdated) {\n        newLayout = newLayout.join(segmentIDs)\n    }\n    return newLayout.updateWith(updates)\n}\n\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {isString} from 'util';\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\n\nexport function measuring<C extends React.ComponentClass<any> | keyof React.ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                {ref: (it: any) => this.updateRef(it)}\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<C> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateRef(ref: Maybe<React.ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if (notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if (!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends React.ComponentClass<any> | keyof React.ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import sharedInstance from 'jss'\nimport * as React from 'react';\nimport {ListItemShape} from '../../../layouts/ListLayoutImpl'\nimport {measuring, Measuring} from '../../../react/measure/measuring'\nimport {PropsOf} from '../../../react/PropsOf';\nimport {existing} from '../../../typecheck/existing'\nimport {Segment} from './types/Segment'\n\nexport class MeasuredSegment extends React.PureComponent<Props> {\n    render() {\n        const {id, width} = this.props\n        const {Segment} = this\n        return <Segment id={id} width={width} onHeightChange={this.reportHeight}/>\n    }\n\n    private reportHeight = (height: px) => {\n        const id = this.props.id\n\n        if (existing(this.props.onHeightChange)) {\n            this.props.onHeightChange({id, height})\n        }\n    }\n\n    constructor(props: Props) {\n        super(props)\n        this.Segment = measuring(props.Segment)\n    }\n\n    private Segment: Measuring<Segment>\n}\n\ntype Props = PropsOf<Segment>\n    & { Segment: Segment }\n    & { onHeightChange: EventHandler<ListItemShape> }\n\nconst classes = sharedInstance.createStyleSheet({\n    mask: {\n        display: 'block',\n        contain: 'content',\n        height: 'auto',\n        willChange: 'height'\n    }\n}).attach().classes\n","import sharedInstance from 'jss'\r\nimport * as React from 'react'\r\nimport {CSSProperties} from 'react'\r\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {interval} from 'rxjs/observable/interval'\r\nimport {\r\n    bufferCount,\r\n    bufferTime,\r\n    combineLatest,\r\n    distinctUntilChanged,\r\n    filter,\r\n    map,\r\n    merge,\r\n    pairwise,\r\n    sampleTime,\r\n    scan,\r\n    shareReplay,\r\n    startWith,\r\n    timestamp,\r\n    withLatestFrom\r\n} from 'rxjs/operators'\r\nimport {animationFrame} from 'rxjs/scheduler/animationFrame'\r\nimport {Subscription} from 'rxjs/Subscription'\r\nimport {Memoize} from 'typescript-memoize'\r\nimport {ListItemPosition, ListItemShape, ListLayout, ListLayoutImpl} from '../../layouts/ListLayoutImpl'\r\nimport {createDispatcher} from '../../rxjs/createDispatcher'\r\nimport {Pass} from '../../rxjs/Pipe';\r\nimport {Pipes} from '../../rxjs/Pipes'\r\nimport {existing} from '../../typecheck/existing'\r\nimport {isFalse} from '../../typecheck/isFalse';\r\nimport {isTrue} from '../../typecheck/isTrue';\r\nimport {assume} from '../../utils/assume'\r\nimport {ensure} from '../../utils/ensure'\r\nimport {nothing} from '../../utils/nothing'\r\nimport {publishAll} from '../../utils/publishAll'\r\nimport {Pulse} from '../../utils/Pulse'\r\nimport {calcAverage, nearestToAverage} from '../../utils/statics';\r\nimport {tweenHere} from '../../view/tweenHere'\r\nimport {calcFocusOffset} from './src/functions/calcFocusOffset'\r\nimport {calcSegments} from './src/functions/calcSegments'\r\nimport {projectScroll} from './src/functions/projectScroll'\r\nimport {updateLayout} from './src/functions/updateLayout'\r\nimport {MeasuredSegment} from './src/MeasuredSegment';\r\nimport {Segment} from './src/types/Segment'\r\nimport {SegmentID} from './src/types/SegmentID'\r\nimport deepEqual = require('deep-equal')\r\n\r\nexport class InfiniteList extends React.Component<Props, State> {\r\n    public render(): JSX.Element {\r\n        const {scrolled, heightUpdated, touchEnded, touchMoved, touchStarted} = this.actions$.publish\r\n        const {state, props, children, temporalScroll} = this\r\n        const {Segment, width, height} = props\r\n        const {segments, layout, useAutoLayout} = state\r\n\r\n        const paddingTop = useAutoLayout\r\n            ? <div key={'infinite-scroll-padding-top'}\r\n                   style={{height: existing(segments[0]) ? segments[0].offset : 0}}/>\r\n            : nothing\r\n\r\n        const contentStyle = {\r\n            width,\r\n            height: layout.totalHeight,\r\n            transform: temporalScroll === 0\r\n                ? 'none'\r\n                : `translateY(${-temporalScroll}px)`\r\n        }\r\n        const segmentStyle = (offset: px): CSSProperties => {\r\n            return useAutoLayout\r\n                ? {position: 'relative'}\r\n                : {position: 'absolute', top: `${offset}px`}\r\n        }\r\n\r\n        return <div className={classes.container} style={{width, height}}\r\n                    ref={ref => existing(ref) ? children.container = ref : nothing}\r\n                    onScroll={scrolled}\r\n                    onTouchStartCapture={touchStarted}\r\n                    onTouchEndCapture={touchEnded}\r\n                    onTouchMoveCapture={touchMoved}>\r\n            <div className={classes.content} style={contentStyle}\r\n                 ref={ref => existing(ref) ? children.content = ref : nothing}>\r\n                {paddingTop}\r\n                {segments.map(spec =>\r\n                    <div key={spec.id} className={classes.segment}\r\n                         style={segmentStyle(spec.offset)}\r\n                         ref={ref => existing(ref)\r\n                             ? children.segments.set(spec.id, ref)\r\n                             : children.segments.delete(spec.id)}>\r\n                        <MeasuredSegment {...{id: spec.id, Segment, width}}\r\n                                         onHeightChange={heightUpdated}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.children = {\r\n            container: document.createElement('div'),\r\n            content: document.createElement('div'),\r\n            segments: new Map<SegmentID, HTMLElement>()\r\n        }\r\n\r\n        const layout = ListLayoutImpl.create(props.segmentIDs, Math.round(props.height / 6))\r\n        const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n        const focus = assume(props.focus, focus => layout.getByID(focus))\r\n        const scroll = ensure<px>(assume(focus, focus => focus.offset - focusOffset), 0)\r\n        const segments = calcSegments(scroll, 0, props.height, layout)\r\n        this.state = {scroll, layout, segments, useAutoLayout: true}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.children.container.scrollTop = this.state.scroll\r\n        this.work.add(this.updateState())\r\n        this.work.add(this.adjustScroll())\r\n        this.work.add(this.focusOnSegment())\r\n        this.work.add(this.callEventHandlers())\r\n        publishAll<Props>(this.props, this.props$.publish)\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {state, children} = this\r\n\r\n        if (prevProps !== this.props) {\r\n            publishAll<Props>(this.props, this.props$.publish)\r\n        }\r\n\r\n        if (prevState.layout !== state.layout) {\r\n            const {containerScroll, temporalScroll} = this\r\n            const visualScroll = containerScroll + temporalScroll\r\n\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const expectedScroll = projectScroll(\r\n                visualScroll, focusOffset,\r\n                prevState.layout, state.layout\r\n            )\r\n\r\n            if (Math.abs(this.velocity) <= 0.01) {\r\n                this.temporalScroll = 0\r\n                this.containerScroll = expectedScroll\r\n            } else {\r\n                this.temporalScroll = Math.ceil(expectedScroll - containerScroll)\r\n            }\r\n\r\n            if (!state.useAutoLayout && !prevState.useAutoLayout) {\r\n                Array.from(children.segments.entries())\r\n                    .forEach(([segmentID, element]) => {\r\n                        const prev = prevState.layout.getByID(segmentID)\r\n                        const curr = state.layout.getByID(segmentID)\r\n\r\n                        if (!existing(prev) || !existing(curr))\r\n                            return\r\n                        if (prev.offset - visualScroll === curr.offset - expectedScroll)\r\n                            return\r\n\r\n                        tweenHere(\r\n                            element,\r\n                            curr => ({...curr, y: prev.offset - visualScroll}),\r\n                            200,\r\n                            [0.445, 0.05, 0.55, 0.95]\r\n                        )\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.work.unsubscribe()\r\n    }\r\n\r\n    private readonly work: Subscription = new Subscription()\r\n\r\n    private readonly children: Children\r\n\r\n    private readonly actions$ = createDispatcher<Actions>(actionsFilter)\r\n    private readonly props$ = createDispatcher<Props>(propsFilter)\r\n\r\n    @Memoize()\r\n    private get height$(): Observable<px> {\r\n        const {height} = this.props$\r\n\r\n        return height.pipe(\r\n            startWith(this.props.height),\r\n            distinctUntilChanged(),\r\n            // log$('height'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get layout(): Observable<ListLayout> {\r\n        const {segmentIDs} = this.props$\r\n        const {heightUpdated} = this.actions$\r\n\r\n        const updates: Observable<Array<ListItemShape>> = heightUpdated.pipe(\r\n            bufferTime(0, animationFrame),\r\n            filter(buffer => buffer.length > 0)\r\n        )\r\n\r\n        return segmentIDs.pipe(\r\n            combineLatest(updates),\r\n            scan<[Array<SegmentID>, Array<ListItemShape>], ListLayout>(\r\n                (layout, [ids, updates]) => updateLayout(layout, ids, updates),\r\n                this.state.layout\r\n            ),\r\n            startWith(this.state.layout),\r\n            distinctUntilChanged(),\r\n            // log$('layout'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    private get temporalScroll(): px {\r\n        const {temporalScroll$} = this\r\n        return (temporalScroll$ as BehaviorSubject<px>).getValue()\r\n    }\r\n\r\n    private set temporalScroll(scroll: px) {\r\n        const {temporalScroll$} = this\r\n        const {content} = this.children;\r\n\r\n        (temporalScroll$ as BehaviorSubject<px>).next(scroll)\r\n        content.style.transform = scroll === 0\r\n            ? 'none'\r\n            : `translateY(${-scroll}px)`\r\n    }\r\n\r\n    private readonly temporalScroll$: Observable<px> = new BehaviorSubject(0)\r\n\r\n    private get containerScroll(): px {\r\n        const {container} = this.children\r\n        return container.scrollTop\r\n    }\r\n\r\n    private set containerScroll(scroll: px) {\r\n        const {container} = this.children\r\n        container.style['-webkit-overflow-scrolling'] = 'auto'\r\n        container.scrollTop = scroll\r\n        container.style['-webkit-overflow-scrolling'] = 'touch'\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScroll$(): Observable<px> {\r\n        const {scrolled, touchStarted, touchEnded} = this.actions$\r\n\r\n        const shouldSample: Observable<Pulse> = scrolled.pipe(\r\n            merge(touchStarted),\r\n            merge(touchEnded),\r\n            merge(interval(0, animationFrame)),\r\n            timestamp(),\r\n            distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            sampleTime(0, animationFrame),\r\n            startWith(Pulse)\r\n        )\r\n\r\n        return shouldSample.pipe(\r\n            map(() => this.containerScroll),\r\n            map(Math.round),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScrollVelocity$(): Observable<Velocity> {\r\n        const {containerScroll$} = this\r\n\r\n        const move = containerScroll$.pipe(\r\n            timestamp(),\r\n            // distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            pairwise()\r\n        )\r\n\r\n        return move.pipe(\r\n            map(([prev, curr]) =>\r\n                (curr.value - prev.value) / (curr.timestamp - prev.timestamp)\r\n            ),\r\n            startWith(0),\r\n            bufferCount(3, 1),\r\n            map(nearestToAverage),\r\n            filter(existing),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get useAutoLayout$(): Observable<boolean> {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        return containerScrollVelocity$.pipe(\r\n            map(Math.abs),\r\n            map(speed => speed > 3),\r\n            bufferCount(2, 1),\r\n            map(buffer => buffer.filter(isTrue).length > buffer.filter(isFalse).length),\r\n            distinctUntilChanged(),\r\n            // log$('useAutoLayout'),\r\n            shareReplay(1)\r\n        )\r\n\r\n    }\r\n\r\n    @Memoize()\r\n    private get scroll$(): Observable<Velocity> {\r\n        const {containerScroll$, temporalScroll$} = this\r\n\r\n        return containerScroll$.pipe(\r\n            withLatestFrom(temporalScroll$),\r\n            map(([container, temporal]) => container + temporal)\r\n        )\r\n    }\r\n\r\n    private get velocity(): Velocity {\r\n        return this['_velocity']\r\n    }\r\n\r\n    private updateState(): Subscription {\r\n        const {scroll$, layout, containerScrollVelocity$, height$, useAutoLayout$} = this\r\n\r\n        const preload$: Observable<px> = containerScrollVelocity$.pipe(\r\n            bufferCount(3, 1),\r\n            map(calcAverage),\r\n            filter(existing),\r\n            map(Math.round),\r\n            map(velocity => Math.max(Math.min(velocity * 500, 10000), -10000)),\r\n            distinctUntilChanged(),\r\n            // log$('preload'),\r\n            shareReplay(1)\r\n        )\r\n\r\n        const state: Observable<State> = scroll$.pipe(\r\n            combineLatest(preload$, useAutoLayout$, layout, height$),\r\n            map(([scroll, preload, useAutoLayoutByVelocity, layout, height]): State => {\r\n                const segments = calcSegments(scroll, preload, height, layout)\r\n                const useAutoLayout = useAutoLayoutByVelocity ||\r\n                    !segments.some(segment => segment.height !== layout.defaultHeight)\r\n                return {layout, segments, useAutoLayout, scroll}\r\n            }),\r\n            distinctUntilChanged((prev, curr) =>\r\n                prev.useAutoLayout === curr.useAutoLayout &&\r\n                prev.layout === curr.layout &&\r\n                deepEqual(prev.segments, curr.segments)\r\n            ),\r\n            startWith(this.state),\r\n            // tap(state=> console.log(state.useAutoLayout)),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return state.subscribe(state => this.setState(state))\r\n    }\r\n\r\n    private adjustScroll(): Subscription {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        const shouldApplyTemporalScroll: Observable<Pulse> = containerScrollVelocity$.pipe(\r\n            bufferCount(2, 1),\r\n            filter(buffer => !buffer.some(v => Math.abs(v) > 0.01))\r\n        )\r\n\r\n        return shouldApplyTemporalScroll.subscribe(() => {\r\n            const {temporalScroll, containerScroll} = this\r\n            if (temporalScroll === 0)\r\n                return\r\n            // console.log('adjusted')\r\n            this.containerScroll = containerScroll + temporalScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private focusOnSegment(): Subscription {\r\n        const {props$} = this\r\n\r\n        const newFocusSegment = props$.focus.pipe(\r\n            distinctUntilChanged(),\r\n            filter(existing),\r\n            map(focus => this.state.layout.getByID(focus)),\r\n            filter(existing)\r\n        )\r\n\r\n        return newFocusSegment.subscribe(segment => {\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const targetScroll = segment.offset - focusOffset\r\n            this.containerScroll = targetScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private callEventHandlers(): Subscription {\r\n        const {scroll$, layout} = this\r\n\r\n        const work = new Subscription()\r\n\r\n        work.add(scroll$.subscribe(scroll => {\r\n            if (existing(this.props.onScroll))\r\n                this.props.onScroll(scroll)\r\n        }))\r\n        work.add(layout.subscribe(layout => {\r\n            if (existing(this.props.onReflow))\r\n                this.props.onReflow(layout)\r\n        }))\r\n\r\n        return work\r\n    }\r\n}\r\n\r\ntype Props = {\r\n    segmentIDs: Array<SegmentID>\r\n    width: px\r\n    height: px\r\n    Segment: Segment\r\n    focus?: SegmentID\r\n    focusOffset?: px\r\n    onScroll?: EventHandler<px>\r\n    onReflow?: EventHandler<ListLayout>\r\n}\r\nconst propsFilter: Pipes<Required<Props>> = {\r\n    segmentIDs: distinctUntilChanged(),\r\n    width: distinctUntilChanged(),\r\n    height: distinctUntilChanged(),\r\n    Segment: distinctUntilChanged(),\r\n    focus: distinctUntilChanged(),\r\n    focusOffset: distinctUntilChanged(),\r\n    onScroll: distinctUntilChanged(),\r\n    onReflow: distinctUntilChanged()\r\n}\r\n\r\ntype State = {\r\n    scroll: px\r\n    layout: ListLayout\r\n    segments: Array<ListItemPosition>\r\n    useAutoLayout: boolean\r\n}\r\ntype Children = {\r\n    container: HTMLElement\r\n    content: HTMLElement\r\n    segments: Map<SegmentID, HTMLElement>\r\n}\r\n\r\ntype Actions = {\r\n    scrolled: React.SyntheticEvent<HTMLDivElement>\r\n    touchStarted: React.TouchEvent<HTMLDivElement>\r\n    touchMoved: React.TouchEvent<HTMLDivElement>\r\n    touchEnded: React.TouchEvent<HTMLDivElement>\r\n    heightUpdated: ListItemShape\r\n}\r\nconst actionsFilter: Pipes<Actions> = {\r\n    scrolled: Pass,\r\n    touchStarted: Pass,\r\n    touchMoved: Pass,\r\n    touchEnded: Pass,\r\n    heightUpdated: Pass\r\n}\r\n\r\nexport const classes = sharedInstance.createStyleSheet({\r\n    container: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        'overflow-x': 'hidden',\r\n        'overflow-y': 'scroll',\r\n        'overflow-anchor': 'none', // https://stackoverflow.com/questions/42205462/disable-chromes-scroll-preserving-feature\r\n        'scroll-behavior': 'auto',\r\n        '-webkit-overflow-scrolling': 'touch',\r\n        contain: 'strict',\r\n        'will-change': 'transform', // https://bugs.chromium.org/p/chromium/issues/detail?id=514303\r\n        '-webkit-font-smoothing': 'subpixel-antialiased'\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        contain: 'strict',\r\n        'will-change': 'transform, height'\r\n    },\r\n    segment: {\r\n        display: 'block',\r\n        'will-change': 'top, height'\r\n    }\r\n}).attach().classes\r\n\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","import * as loremIpsum from 'lorem-ipsum'\r\nimport * as React from 'react';\r\nimport {PropsOf} from '../../../react/PropsOf';\r\nimport {ensure} from '../../../utils/ensure'\r\nimport {getRandomIntInclusive} from '../../../utils/getRandomIntInclusive'\r\nimport {Segment} from '../src/types/Segment';\r\n\r\nexport class SegmentExample extends React.Component<PropsOf<Segment>, State> {\r\n    componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            if (this.state.type !== 'text')\r\n                return\r\n            const text = loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[this.props.id] = text\r\n            this.setState({text})\r\n        }, getRandomIntInclusive(1000, 5000))\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval)\r\n    }\r\n\r\n    render() {\r\n        return <div style={{\r\n            display: 'block',\r\n            width: this.props.width,\r\n            backgroundColor: 'white',\r\n            wordWrap: 'break-word',\r\n            wordBreak: 'break-all'\r\n        }}>\r\n            <div>{this.props.id}</div>\r\n            <br/>\r\n            {\r\n                this.state.type === 'text'\r\n                    ? this.state.text\r\n                    : <img style={{width: this.props.width}} src={this.state.image}/>\r\n            }\r\n            <br/>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: PropsOf<Segment>) {\r\n        super(props)\r\n        const type = ensure(typeCache[props.id], Math.random() > 0.2 ? 'text' : 'image')\r\n        typeCache[props.id] = type\r\n\r\n        let state: State\r\n\r\n        if (type === 'text') {\r\n            let text = textCache[props.id] || loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[props.id] = text\r\n            this.state = {type, text}\r\n        } else {\r\n            const image = imgCache[props.id]\r\n                || `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`\r\n            imgCache[props.id] = image\r\n            this.state = {type, image}\r\n        }\r\n    }\r\n\r\n    private interval: any\r\n}\r\n\r\nconst typeCache: { [id: string]: 'text' | 'image' } = {}\r\nconst textCache: { [id: string]: string } = {}\r\nconst imgCache: { [id: string]: string } = {}\r\n\r\ntype State = { type: 'text', text: string }\r\n    | { type: 'image', image: string }\r\n\r\n\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom'\r\nimport ErrorBoundary from 'react-error-boundary'\r\nimport {InfiniteList} from '../InfiniteList'\r\nimport {SegmentID} from '../src/types/SegmentID'\r\nimport {SegmentExample} from './SegmentExample'\r\n\r\nconst segmentIDs: Array<SegmentID> = []\r\nfor (let i = 0; i < 100000; i++) {\r\n    segmentIDs.push(i.toString())\r\n}\r\n\r\nexport class Demo extends React.Component<{}, {\r\n    width: number,\r\n    height: number,\r\n    focusOffset: number\r\n}> {\r\n    render() {\r\n        const {width, height, focusOffset} = this.state\r\n\r\n        return <InfiniteList Segment={SegmentExample}\r\n                             {...{width, height, segmentIDs, focusOffset}}\r\n                             onScroll={this.onScroll}/>\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => {\r\n            const width = window.innerWidth\r\n            const height = window.innerHeight\r\n            this.setState({width, height})\r\n        })\r\n    }\r\n\r\n    onScroll = (scroll: px) => {\r\n        if (Math.abs(scroll) < 10) {\r\n            this.setState({focusOffset: 0})\r\n        } else {\r\n            this.setState({focusOffset: this.state.height / 3})\r\n        }\r\n    }\r\n\r\n    constructor(props: {}) {\r\n        super(props)\r\n        this.state = {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            focusOffset: 0\r\n        }\r\n    }\r\n}\r\n\r\nconst root = document.getElementById('root')!\r\nReactDOM.render(\r\n    <ErrorBoundary FallbackComponent={({componentStack, error}) =>\r\n        <pre style={{width: window.innerWidth, wordBreak: 'break-all'}}>\r\n            {JSON.stringify(componentStack, null, 4)}\r\n            {JSON.stringify(error, null, 4)}\r\n        </pre>\r\n    }>\r\n        <Demo/>\r\n    </ErrorBoundary>,\r\n    root\r\n)\r\n\r\n"]}