{"version":3,"sources":["..\\..\\..\\typecheck\\existing.ts","..\\..\\..\\utils\\cloneFastBinaryIndexedTree.ts","..\\..\\..\\utils\\ensure.ts","..\\..\\..\\utils\\expandFastBinaryIndexedTree.ts","..\\..\\..\\utils\\nothing.ts","..\\..\\..\\layouts\\ListLayoutImpl.ts","..\\..\\..\\rxjs\\applyMiddleware.ts","..\\..\\..\\rxjs\\createPublishers.ts","..\\..\\..\\rxjs\\createSubjects.ts","..\\..\\..\\rxjs\\createDispatcher.ts","..\\..\\..\\rxjs\\Pipe.ts","..\\..\\..\\typecheck\\isFalse.ts","..\\..\\..\\typecheck\\isTrue.ts","..\\..\\..\\typecheck\\isFunction.ts","..\\..\\..\\utils\\assume.ts","..\\..\\..\\utils\\publishAll.ts","..\\..\\..\\utils\\Pulse.ts","..\\..\\..\\utils\\statics.ts","..\\..\\..\\utils\\forDuration.ts","..\\..\\..\\utils\\nextAnimationFrame.ts","..\\..\\..\\utils\\uniqueID.ts","..\\..\\..\\view\\calcOutline.ts","..\\..\\..\\view\\intermediateTransform.ts","..\\..\\..\\view\\tweenHere.ts","..\\src\\calcFocusOffset.ts","..\\src\\calcSegments.ts","..\\..\\..\\react\\measure\\measuring.tsx","..\\src\\MeasuredSegment.tsx","..\\src\\projectScroll.ts","..\\InfiniteList.tsx","..\\..\\..\\utils\\getRandomIntInclusive.ts","SegmentExample.tsx","InfiniteList.tsx"],"names":[],"mappings":"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K,CDAJ,SGAQ,AFAF,CHkKO,AElKZ,ECAM,CHkKP,CElKK,CCAK,CDAH,GGA0B,AFApB,CDAF,GGA0C,AFApC,CDAD,EFkKH,AC9J5B,CD8JgC,GKlKoC,CHArC,IEHe,EFGT,CAAC,EGAwC,AFAvC,EEA6B,AFA3B,CEAqC,CAAA,AHAlC,CAAC,ECAF,EDAM,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CAAA;AECjE,AFAA,CAAC,OFkKe,YAAO,GAAP,GIjKZ,IJiKmB,CAA2B,KIjKhB;AFLlC,AIFA,IFSI,ADJgB,CAAwB,CAAC,EHoK7B,AIhKN,QAAQ,CETM,EFSH,GJgKI,AMzKS,GNyKlB,SAAS,CAAiC,SEnKzD,MEGkC,CAAc,UAAU,CAAC,CAAA;IACxD,AETA,INyKqB,CGpKhB,ECIE,AETA,IHKI,CAAC,AGLA,CFSC,CAAC,GETG,GFSG,CJgKa,AI/J7B,CDLS,AGLS,CFUjB,AEViB,CNyKD,EGpKJ,EAAE,ECKP,EAAE,ADLS,IHoKU,AGpKL,CHoK0B,MGpK1B,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,ICKlB,ADLsB,CCKR,ADLS,EAAzB,CAAyB,CAAQ,CAAA,GCKT,CAAC,EAAC,EAClD,iCAAe,CAAc,QAAQ,EAAE,UAAU,CAAC,CACrD,CAAA;AACL,ADPA,AGLA,ACFA,CHcC,ADPA,AGLA,ONyKwB,QO3KF,KAAU,MP2KM,GAAd,cAAc,CAAuB;AIrK9D,ADHA,AGHA,IN4KO,AO3KH,CP2KI,MO3KG,KAAK,KAAK,IAAI,CDCxB,ACDwB,cJMxB,ICOA;AIdD,ADEA,CAAC,GPOG,gBQTuB,CAAM,KRSlB,gCAAI;AOTnB,ICCI,OAAO,ERQP,KQRc,CAAC,KAAK,ADCvB,GPO+B,OAAO,AQRL,CAAA,GRQS,CAAC,OAAO,CAAC,MAAM,CAAA,CAAC,CAAC;AQP5D,CAAC;AAFD,ACAA,gCDEC,kBCFgD;AACjD,ACDA,OVS4D,aUTf,KAAQ,EAAE,QAAoC,mBDCzC;AAClD,ITSI,AUVA,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CVUV,AUVW,OAAO,CAAC,GDCD,OCDC,GAAG,IAAI,OAAA,OVUf,CUVuB,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAzB,CAAyB,CAAC,CAAA;ACAxD,AFKX,ACJA,CAAC,OCDU,KXUP,AWVY,GAAU,IAAI,CAAA,MXUK,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA,CAAC,CAAC;AUXzF,IDM0B,gBAA+D,YCJxF;AEFD,SHM0B,UAA+D,EAA/D,qBAA+D,EAA/D,IAA+D,EGNxC;AACjD,OZUyF,CSL/D,2BAA+D,EGLxD;AAEjC,IZUW,aYVa,KAAoB,cZU1B,GAAd,UAAe,EAAc;ISN7B,AGHA,IZUI,ASPE,GGHC,CZUC,ASPE,GAAG,CTOD,AYVA,CZUC,AYVA,IZUI,ASPE,CAAC,CGHD,CAAC,EZUE,CAAC,CSPG,CTOD,ASPE,KGHN,CHGY,EGHT,CHGY,CAAC,AGHX,CHGY,CAAA,EGHR,IAAK,OAAA,GAAG,GAAG,IAAI,EAAV,CAAU,EAAE,CAAC,CAAC,CAAA;AACrD,CAAC,GHGG,IAAM,ITMqB,MSNX,CTMkB,ESNf,MAAM,CAAC,KAAK,CAAC,CAAC,CTMQ,CAAA,ASNN,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AGLzD,IHMI,IAAI,CTKuC,ASLtC,iBGJR,MHIkB,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,sBAAW,CAAC,EAAE;AGFpF,QZQQ,ASLA,ITKM,GSLC,ETKI,GAAG,CYRM,GZQF,CAAC,CYRqB,MHG1B,CAAA,CTKc,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;Aaf5C,IDQI,CHGC,GTKG,AYRA,IZQI,CYRC,CAAC,MAAM,CCRc,IDQT,CAAC,GCRoB,KbgBvB,CAAC,KAAK,CAAC,EAAE;ISJ5B,IGHI,GHGG,CTIuB,GSJnB,AGHA,IZO0B,aYPnB,CAAA,GZO0B,CAAA,USJ7B,UAAU,GAAC;AAC9B,AKbA,CLaC,GGHG,KZM8C,EYNvC,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,MAAM,CAAA;AHJxC,AGKA,AGXA,CHWC,OZMO,IAAM,AahBV,MbgBgB,GAAG,GSJtB,CTI0B,CAAC,QahBjB,IAAI,EbgB2B,CAAC,IAAI,AahBzB,CbgB0B,AahBnB,CEDkB,IfiBM,CAAC,CAAA,GahBxB,IAAI,IAAK,OAAA,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,EAA1B,CAA0B,CAAC,EAAA;ADMlE,AGNA,ACDA,QhBkBQ,IAAM,MAAM,AgBlBF,GhBkBK,IAAI,CAAC,QYP3B,MZOyC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAA;AYL5D,IGXI,IfiBI,GejBG,CDDP,GdkBW,AejBA,CAAC,CfiBA,EAAE,GejBI,CfiBJ,CejBM,CfiBJ,AejBK,CHWQ,IZMR,CYN4B,EGXpB,CDDtB,ACCuB,EAAE,CfiBX,AejBY,CDDtB,ACCuB,CfiBX,MAAM,AclBX,CAAC,CCCwB,CAAC,CAAC,CAAC,GfiBjB,EAAE,CclBZ,KdkBkB,EclBX,IAAI,EdkBO,EAAC,CAAA,EclBR,qBAAqB,CAAC,OAAO,CAAC,EAA9B,CAA8B,CAAiB,EAAC;AEClF,CHAC,GbkBG,AYNA,CZMC,GYNK,EGXA,CAAC,IHWM,AGXF,GHWK,CGXD,EAAE,ACDO,CDCN,CAAC,CCDiB,KJYT,CAAC,AGXF,EAAE,CAAC,EHWI,CAAC,CAAA,IGXG,CAAC,EAAE,CAAC,CAAC;AFH9C,AEIA,CAAC,GfkBU,AYPP,AIZA,IJYI,AIZE,IAAI,CJYD,CAAC,CIZG,GAAG,CAAC,CJYD,KAAK,CAAC,IAAI,ICb7B,KboBoB,CgBnBqB,EhBmBtC,AgBnBwC,CAAA,ShBmBtB,AYPmB,CAAC,IZOP,GYPc,CAAC;AGdlD,CDCC,GEGU,IhBkBH,AYPA,AIXG,IhBkBC,GYPG,CZOC,CAAC,IAAI,KAAK,AgBlBV,ChBkBW,CenB1B,ACCiB,ChBkBW,GYPP,CAAA,eIXE,CAAQ;AFLhC,IFiBI,AIXA,IJWM,AIXA,CAAC,GhBiBoB,AgBjBjB,EJWE,EIXE,CJWC,AIXA,EhBiBmB,EgBjBf,CJWC,AIXD,CJWE,IAAI,CAAC,QZMe,CAAA,CYNd,CAAC,EAAE,CAAC,IAAK,EEfvC,KFeuC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,EAA7C,CAA6C,CAAC,CAAA;IAClF,AIXA,IAAM,ChBgBqC,AgBhBpC,EJWA,CIXG,IAAI,CJWD,AIXE,CJWD,CAAC,CAAC,AIXE,CJWF,AIXE;AJYtB,CAAC,GIVG,IhBeI,GgBfG,ChBeG,CgBfF,ChBeI,AgBfH,GhBeM,AgBfN,EAAE,CAAC,ChBeO,CAAC,CgBfR,EAAE,IhBea,CAAC,AgBfT,KhBec,CAAC,CAAA,AgBff,EAAE,MAAM,QAAA,EAAC,CAAA;AJIhC,AIHA,CAAC,OhBeO,IAAI,sBAAW,CAAC,EAAE,CAAC,EAAE,IYN5B;AAED,AInBA,YhBuB+B,OAAO,IYJR,KZIiB,AYJG,CZIH,KgBf9C;IJYG,IAAM,CZGuC,MYHhC,GAAG,WAAW,CAAC,KAAK,CAAC,CAAA;AKtBtC,ILuBI,IZGI,AYHA,IZGM,CYHD,CAAC,IZGM,EYHA,CZGG,IAAI,AYHF,CZGG,AYHF,IAAI,UZGY,CAAC,IAAI,CAAC,KAAK,CAAC,AYHb,CZGa,AYHZ,OAAO,CAAC,6FKvBD;AACjD,QjB0BQ,AYHA,IZGM,GYHC,GZGK,GAAG,IAAI,CAAC,MYHN,CAAA,OZGoB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAA,uGiB1BH;AACzD,ILuBI,IZGI,GYHG,IZGI,EAAC,EAAE,GYHI,CZGJ,AYHK,EZGH,GYHQ,CAAC,CZGJ,EYHO,CAAC,IZGR,EAAE,IYHM,EZGA,CYHG,IAAI,GZGP,EAAE,EYHK,IZGC,AYHG,CAAC,GAAG,CAAC,GZGR,AYHW,EZGV,CAAA,AYHa,OAAO,CAAC,EAAvB,CAAuB,CAAC,CAAC,CAAA,4EKvBR;ALwBzD,AKtBA,ACJA,CN0BC,GZGG,CAAC,0BiBzBiC,IAAa,EAAE,EAAW,uHCJX;ANqBrD,AMpBA,ACDA,InB+BW,AiB1BP,IAAM,QAAQ,GAAG,UAAC,IAAa,KLqBlC,MZKyB,GAAtB,CmB/BwC,SnB+BjB,IAAY,EAAE,EAAU,+FkB9BC;AACpD,ACAA,QnB8BQ,AiB1BA,IjB0BI,GiB1BG,CjB0BC,CAAC,IAAI,ImB9BW,CnB8BN,CAAC,EAAE,OmB9ByB,EAAE,cAAkB,EDAxB;AAClD,AEDA,IDCI,ACDE,ODCK,CnB6BmB,AiBzBlB,AGLE,CHKD,EAAE,AGLE,EAAE,CAAA,CpB8BkB,AiBzBlB,CAAC,CjByBmB,AiBzBlB,CjByBkB,EiBzBf,EEJP,CAAK,CFIM,CAAC,KAAK,GAAG,CEJJ,EFIO,AEJL,YDAa,ECAC,GAAG,CAAC,CAAC,CAAA;ADCtD,ACAA,ACAA,CDAC,QnB4BuC,GiBxB5B,CAAC,EAAE,IAAI,CAAC,CAAC,CGJQ,EHIL,IAAI,AGJW,CHIV,CGJY,KHIN,EGJiB,CHId,CGHT,EHGY,IGHF,EAAE,MAAkB,aFDG;AAC9D,ACHA,ICII,IpB2BI,AoB3BE,CHGD,CAAA,EjBwBK,CoB3BC,GAAG,IpB2BI,AoB3BA,CAAC,EpB2BE,CoB3BC,CAClB,IAAI,CAAC,GAAG,CACJ,IpByBmB,CAAmB,CoBzBhC,EDJjB,CnB6BqD,AoBzBjC,CpByBkC,EkB5Bb,GEGf,EACf,GpBwBqD,CAAC,EoBxBhD,EpBwBoD,CAAC,AoBxBlD,EpBwBoD,IAAI,CAAC,AoBxBlD,CACnB,EACD,CAAC,CACJ,CAAA,IpBqBmF,CAAC,CAAC,CAAE,CAAC,CAAA;AkB3B7F,IDII,AGGA,CHHC,CAAA,EjBwBG,AoBrBE,IpBqBI,AoBrBA,GAAG,GpBqBG,CoBrBC,CAAC,CpBqBC,EoBrBE,CACjB,IAAI,CAAC,GAAG,CACJ,GpBmBiB,CAAmB,EoBnB9B,EpBmBkC,CAAC,AoBnBhC,GFToB,GESd,GAAG,CpBmBiC,CAAC,EAAE,CAAC,CoBnB/B,CpBmBiC,CoBlBzD,GpBkB6D,CAAC,EoBlBxD,GAAG,KpBkB+D,CAAC,AoBlB1D,GAAG,CpBkB2D,CAAC,IAAI,CoBlBzD,CAC5B,CpBiBwF,CAAC,AoBhB1F,CpBgB4F,CAAC,CAAA,GoBhBvF,CAAC,WAAW,CACrB,CAAA;AFZL,IDII,AGUA,IpBcI,AiBxBE,GGUC,CpBcG,KoBdG,CHVG,AGUF,CpBcG,EiBxBE,CjBwB0B,EAAE,CAAA,IiBxBpB,CAAC,IAAI,AGUF,CHVG,AGUF,CHVE,IGUG,EAAE,IAAI,CAAC,CAAA,iBFd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CAAmB,GuBlDO,CvBkDH,CAAC,AuBlDI,GFChB,CEDgC,EAAE,EAAc,GvBkDzB,CAAC,AsBjDf,ItBiDmB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAE,CAAC,CAAA;AqB/C9F,ACCA,ICHI,IvBkDI,AuBlDE,IvBkDI,AuBlDA,GAAG,GvBkDG,CuBlDC,CLuBjB,AKvBkB,CvBkDC,QkB3BO,CAAA,CKvBG,CAAC,IvBkDL,CAAmB,CuBlDR,GvBkDY,AuBlDT,CvBkDU,UuBlDC,CvBkDU,AuBlDT,CvBkDU,AuBlDV,EvBkDY,CAAC,EAAE,GqBhDN,CrBgDU,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAE,CAAC,CAAA;AqB9CtG,ICDqC,ACFjC,IvBkDI,AuBlDE,IAAI,GvBkDC,AuBlDE,IvBkDE,AqB9Cf,CrB8CgB,AkB3BhB,IAAI,IGnBQ,EEJO,CAAC,CLuBR,CAAC,ElB2BkB,AuBlDP,CvBkDQ,AkB3BhB,CAAC,AKvBS,OvBkDc,AkB3BhB,ClB2BiB,AkB3BhB,EIrBkC,ACFjC,GvBkDoB,AkB3BhB,CKvBA,CvBkDkB,GuBlDd,GvBkDoB,CAAC,CkB3Bf,EKvBN,EvBkD0B,AuBlDxB,CvBkDyB,AuBlDxB,CvBkDwB,MuBlDjB,CAAC,IAAI,CAAC,EAAE,CAAC,EAAnB,CAAmB,CAAC,CAAA;IvBmDtD,AqB7CA,ACWA,AChBA,CvBkDC,GuBlDG,gBLuBA,KIPQ,CChBG,CAAC,GDgBQ,CChBJ,CAAC,IAAI,MLuBf,gBKvB0B,CAAC,IAAI,CAAC;IvBoDnC,IqB/CW,ACWlB,ACfI,OAAO,KLuBX,AIPI,CChBa,CAAA,KLuBV,CAAC,KAAK,ClB4BD,AkB5BE,GlB4Bd,CsBnCU,CDZsD,ICYjD,CJOS,AIPR,GtBmCH,AkB5Bc,MIL1B,UtBiCiC,OkB3BpB,QAAQ,wBAAmB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,8BACzC,QAAQ,wBAAmB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,YAC1D,CAAA;IKzBD,IvBmDU,AqB1BN,ACnBI,ACNF,IvBmDI,QkBzBV,ClByBkF,AqB1BlE,ErB0BL,GqB1BqC,ACnB5B,CJoBb,CAAC,CIpBe,ACNI,GAAG,CL0BjB,CAAC,IK1BsB,CDMZ,ECNe,EvBmDrB,AkBzBK,ElByBH,AsB7Cc,CJoBR,MAAM,AK1BkB,CL0BlB,EK1BqB,IAAI,CAAC,MAAM,CAAA,EvBmDnC,EAAE,8BAAY,EAAE,gCAAa,EAAE,kCAAc,CAAQ;IuBlDlF,IvBoDI,AuBpDE,IFwBF,AClBA,IAAM,EAAE,EJqBZ,CIrBe,GtB8CK,AqB3BZ,ECnBW,CtB8CI,AsB9CH,ECNO,GDMF,ACNK,CDMJ,ACNK,EDMH,CAAA,KJqBtB,ClByBuB,AqB3Bf,CrB2BgB,IqB3BX,CAAC,MEzBgC,GFuC/C,AEvCkD,EvBoDT,EAAE,AuBpDW,CAAC,IL2B3C,CAAC,CK3BgD,CAAC,GAAG,EvBoDT,CAAC,AkBzBpC,ClByBoC,AkBzBnC,AK3B+C,CAAC,CL2BhD,KK3BsD,CAAA;ACVrF,IDWI,IvBoDI,GuBpDG,CvBoDG,AqB1BF,ACnBJ,GCPO,CDOH,ACPI,CF0BA,CAAC,IE1BK,GAAG,CF0BA,AE1BC,CvBoDG,AwB/DG,EHqCJ,CrB0BI,GqB1BA,CrB0BI,CsB7ChB,CAAC,CtB6CkB,AuBpDF,CvBoDG,EuBpDA,CDOf,CAAC,KAAK,CAAC,EtB6CoB,CAAC,CAAA,SuBpDQ,CDOf,ACPgB,CDOf,ACPe,EDOb,EDmBH,CAC9B,UAAC,OAA8B,EAAE,QAAwB;AGrCzE,ADWA,CAAC,OvBoDO,IAAM,IqBzBM,ACpBR,IDoBc,AHFtB,CIlBY,CAAC,IDoBe,CCpBV,CAAC,CtB6CQ,AqBzBI,AHFJ,AMpCD,CNoCC,ElB2BG,IqBzBQ,CAAC,CAAC,CAAC,CAAC,ECpBT,CAAC,EAAC,EAAE,IDoBgB,ACpBhB,CDoBiB,CCpBf,KDoBqB,CAAA,ACpBf,QAAA,EAAC,CAAC,CAAA,gBtB6CS,CAAC,cAAc,CAAC,CAAA;AwB7D5E,ADCA,QvB8DQ,KsB9CC,EtB8CM,CqB1BK,GrB0BD,CqB1BO,AHFtB,IAAI,CGEuB,GAAG,IHFlB,ClB4BiB,AkB5BhB,ClB6BL,CqB3B6B,CAAC,AHFtB,CGEuB,AHFtB,CGEuB,AE5B3C,CF4B4C,KHFjB,CAAC,KlB6BD,AqB3B4B,AHFtB,CGEuB,CrB4B7C,IqB5BkD,AGrCT,CHqCS,ErB4B3C,CkB9ByB,ClB+BhC,SAAS,EACT,eAAe,EACf,iBAAiB,CACpB,CAAA;AwBnET,IxBoEI,CAAC,GsBpDD,CAAC,CAAA,MDoBe,IAAI,IHFhB,eGEwB,CAAC,KAAI,CAAC,AHFxB,KGE6B,CAAC,CGpCK,aHoCS,CAAC,EAAE;AGnC7D,IxBqEW,IsBlDH,KAAI,CAAC,MDiBW,AHFpB,CIfgB,GAAG,CDiBK,CAAC,CHFlB,CAAC,GGEsB,CAAC,CrBiCpB,AkBnCE,CAAC,ElBmCd,QkBnCwB,AMnBL,CFIS,CtBkDhB,AqBjCiC,ACjBhB,CDiBiB,AHFnB,IIfO,CAAC,CDiBiB,AHFnB,CGEoB,AHFpB,CGEoB,CrBiCJ,GsBlDP,CAAC,CAAA;AEH/C,QxBsDc,IAAA,KqBjCO,GHFjB,ClBmC8C,EAAnC,KkBnCH,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA,UlBmCA,EAAE,OwBtD8B,uBxBsDlB,CAAQ;AyB5ElD,ADuBA,IFGI,CAAC,GtBoDG,IAAM,IqBlCM,IAAI,IrBkCE,GAAG,IAAI,GAAG,EAAE,CAAA,EqBlCN,CAAC,KAAI,CAAC,IGrBQ,CHqBH,CAAC,aAAa,CAAC,EAAE,2BI5CmC;ADwB/F,IFfI,ItBsEI,UAAU,CAAC,CqBlCK,KAAI,CrBkCF,AqBlCG,CrBkCF,IqBlCO,CAAC,ICpCzB,CtBsEkB,EAAE,AsBtE1B,EtBsE4B,IqBlCgB,CrBkCX,AqBlCY,IrBkCP,CqBlCY,CAAC,CAAA,IrBkCb,AwBvDA,YxBuDY,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,EAA3B,CAA2B,CAAC,CAAA;AyB7EtE,ADwBA,QxBuDQ,AsBvEM,ItBuEA,AsBvEA,KDoCO,UrBmCQ,AsBvES,EAAvB,CtBuEiB,CyB/EM,GzB+EF,AyB/Ea,EAAE,CzB+EZ,EAAE,AyB/EqB,AHQ7C,CtBuEwB,CsBvEtB,gBAAK,CAAc,KEgBqB;AAC3D,ICxBI,GAAG,CzB+EC,AsBvEO,EGRL,EzB+EI,AqBnCE,ACpCD,CDoCE,CACJ,AI7CC,CJ6CD,AI7CE,IAAI,CAAC,GAAG,CAAC,CAAC,IzB+EM,GAAG,EsBvEZ,CAAQ,CtBuEQ,4BwBvDsB,MxBuDD,CAAC;AwBtD5D,AE5BA,CR0CC,GOtCG,GAAG,CHQC,EGRE,EzB+EE,EyB/EE,CAAC,AHQA,KGRK,CAAC,GAAG,CAAC,CAAC,EzB+EE,EAAE,KsBvEd,KEgBqB,AE5BI,EJYlB,CtBuEoB,GsBvEnB,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,GAAG,CAAA;AJHlF,AMqBA,AE7BA,IDII,AHQA,CAAC,GDoCG,CAAC,EI5CE,CzB+EC,GyB/EG,CAAC,EzB+EE,EAAE,CyB/EC,CAAC,IAAI,CAAC,ECJI,C1BmFD,AkB1C7B,ClB0C8B,EyB/EE,EAAE,EzB+EE,CyB/EC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,ADyBJ,CCzBK,GAAG,GAAG,CAAC,CAAC,uDAAuD;AACrH,APsCA,AMbA,AG/BA,ADGA,CDGC,GPsCK,AIfN,IDhBQ,CrBwEC,CAAC,CAAA,CkBzCI,GAA8B,IAAI,OAAO,AIftD,EDhBa,AH+B2C,CAAA,AS5C1B,ENavB,iBKVoC,GF4BI;AC7BhD,AD8BA,AFHA,AK5BA,ADGA,CJIA,AAqBC,CArBoC,KAAK,CtB8ElC,AsB9EmC,IDM/B,MrBwEM,CAAC,EsB9EqC,GAqBvD,EtByDyB,CAAC,S2BrFU,C3BqFV,EAAE,UwBtDiB,KC1B7C,UJQ+D,cKVU;AF6B1E,AFzBa,AKNb,ADKA,Y1BgFY,AqB1EJ,IrB0EU,aAAa,AqB1DtB,GrB0DyB,UsB/EN,EtB+EkB,CAAC,AwBtDN,GxBsDS,CAAC,EAAE,CAAC,CAAA,Q2BrFN;AHgChD,AFCA,AK/BA,IL+BM,AI5B8B,OJ4BvB,CtBqDD,AqBxEA,ECmBI,EtBqDA,AqBxEE,KAAK,GAAe,GCmBR,CAAC,EDnBa,CAAC,MAAM,CrBwExB,AqBvEX,CrBuEY,CqBvEV,EACF,ECiB+B,CEDN,AFCO,CDjB5B,AKXwD,CLWvD,CMduB,I3BoFH,AqBtEf,CrBsEgB,CqBrE1B,EAAC,GAAG,EAAE,UAAC,EAAO,IAAK,OAAA,KAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAlB,CAAkB,EAAC,CAClC,CAAA;AGepB,AG9BA,IL+BI,AIKA,IJLI,EAAE,EDfE,IrBoEI,GqBpEG,IrBoEG,CqBpEE,CAAC,GKoBT,KAAuB,QLpBE,CAAC,CAAA,IGcC,IG9BI;AH+B/C,AG7BA,IAAM,IL8BE,AIIJ,I1BiDQ,AqBpEA,EMfI,CL8BD,EAAE,AK9BqB,ENenB,AMfqB,CAAA,ADmChC,ILpBgB,ACeA,CDfC,ErBoEE,CAAC,GAAG,CAAC,EAAE,EAAE,E0BhDtB,ELpB0B,CAAC,CAAA,CKoBtB,CAAC,I1BgD4B,CAAC,GAAG,CAAC,AwBtDJ,AEsB5C,E1BgCkD,CAAC,CAAC,CAAA;AwBrDzD,AG7BA,KAAK,GL8BG,AIKA,CCnCC,CAAC,E3BmFE,AqBnEA,AKmBE,CCnCD,CAAC,CL8BC,CK9BC,ADmCE,CJLD,AK9BA,ENgBE,AKmBE,CCnCD,INgBI,CAAC,CCcC,AK9BA,EAAE,C3BmFC,A2BnFA,C3BmFC,C2BnFC,EAAE,CDmCN,CAAC,GLnBU,CACtB,ErBkEyB,CAAC,CwBtDH,CEMF,CAAC,GLlBb,EACT,AKiB2B,CAAC,EAAE,C1BgDQ,A0BhDP,C1BgDQ,AqBjElC,CKiB4B,CLhBjC,CrBgE0C,CAAC,C0BhDN,C1BgDQ,AqBhEzC,AKgBkC,C1BgDS,AqBhE1C,ErBgE4C,GqBhEvC,AKgBkC,CLhBjC,CKgBmC,GAAG,GAAG,CLhBjC,AKgBkC,C1BgDS,AqB/DjE,AKeyD,C1BgDS,AqB/DlE,AKe0D,C1BgDQ,K0BhDF,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;AFLxF,IG7BI,I3BmFI,AqB/DA,ACUA,AIKA,C1BgDC,AqB/DA,CrB+DC,CAAA,GsBrDI,AK9BA,CAAC,CL8BC,CIKC,CAAC,CCnCC,CAAC,CAAC,CL8BC,AK9BA,CDmCC,CAAC,EAAE,CAAC,GCnCG,ADmCA,ECnCE,CAAC,CAAA,ADmCC,CAAA,YFNgC;AAClE,CG7BC,O3BoFO,AqB3CA,ACXA,AIMA,IAAI,G1BgDG,E0BhDS,CJNN,AIMM,C1BgDL,CsBtDC,QAAQ,KtBsDK,CACrB,QqB5CgB,GAApB,ErB4CiB,GwBxDqB,gBxByD9B,UAAU,GACd,YAAY,EACZ,eAAe,EACf,iBAAiB,CACpB,CAAA;AwB5DT,AG5BA,I3ByFI,CAAC,AsB5DA,GIOG,ILII,AKJA,ILII,AKJA,CLIC,IKJI,ILII,CAAC,CKJC,EAAE,OLIO,EAAE,CAAA,kBGZe;AACrD,CFCC,CAAC,CAAC,CtB6DQ,A2B3Fe,INyClB,CAAC,ACXA,EAAE,CAAC,AIOA,IAAI,GJPG,CAAA,AIOC,GAAG,SAAS,CAAC,E1BsDhB,C2BvFf,E3BuFE,A0BtDkC,CAAC,EAAE,CAAC,IAAI,E1BsD5B,GwB9D6B,KEQS,CAAC,EAAC,KAAK,C1BsDD,C0BtDG,6CAAqB,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC,CAAC,CAAA;AFP/F,IGDI,I3B+DU,AqBjDE,IrBiDF,A0BtDF,MCTI,G3B+D+C,A0BtD1C,CAAC,C1BsDP,A2B/DU,IDSE,CAAC,EAAE,CLKL,AKLM,GLKvB,AKL0B,IAAI,CAAA,KLKZ,GrBiDF,AqBjDiC,ErBiD/B,QwB9D4B,YxB8DrB,EAAE,kCAAc,EAAE,cAAI,CAAQ;AwB7D/D,QxB+DQ,A2BjEJ,INeQ,AKLA,ILKI,CKLA,CAAC,ECTT,GDSc,E1BuDG,CAAC,A0BvDD,EAAC,IAAI,C1BuDG,CAAC,CqBlDV,CAAC,EMdX,ADSgB,ELKD,AKLG,CLKF,EMdX,C3BgEe,A2BhEd,ADSgB,E1BuDA,IqBlDG,AKLH,CLKI,CKLH,CLKK,AGbO,AGK5C,ADGgC;AFNrC,QGZI,CDmBK,G1BuDG,IAAI,AqBlDA,IAAI,CAAC,CMxBT,G3B0Ea,A2B1EV,C3B0EW,GAAG,AqBlDA,CrBkDC,AqBlDA,ErBkDE,CAAC,E2B1EjB,GHYwB,CHYD,CAAC,CMxBd,GNwBkB,CAAC,SAAS,CAAC,CAAA;AGVvD,YGbQ,CDkBO,G1BwDC,AqBlDA,AMxBJ,INwBQ,AMxBJ,CNwBK,AMxBJ,C3B0EK,E2B1EF,CAAC,C3B0EK,IqBlDI,CMxBH,CAAC,CNwBK,EMxBF,EAAE,EAAE,W3B0Ee,AqBlDV,CrBkDW,AqBlDX,ErBkDa,CAAC,CAAA;IwB7DpB,IxB8D1B,CAAC,CAAC,CAAA,C0BxDE,CLMC,GMxBD,ADkBM,KClBF,ADkBO,CClBN,EDkBS,MClBD,CAAC,CDkBQ,CClBP,ADkBQ,KAAK,CAAC,EAAE,CAAC,EFNmB,AGZzB,EAAE,CAAC,EAAC,CAAC,CAAA;IH4DvC,IxBgBI,IqBnDI,CMxBH,GNwBO,GKNG,OFyCH,KAAY,OHnCD,CAAC,GAAG,CAAC,EAAE,KKNc,e1ByDb,CAAC,cAAc,EAAE,a0BzDiB,CAAC,G1ByDD,A0BzDI,C1ByDH,C0BzDK,GAAG,CAAG,C1ByDL,A0BzDK,C1ByDJ,CAAA;QACrE,AwBjBJ,IxBiBQ,A0BzDA,C1ByDC,GqBnDG,CMzBD,G3B4EK,AwBhBZ,AEzCY,CAAC,ELMC,GKNI,CAAC,EAAE,CAAC,GAAG,KFyCnB,AEzCwB,CAAA,C1ByDX,GwBhBR,CAAC,GxBgBc,EAAK,IwBHlC,axBGmD,CAAC,CAAA;QACjD,AwBoEa,IxBpEP,A0BzDF,CLMC,GMzBD,CDmBI,CF6HS,AE7HR,GF6HyB,AGhJ1B,CAAC,CDmBK,C1ByDI,CwBoEoB,CE7HrB,C1ByDI,C0BzDH,ECnBD,C3B4EQ,A2B5EP,CDmBI,CCnBH,C3B4ES,CAAC,G0BzDP,EAAE,I1ByDc,A2B5ER,C3B4ES,A0BzDV,C1ByDU,A2B5EP,KAAI,CHgJc,AGhJb,ADmBR,EF6HuB,AE7HtB,CF6HsB,AE7HtB,ECnBY,CAAC,MAAM,GAAG,CAAC,EAAC,CAAC,CAAA;Q3B6EvD,AwBuEa,CEhIZ,GLMG,CMzBH,GNyBS,GAAG,GAAY,AG0HJ,GxBvEJ,AqBnDW,AG0HJ,CxBvEN,OAAO,CAAC,GqBnDc,KAAK,CAAC,CrBmDnB,EAAE,EAAE,IqBnDwB,CrBmDnB,IAAK,GwBuED,CAAU,GxBvET,UwBuEsB,CAAC,CxBvEX,AwBuEW,CxBvEV,GAAG,CAAC,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC,EAAlC,CAAkC,CAAC,CAAA;QAC5E,AwBuEa,AGnJjB,CAAC,CAAA,E3B4EO,CAAC,GqBnDG,CAAC,CAAC,EG0HS,ExBvEL,CwBuEQ,ExBvEL,CqBnDC,CAAC,UrBmDU,CAAA,AqBnDC,CAAC,GAAG,CAAC,eG0HG,CAAQ,WAAW,CAAC,CAAA;IEhI9D,CAAC,G1B2DG,AwBkIa,AG5Mb,KAAI,CAAC,C3B0EE,CqBpDC,CAAC,CAAC,CrBoDC,A2B1ED,C3B0EC,CqBpDE,CAAA,AMtBA,OH4Me,GAAmB,IAAI,iCAAe,CAAC,CAAC,CAAC,CAAA;IxBjIzE,A0B9GA,C1B8GC,GwBrBG,IH/BI,AMtBA,CHqDA,CAAC,EH/BG,CMtBC,EAAE,GHqDE,GAAG,AGrDC,CAAC,SNsBF,CAAC,AMtBW,GNsBR,CAAC,EAAE,IK1DV,GAAjB;I1BgHO,I0BhHP,IF0FQ,AGrDA,INsBI,EMtBE,ENsBE,AMtBA,CNsBC,AG+BA,EAAE,EElFlB,CC6BqB,CAAC,ENsBE,CAAC,CG+BC,CAAC,GxBsBf,EqBrDoB,CrBqDjC,AqBrDkC,AMtBA,GNsBG,CAAC,CAAA,EG+BG,CAAC,ExBsB5B,GwBtBiC,CAAC,KxBsBK;QAC3C,A0BhHN,I1BgHM,AwBtBF,AGrDA,ADrCA,CAAC,GL2DG,GG+BG,CH/BC,CrBqD0C,AqBrDzC,AG+BA,AE1FA,E1BgHN,A2B3EQ,CDrCC,CCqCC,CAAC,GHqDG,CH/BC,AG+BA,GH/BG,EK3DE,CL2DC,AK3DA,CL2DA,MG+BO,CAAC,GxBsBpB,EAAE,AwBtBuB,CAAC,6BxBsBZ,EAAE,kCAAc,CAAQ;QAEtD,C2B5EC,CAAA,EHqDG,AE1FA,CL2DC,GK3DG,C1BiHC,CAAC,EwBvBE,CE1FA,CF0FE,AE1FD,G1BiHI,CAAC,AwBvBA,CE1FA,CAAC,CF0FE,EAA2B,CE1FzB,I1BiHL,C0BjHU,I1BiHL,E0BjHW;QL4DlC,CAAC,AG+BA,CAAA,ExBuBU,IAAA,A0BjHH,OAAM,M1BiHD,EAAE,qBAAM,CAAS;I2B5ElC,CAAC,GNuBD,AGgCI,IxBuBI,AwBvBE,AE3FF,IAAM,EL2Db,AGgCe,EE3FE,CF2FC,EE3FE,C1BkHD,CAAC,GAAG,CAAC,EAAE,EAAE,A0BlHE,CAAC,EAAC,G1BkHE,CAAC,CAAA,A0BlHE,EAAE,SF2FP,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,AE3FR,CF2FS,AE3FR,CAAC,EAAE,EF2FU,AE3FR,CF2FS,AE3FR,EAAC,CAAC,CAAA,EF2FY,GAAG,CAAC,CAAC,CAAC,CAAA;IHhCxF,AMtDA,CNLA,AA2DC,CA3DiB,EG4Fd,GH5FmB,CrBmHf,AqBnHgB,AG4Fd,AE3FF,SAAS,CAAC,CF2FG,EH5FgB,AMK/B,C3B8GgB,AwBvBE,CxBuBD,A0BlHD,CL0DrB,AMtDD,ADJuB,KAAK,CAAC,EAAE,CAAC,C1BkHE,CAAC,C0BlHA,IAAI,CAAA,G1BkHK,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,CwBvBhB,CAAC,IxBuBqB,CAAC,AwBvBlB,CxBuBkB,AwBvBjB,KAAK,CAAC,WAAW,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;IH/BlF,IrBuDI,AqBvDA,AGgCA,AGvFM,C3B8GL,AqBvDA,CrBuDC,CAAA,CwBvBI,AGvFA,ADJF,KF2FO,AE3FH,CAAC,EF2FK,IHhCL,CAAC,CK3DO,CCI8B,ADJ7B,ECIX,ADJY,IAAI,CL2DJ,CAAC,AGgCA,CAAC,CHhCC,EK3DC,EF2FG,AE3FF,CF2FG,AE3FF,CAAA,ECIb,EHuFoB,AGvFlB,EHuFoB,UAAA,KAAK,CGvFnB,EAAE,CHuFqB,OAAA,MAAM,CAAC,OAAO,CAAC,KAAK,AGvF9B,CHuF+B,AGvFjB,EHuFJ,CAAqB,CAAC,CAAA;QxByBjE,AqBxDA,AGgCA,AGtFA,ADLA,CAAC,EAAE,CF2FG,GxBwBC,A2B9GA,GHsFK,CxBwBD,CAAA,CwBxBI,OHhCK,CAAC,GAAG,EAAE,CMtDlB,CHsFa,CAAK,MHhCgB,CAAC,CAAA,OGgCX,CAAC,GE3FT,CAAC,CF2Fa,EAAE,CE3FX,CCKT,CDLW,IAAI,CAAC,CAAC,CF2FG,AE3FH,KF2FQ,IAAI,IGtF5B,GHsF4B,IGtFrB,CHsF0B,CAAC,AGtFzB,MHsF+B,GAAG,WAAW,EAA1B,CAA0B,CAAC,EAAE,CAAC,CAAC,CAAA,EGtFpC,IACnB,EAAC,KAAK,OAAA,EAAE,MAAM,QAAA,EAAE,UAAU,YAAA,EAAE,WAAW,aAAA,EAAC,IAC5C,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAG,CAAA;I3B6GnD,A2B5GA,ADPA,C1BmHC,AqBxDA,AMpDA,ADPA,GF2FG,IAAM,QAAQ,GAAG,2BAAY,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;IxB0BpD,AqBxDd,AMpDA,ADPA,IF0FI,GH/BG,EG+BC,CH/BE,AG+BD,CH/BC,IG+BI,GAAG,EAAC,CxByBE,GAApB,EwBzBwB,MGnFP,E3B4GI,AwBzBG,CGnFxB,CHmF0B,KxByB6B,CwBzBvB,CxB0BX,E0BpHD,GAApB,EF0FgC,EAAE,IxB0BU,EACvB,EwB3BqB,KxB2B2B,KwB3B3B,EAAE,aAAa,EAAE,IAAI,EAAC,CAAA;AH9BpE,CAAC,OrBwDwB,A2B7GrB,ADNI,aAAa,CAAC,GCYjB,CDZqB,CAAC,QAAQ,CAAC,CAAA,C1BmHX,EAAA,mBAAuB;AqB7HhD,IGoGI,AEzFA,CFyFC,AEzFA,G1BmHoB,A2B7GjB,MAAM,CAAC,eNoDd,CMpD8B,C3B6GN,A2B7GO,E3B6GP,M2B7Ge,EAAE,M3B6G0B,GAAG,EAAE;IwBvF9D,AE1BP,I1BkHI,IAAM,A2B7GF,IAAM,K3B6GK,A2B7GA,G3B6GG,A2B7GA,I3B6GI,E2B7GE,C3B6GC,A2B7GA,E3B6GE,AwBxFlB,CxBwFkB,C0BlHzB,CF0BN,EE1BA,GCKuC,CAAA;Q3B8GnC,AwBxFM,AE1BN,IF0BM,AGrBF,G3B6GG,A0BlHA,C1BkHC,A2B7GE,MAAM,C3B6GD,CAAC,C2B7GG,MAAM,CAAC,E3B6GT,EAAE,EAAE,AwBxFwE,EAAtF,GxBwFmB,A2B7GW,CAAA,ADLzB,KAAK,EAAE,WF0BJ,EAAE,gCAAa,EAAE,0BAAU,EAAE,0BAAU,EAAE,8BAAY,CAAyB;QACvF,IxBwFF,AwBxFE,AGrBF,I3B6GI,A0BlHJ,CCKI,CAAC,GHqB4C,EAA9C,AE1BI,E1BkHM,A0BlHJ,C1BkHK,A2B7GD,CAAC,E3B6GG,A2B7GF,C3B6GG,EAAE,A0BlHJ,C1BkHK,C2B7GD,KHqBZ,EAAE,AGrBU,EAAE,MAAM,QHqBb,AGrBa,EHqBX,AGrBY,CAAC,CAAA,oBHqBL,EAAE,kCAAc,CAAQ;QAC9C,AGrBP,CAAC,CAAC,CAAA,CHqBK,IxBwFC,A0BlHJ,KAAK,C1BkHK,C0BlHH,G1BkHO,C0BlHH,CAAC,KAAK,CAAC,CF0BR,EAAE,EE1BW,W1BkHe,CAAC,EAAE,CAAC,CAAA,CwBxFzB,EAAE,qBAAM,CAAS;IGpB1C,CAAC,GHqBU,IxBwFH,AwBxFG,IE1BH,K1BkHS,CAAC,GAAG,CAAC,EAAE,EAAE,C0BlHH,EAAE,E1BkHM,CAAC,CAAA,AwBxFb,EAAE,CE1BW,oBF0BL,EAAE,mCAAa,CAAS;IGHvD,I3B4FQ,AwBvFA,CxBuFC,CAAC,CAAA,CwBvFI,GGLb,CDtBW,MF2BY,EE3BJ,CF2BO,CE3BL,YF2BkB,AE3BN;ACsBlC,CArCA,AAqCC,CArCyB,KAAK,C3BmIvB,A2BnIwB,I3BmIlB,AwBxFF,CAAC,CAAC,EE3BF,CChB6B,GAqCxC,KDrBoB,C1BmHO,C0BnHL,E1BmHQ,IAAI,K0BnHD,KF2Bf,GAAG,EAAE,mBxBwFgC,CAAC,SwBxFJ,EAClC,KAAK,EAAE,EAAC,MAAM,EAAE,mBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAC,GAAG;AG5CxE,Y3BoID,AwBvFA,CAAC,AE5BJ,CF4BK,MG7CG,Q3BoIW,EAAE,CwBvFT,CAAA,WxBuFsB;A2B7F3C,IAAM,IHQE,AGRE,GAAG,C3B8FD,AwBtFE,AE7BF,M1BmHM,C2B9FG,C3B8FD,A2B9FE,IHQI,GxBsFC,AwBtFE,CxBsFD,MAAM,A2B9FE,CAAC,MAAM,CAAE,CAAA,EDrB3B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAO;ACsBtC,QAAQ,C3B8FC,A2B9FA,C3B8FC,CAAA,CwBtFE,AE7BA,GCqBG,CACX,CHOa,OAAA,YGPZ,ODtBY,uBCsBC,IAAC,iBAAiB,EAAE,UAAC,EAAuB;Q3B+FtD,IAAM,AwBvFF,AGR4B,ADpBxB,IAAI,CAAC,CF4BH,EAAE,EE5BM,CAAC,C1BmHD,EwBvFA,CxBuFG,AwBvFF,AE5BI,I1BmHE,C0BnHG,E1BmHA,EAAE,CAAA,CwBvFA,AE5BI,QCoBY,EAAE,gBAAK;Q3BgGrD,A2B/FA,IHQI,GxBuFG,A2B/FP,C3B+FQ,A0BnHI,CAAC,CAAC,GF4BD,CE5BK,C1BmHH,AwBvFA,AE5BI,C1BmHH,I0BnHQ,CAAC,IAAI,C1BmHZ,GwBvFY,GxBuFN,EAAE,AwBvFS,CAAC,CxBuFR,A2B/FtB,KAAK,EAAE,EAAC,KAAK,EAAE,MAAM,CAAC,UAAU,EAAE,SAAS,EAAE,WAAW,EAAC;Y3BgG1D,A2B/FC,I3B+FG,AwBvFA,AGRC,ADpBG,C1BmHH,AwBvFA,AGRC,ADpBG,CF4BH,AE5BI,MF4BE,ExBuFE,A2B/FC,C3B+FA,A2B/FC,G3B+FE,CAAC,EAAE,CAAC,O2B/FQ,EAAE,IAAI,ADpBrB,ECoBuB,CAAC,CAAC,CDpBpB,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAC,EAAE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;YCqBxE,ADnBD,I1BkHI,AwBvFA,AGRC,CHQA,AGRC,CHQA,KxBuFI,G2B/FK,CAAC,KAAK,EHQD,AGRG,CHQF,GGRM,EAAE,CAAC,CAAC,CAC7B,ADpBG,CACH,CAAA,IF0BiC,QAAK;IGV5C,ADfJ,CCkBU,ADlBT,IF0BI,CAAA,ExBuFG,YAAY,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;I2B7FhC,ADER,IFKQ,IxBuFI,AwBvFE,YAAY,AGPjB,CDER,C1B4FyB,CAAC,AwBvFE,CGPhB,OAAE,CACK,CHMU,CxBuFQ,A2B5FlC,C3B4FmC,G2B5F/B,CHKgC,AGJvC,CAAA,I3B2F+C,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,MAAM,CAAC,CAAA;A0B5FlE,CAtDA,AAsDC,CAtDmC,KAAK,C1BmJjC,A0BnJkC,C1BmJjC,CAAC,CAAA,CwBvFE,KE5DuC,EF4DhC,CENlB,YFM+B;AE5DnB,Q1BqJL,OAAO,CwBxFC,CAAC,CAAC,CxBwFC,CwBxFA,QAAQ,EAAE,GxBwFI,CACrB,MwBzF2B,AE7DZ,EF6Da,KxByFf,mBACT,OAAO,GACX,SAAS,EA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","file":"9da1f22267b6c295272a7b7fd7c852e0.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\n\nexport function cloneFastBinaryIndexedTree(source: FastBinaryIndexedTree): FastBinaryIndexedTree {\n    const target = new FastBinaryIndexedTree({\n        defaultFrequency: source.defaultFrequency,\n        maxVal: source.maxVal\n    })\n\n    target['_tree'] = {...source['_tree']}\n    target['_countNeg'] = source['_countNeg']\n\n    return target\n}\n","import {notExisting} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: Maybe<A>, defaultValue: A): A {\n    return notExisting(maybe) || Number.isNaN(maybe) ? defaultValue : maybe\n}\n\n","import FastBinaryIndexedTree = require('fast-binary-indexed-tree')\n\nexport function expandFastBinaryIndexedTree(\n    source: FastBinaryIndexedTree,\n    increasedSize: number\n): void {\n    increasedSize = Math.round(increasedSize)\n    if (increasedSize <= 0)\n        return\n\n    const emptyTree = new FastBinaryIndexedTree({\n        maxVal: source.maxVal + increasedSize,\n        defaultFrequency: source.defaultFrequency\n    })\n\n    source['_maxVal'] = emptyTree['_maxVal']\n    source['_msb'] = emptyTree['_msb']\n}\n","export const nothing: nothing = null\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\nimport {notExisting} from '../typecheck/existing'\nimport {cloneFastBinaryIndexedTree} from '../utils/cloneFastBinaryIndexedTree'\nimport {ensure} from '../utils/ensure'\nimport {expandFastBinaryIndexedTree} from '../utils/expandFastBinaryIndexedTree'\nimport {nothing} from '../utils/nothing'\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout} from './ListLayout'\n\nexport class ListLayoutImpl implements ListLayout {\n    public get size(): number { return this.itemIDs.length }\n\n    public get totalHeight(): px { return this.prefixSumIndex.read(this.itemIDs.length) }\n\n    public getByID(id: ListItemID): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const index = this.idToIndex.get(id)\n        if (notExisting(index)) { return nothing }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndex(index: number): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const id = this.itemIDs[index]\n        if (notExisting(id)) { return undefined }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndexRange(from: number, to: number): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByIndex(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByIndex(to), this.getByIndex(this.size - 1)!)\n        const results: Array<ListItemPosition> = []\n        for (let i = fromItem.index; i <= toItem.index; i++) {\n            results.push(this.getByIndex(i)!)\n        }\n        return results\n    }\n\n    public getByOffset(position: px): Maybe<ListItemPosition> {\n        if (this.size === 0) { return undefined }\n        let bound = this.prefixSumIndex.upperBound(position)\n        const index = bound === this.size ? bound - 1 : bound\n        const id = this.itemIDs[index]\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByOffsetRange(from: px, to: px): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByOffset(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByOffset(to), this.getByIndex(this.size - 1)!)\n        return this.getByIndexRange(fromItem.index, toItem.index)\n    }\n\n    public clone(newDefaultHeight?: px): ListLayout {\n        const {itemIDs, idToIndex, knownHeights, defaultHeight, prefixSumIndex} = this\n\n        newDefaultHeight = ensure(newDefaultHeight, defaultHeight)\n        const newKnownHeights = new Map(knownHeights)\n        const newPrefixSumIndex = cloneFastBinaryIndexedTree(prefixSumIndex)\n\n        return new ListLayoutImpl(\n            newDefaultHeight,\n            itemIDs,\n            idToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    public join(newItemIDs: ReadonlyArray<ListItemID>): ListLayout {\n        const {defaultHeight, knownHeights} = this\n\n        const newIDToIndex = new Map()\n        newItemIDs.forEach((id, index) => newIDToIndex.set(id, index))\n\n        const newKnownHeights = new Map()\n        const newPrefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: defaultHeight,\n            maxVal: newItemIDs.length\n        })\n        newItemIDs.forEach(id => {\n            const currentHeight = knownHeights.get(id)\n            if (notExisting(currentHeight))\n                return\n            newKnownHeights.set(id, knownHeights.get(id))\n            newPrefixSumIndex.writeSingle(newIDToIndex.get(id)!, currentHeight)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            [...newItemIDs],\n            newIDToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    public append(additionalItemIDs: ReadonlyArray<ListItemID>): this {\n        const {idToIndex, itemIDs, prefixSumIndex, size} = this\n\n        additionalItemIDs.forEach(id => {\n            if (idToIndex.has(id))\n                throw new DuplicateListItemIDError(id)\n        })\n\n        expandFastBinaryIndexedTree(prefixSumIndex, additionalItemIDs.length)\n        this.itemIDs = [...itemIDs, ...additionalItemIDs]\n        const newIDToIndex = new Map(idToIndex)\n        additionalItemIDs.forEach((id, index) => newIDToIndex.set(id, index + size))\n        this.idToIndex = newIDToIndex\n\n        return this\n    }\n\n    public update(newShapes: ReadonlyArray<ListItemShape>): this {\n        const {idToIndex, knownHeights, prefixSumIndex} = this\n\n        newShapes.forEach(shape => {\n            const {id, height} = shape\n\n            knownHeights.set(id, height)\n            prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return this\n    }\n\n    public static create(itemIDs: ReadonlyArray<ListItemID>,\n                         defaultHeight: px = 100,\n                         heights: ReadonlyMap<ListItemID, px> = new Map()): ListLayout {\n        const idToIndex = new Map()\n        itemIDs.forEach((id, index) => {\n            if (idToIndex.has(id))\n                throw new DuplicateListItemIDError(id)\n            idToIndex.set(id, index)\n        })\n\n        const prefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: defaultHeight,\n            maxVal: itemIDs.length\n        })\n\n        const knownHeights = new Map()\n        heights.forEach((height, id) => {\n            if (!idToIndex.has(id))\n                return\n            knownHeights.set(id, height)\n            prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            [...itemIDs],\n            idToIndex,\n            knownHeights,\n            prefixSumIndex\n        )\n    }\n\n    // copy-on-write style data sharing\n    private constructor(\n        private defaultHeight: px,\n        private itemIDs: ReadonlyArray<ListItemID>,\n        private idToIndex: ReadonlyMap<ListItemID, number>,\n        private readonly knownHeights: Map<ListItemID, px>,\n        private readonly prefixSumIndex: FastBinaryIndexedTree\n    ) {}\n}\n\nexport class DuplicateListItemIDError extends Error {}\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        {publish: createPublishers<Required<T>>(subjects)},\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {Observable} from 'rxjs/Observable'\n\nexport type Pipe<A, B=A> = (source: Observable<A>) => Observable<B>\n\nexport type Pass<T> = Pipe<T, T>\nexport const Pass = <T>(observable: Observable<T>): Observable<T> => observable\n\n","export function isFalse(value: any): value is false {\n    return value === false\n}\n","export function isTrue(value: any): value is true {\n    return value === true\n}\n","export function isFunction(a: any): a is Function {\n    return typeof a === 'function'\n}\n","import {notExisting} from '../typecheck/existing'\nimport {isFunction} from '../typecheck/isFunction'\nimport {nothing} from './nothing'\n\nexport function assume<A, B>(a: Maybe<A>, func: (a: A) => B): Maybe<B>\nexport function assume<A, B, C>(a: Maybe<A>, b: Maybe<B>, func: (a: A, b: B) => C): Maybe<C>\nexport function assume<T>(...params: Array<Maybe<any> | ((...p: Array<Maybe<any>>) => T)>): Maybe<T> {\n    const func = params[params.length - 1]\n    const funcParams = params.slice(0, params.length - 1)\n    if (!isFunction(func) || funcParams.length < 1 || funcParams.some(notExisting)) {\n        return nothing\n    }\n    return func(...funcParams)\n}\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","export type Pulse = any\nexport let Pulse: Pulse = true\n","import {notExisting} from '../typecheck/existing'\nimport {nothing} from './nothing'\n\nexport function calcSum(array: Array<number>): number {\n    return array.reduce((acc, curr) => acc + curr, 0)\n}\n\nexport function calcAverage(array: Array<number>): Maybe<number> {\n    if (array.length === 0)\n        return nothing\n    return calcSum(array) / array.length\n}\n\nexport function nearestToAverage(array: Array<number>): Maybe<number> { // TODO better name\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    const sorted = array.sort((a, b) => Math.abs(a - average) - Math.abs(b - average))\n    return sorted[0]\n}\n\nexport function calcDeviation(array: Array<number>): Maybe<number> {\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    return calcAverage(array.map(num => Math.abs(num - average)))\n}\n\n\n","export async function forDuration(duration: ms): Promise<void> {\n    return new Promise<void>((then) => setTimeout(then, duration))\n}\n","export async function nextAnimationFrame(): Promise<undefined> {\n    return new Promise(resolve => requestAnimationFrame(resolve)) as Promise<any>;\n}\n","// https://stackoverflow.com/a/44078785/1815491\nexport function uniqueID() {\n    return Math.random().toString(36).substring(2)\n        + (new Date()).getTime().toString(36);\n}\n","// ignoring rotate\r\n\r\nexport function calcOutline(dom: Element): Outline {\r\n    const rect = dom.getBoundingClientRect()\r\n\r\n    const {width, height} = rect\r\n    const x = rect.left\r\n    const y = rect.top\r\n\r\n    return {x, y, width, height}\r\n}\r\n","import {scale} from 'transformation-matrix/scale'\nimport {transform} from 'transformation-matrix/transform'\nimport {translate} from 'transformation-matrix/translate'\n\nexport function intermediateTransform(from: Outline, to: Outline): Matrix {\n    const centerOf = (rect: Outline): Point => {\n        return {\n            x: rect.x + rect.width * 0.5,\n            y: rect.y + rect.height * 0.5\n        }\n    }\n    const fromMiddle = centerOf(from)\n    const toMiddle = centerOf(to)\n\n    const matrix = transform(\n        translate(toMiddle.x - fromMiddle.x, toMiddle.y - fromMiddle.y),\n        scale(to.width / from.width, to.height / from.height)\n    )\n\n    return matrix\n}\n\n","import {inverse} from 'transformation-matrix/inverse'\r\nimport {toCSS} from 'transformation-matrix/toString'\r\nimport {isFunction} from '../typecheck/isFunction'\r\nimport {forDuration} from '../utils/forDuration'\r\nimport {nextAnimationFrame} from '../utils/nextAnimationFrame'\r\nimport {uniqueID} from '../utils/uniqueID'\r\nimport {calcOutline} from './calcOutline'\r\nimport {intermediateTransform} from './intermediateTransform'\r\n\r\nexport async function tweenHere(\r\n    element: HTMLElement,\r\n    from: Outline | ((current: Outline, to: Outline) => Outline) = current => current,\r\n    duration: ms | ((from: Outline, target: Outline) => ms) = 200,\r\n    easing: Easing = [0, 0, 1, 1]\r\n): Promise<void> {\r\n    const tweeningID = uniqueID()\r\n    tweening.set(element, tweeningID)\r\n\r\n    const current = calcOutline(element)\r\n\r\n    const to = current // calcOutlineOrigin(element)\r\n    from = isFunction(from) ? from(current, to) : from\r\n\r\n    const transform = intermediateTransform(from, to)\r\n    duration = isFunction(duration) ? duration(from, to) : duration\r\n    element.style.transition = 'none'\r\n    element.style.transform = toCSS(inverse(transform))\r\n\r\n    await nextAnimationFrame()\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `\r\n        opacity ${duration}ms cubic-bezier(${easing.join(',')}),\r\n        transform ${duration}ms cubic-bezier(${easing.join(',')})\r\n    `\r\n    element.style.transform = 'none'\r\n\r\n    await forDuration(duration)\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `none`\r\n    tweening.delete(element)\r\n}\r\n\r\nconst tweening: WeakMap<Element, TweenID> = new WeakMap()\r\n\r\ntype TweenID = string\r\n\r\n","import {ensure} from '../../../utils/ensure'\n\nexport function calcFocusOffset(focusOffset: Maybe<px>, viewportHeight: px): px {\n    return ensure<px>(focusOffset, viewportHeight / 3)\n}\n","import {ListItemPosition, ListLayout} from '../../../layouts/ListLayout'\n\nconst pageSize = 10\n\nexport function calcSegments(scroll: px, preload: px,\n                             height: px, layout: ListLayout): Array<ListItemPosition> {\n    const floor = Math.max(\n        Math.min(\n            scroll - height,\n            scroll + preload\n        ),\n        0\n    )\n    const ceil = Math.min(\n        Math.max(\n            scroll + height + height,\n            scroll + height + preload\n        ),\n        layout.totalHeight\n    )\n\n    return layout.getByOffsetRange(floor, ceil)\n}\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {isString} from 'util';\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\n\nexport function measuring<C extends React.ComponentClass<any> | keyof React.ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                {ref: (it: any) => this.updateRef(it)}\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<C> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateRef(ref: Maybe<React.ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if (notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if (!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends React.ComponentClass<any> | keyof React.ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import sharedInstance from 'jss'\nimport * as React from 'react';\nimport {ListItemShape} from '../../../layouts/ListLayout'\nimport {measuring, Measuring} from '../../../react/measure/measuring'\nimport {PropsOf} from '../../../react/PropsOf';\nimport {existing} from '../../../typecheck/existing'\nimport {Segment} from './Segment'\n\nexport class MeasuredSegment extends React.PureComponent<Props> {\n    render() {\n        const {id, width} = this.props\n        const {Segment} = this\n        return <Segment id={id} width={width} onHeightChange={this.reportHeight}/>\n    }\n\n    private reportHeight = (height: px) => {\n        const id = this.props.id\n\n        if (existing(this.props.onHeightChange)) {\n            this.props.onHeightChange({id, height})\n        }\n    }\n\n    constructor(props: Props) {\n        super(props)\n        this.Segment = measuring(props.Segment)\n    }\n\n    private Segment: Measuring<Segment>\n}\n\ntype Props = PropsOf<Segment>\n    & { Segment: Segment }\n    & { onHeightChange: EventHandler<ListItemShape> }\n\nconst classes = sharedInstance.createStyleSheet({\n    mask: {\n        display: 'block',\n        contain: 'content',\n        height: 'auto',\n        willChange: 'height'\n    }\n}).attach().classes\n","import {ListLayout} from '../../../layouts/ListLayout'\nimport {notExisting} from '../../../typecheck/existing'\nimport {assume} from '../../../utils/assume'\n\nexport function projectScroll(scroll: px, focusOffset: px, from: ListLayout, to: ListLayout): px {\n    const prev = from.getByOffset(scroll + focusOffset)\n    const curr = assume(prev, prev => to.getByID(prev.id))\n    if (notExisting(prev) || notExisting(curr))\n        return scroll\n    const prevHeightBeforeFocus = scroll + focusOffset - prev.offset\n    const currHeightBeforeFocus = (prevHeightBeforeFocus / prev.height) * curr.height\n    return curr.offset - (focusOffset - currHeightBeforeFocus)\n}\n","import sharedInstance from 'jss'\r\nimport * as React from 'react'\r\nimport {CSSProperties} from 'react'\r\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {interval} from 'rxjs/observable/interval'\r\nimport {\r\n    bufferCount,\r\n    bufferTime,\r\n    combineLatest,\r\n    distinctUntilChanged,\r\n    filter,\r\n    map,\r\n    merge,\r\n    pairwise,\r\n    sampleTime,\r\n    scan,\r\n    shareReplay,\r\n    startWith,\r\n    timestamp,\r\n    withLatestFrom\r\n} from 'rxjs/operators'\r\nimport {animationFrame} from 'rxjs/scheduler/animationFrame'\r\nimport {Subscription} from 'rxjs/Subscription'\r\nimport {Memoize} from 'typescript-memoize'\r\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout} from '../../layouts/ListLayout'\r\nimport {ListLayoutImpl} from '../../layouts/ListLayoutImpl'\r\nimport {createDispatcher} from '../../rxjs/createDispatcher'\r\nimport {Pass} from '../../rxjs/Pipe';\r\nimport {Pipes} from '../../rxjs/Pipes'\r\nimport {existing} from '../../typecheck/existing'\r\nimport {isFalse} from '../../typecheck/isFalse';\r\nimport {isTrue} from '../../typecheck/isTrue';\r\nimport {assume} from '../../utils/assume'\r\nimport {ensure} from '../../utils/ensure'\r\nimport {nothing} from '../../utils/nothing'\r\nimport {publishAll} from '../../utils/publishAll'\r\nimport {Pulse} from '../../utils/Pulse'\r\nimport {calcAverage, nearestToAverage} from '../../utils/statics';\r\nimport {tweenHere} from '../../view/tweenHere'\r\nimport {calcFocusOffset} from './src/calcFocusOffset'\r\nimport {calcSegments} from './src/calcSegments'\r\nimport {MeasuredSegment} from './src/MeasuredSegment';\r\nimport {projectScroll} from './src/projectScroll'\r\nimport {Segment} from './src/Segment'\r\nimport deepEqual = require('deep-equal')\r\n\r\nexport class InfiniteList extends React.Component<Props, State> {\r\n    public render(): JSX.Element {\r\n        const {scrolled, heightUpdated, touchEnded, touchMoved, touchStarted} = this.actions$.publish\r\n        const {state, props, children, temporalScroll} = this\r\n        const {Segment, width, height} = props\r\n        const {segments, layout, useAutoLayout} = state\r\n\r\n        const paddingTop = useAutoLayout\r\n            ? <div key={'infinite-scroll-padding-top'}\r\n                   style={{height: existing(segments[0]) ? segments[0].offset : 0}}/>\r\n            : nothing\r\n\r\n        const contentStyle = {\r\n            width,\r\n            height: layout.totalHeight,\r\n            transform: temporalScroll === 0\r\n                ? 'none'\r\n                : `translateY(${-temporalScroll}px)`\r\n        }\r\n        const segmentStyle = (offset: px): CSSProperties => {\r\n            return useAutoLayout\r\n                ? {position: 'relative'}\r\n                : {position: 'absolute', top: `${offset}px`}\r\n        }\r\n\r\n        return <div className={classes.container} style={{width, height}}\r\n                    ref={ref => existing(ref) ? children.container = ref : nothing}\r\n                    onScroll={scrolled}\r\n                    onTouchStartCapture={touchStarted}\r\n                    onTouchEndCapture={touchEnded}\r\n                    onTouchMoveCapture={touchMoved}>\r\n            <div className={classes.content} style={contentStyle}\r\n                 ref={ref => existing(ref) ? children.content = ref : nothing}>\r\n                {paddingTop}\r\n                {segments.map(spec =>\r\n                    <div key={spec.id} className={classes.segment}\r\n                         style={segmentStyle(spec.offset)}\r\n                         ref={ref => existing(ref)\r\n                             ? children.segments.set(spec.id, ref)\r\n                             : children.segments.delete(spec.id)}>\r\n                        <MeasuredSegment {...{id: spec.id, Segment, width}}\r\n                                         onHeightChange={heightUpdated}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.children = {\r\n            container: document.createElement('div'),\r\n            content: document.createElement('div'),\r\n            segments: new Map<ListItemID, HTMLElement>()\r\n        }\r\n\r\n        const layout = ListLayoutImpl.create(props.segmentIDs, Math.round(props.height / 6))\r\n        const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n        const focus = assume(props.focus, focus => layout.getByID(focus))\r\n        const scroll = ensure<px>(assume(focus, focus => focus.offset - focusOffset), 0)\r\n        const segments = calcSegments(scroll, 0, props.height, layout)\r\n        this.state = {scroll, layout, segments, useAutoLayout: true}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.children.container.scrollTop = this.state.scroll\r\n        this.work.add(this.updateState())\r\n        this.work.add(this.adjustScroll())\r\n        this.work.add(this.focusOnSegment())\r\n        this.work.add(this.callEventHandlers())\r\n        publishAll<Props>(this.props, this.props$.publish)\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {props, state, children} = this\r\n\r\n        if (prevProps !== props) {\r\n            publishAll<Props>(this.props, this.props$.publish)\r\n        }\r\n\r\n        if (prevState.layout !== state.layout) {\r\n            const {containerScroll, temporalScroll} = this\r\n            const prevScroll = containerScroll + temporalScroll\r\n\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const currScroll = Math.min(Math.max(projectScroll(\r\n                prevScroll, focusOffset,\r\n                prevState.layout, state.layout\r\n            ), 0), state.layout.totalHeight - props.height)\r\n\r\n            const expectedTemporalScroll = Math.ceil(currScroll - containerScroll)\r\n            if (Math.abs(temporalScroll - expectedTemporalScroll) > 1) {\r\n                this.temporalScroll = expectedTemporalScroll\r\n            }\r\n\r\n            if (!state.useAutoLayout && !prevState.useAutoLayout) {\r\n                Array.from(children.segments.entries())\r\n                    .forEach(([segmentID, element]) => {\r\n                        const prev = prevState.layout.getByID(segmentID)\r\n                        const curr = state.layout.getByID(segmentID)\r\n\r\n                        if (!existing(prev) || !existing(curr))\r\n                            return\r\n\r\n                        const prevScreenOffset = prev.offset - prevScroll\r\n                        const currScreenOffset = curr.offset - currScroll\r\n                        if (prevScreenOffset === currScreenOffset)\r\n                            return\r\n\r\n                        tweenHere(\r\n                            element,\r\n                            (current, to) => {\r\n                                return {\r\n                                    ...current,\r\n                                    y: prevScreenOffset - (to.y - current.y)\r\n                                }\r\n                            },\r\n                            (from, to) => {\r\n                                const diff = Math.abs(from.y - to.y) +\r\n                                    Math.abs(from.height - to.height) * 2\r\n\r\n                                return Math.min(Math.min(diff, 100), 300)\r\n                            },\r\n                            [0.445, 0.05, 0.55, 0.95]\r\n                        )\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.work.unsubscribe()\r\n    }\r\n\r\n    private readonly work: Subscription = new Subscription()\r\n\r\n    private readonly children: Children\r\n\r\n    private readonly actions$ = createDispatcher<Actions>(actionsFilter)\r\n    private readonly props$ = createDispatcher<Props>(propsFilter)\r\n\r\n    @Memoize()\r\n    private get height$(): Observable<px> {\r\n        const {height} = this.props$\r\n\r\n        return height.pipe(\r\n            startWith(this.props.height),\r\n            distinctUntilChanged(),\r\n            // log$('height'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get layout(): Observable<ListLayout> {\r\n        const {segmentIDs} = this.props$\r\n        const {heightUpdated} = this.actions$\r\n\r\n        const updates$: Observable<Array<ListItemShape>> = heightUpdated.pipe(\r\n            bufferTime(0, animationFrame),\r\n            filter(buffer => buffer.length > 0)\r\n        )\r\n\r\n        const layout$: Observable<ListLayout> = segmentIDs.pipe(\r\n            scan<Array<ListItemID>, [Array<ListItemID>, ListLayout]>(\r\n                ([prevIDs, prevLayout], currIDs) => currIDs === prevIDs\r\n                    ? [currIDs, prevLayout]\r\n                    : [currIDs, prevLayout.join(currIDs)],\r\n                [this.props.segmentIDs, this.state.layout]\r\n            ),\r\n            map(([_, layout]) => layout),\r\n            startWith(this.state.layout),\r\n            distinctUntilChanged(),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return layout$.pipe(\r\n            combineLatest(updates$),\r\n            map(([layout, updates]): ListLayout => layout.update(updates).clone()),\r\n            distinctUntilChanged(),\r\n            // log$('layout'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    private get temporalScroll(): px {\r\n        const {temporalScroll$} = this\r\n        return (temporalScroll$ as BehaviorSubject<px>).getValue()\r\n    }\r\n\r\n    private set temporalScroll(scroll: px) {\r\n        const {temporalScroll$} = this\r\n        const {content} = this.children;\r\n\r\n        (temporalScroll$ as BehaviorSubject<px>).next(scroll)\r\n        content.style.transform = scroll === 0\r\n            ? 'none'\r\n            : `translateY(${-scroll}px)`\r\n    }\r\n\r\n    private readonly temporalScroll$: Observable<px> = new BehaviorSubject(0)\r\n\r\n    private get containerScroll(): px {\r\n        const {container} = this.children\r\n        return container.scrollTop\r\n    }\r\n\r\n    private set containerScroll(scroll: px) {\r\n        const {container} = this.children\r\n        container.style['-webkit-overflow-scrolling'] = 'auto'\r\n        container.scrollTop = scroll\r\n        container.style['-webkit-overflow-scrolling'] = 'touch'\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScroll$(): Observable<px> {\r\n        const {scrolled, touchStarted, touchEnded} = this.actions$\r\n\r\n        const shouldSample: Observable<Pulse> = scrolled.pipe(\r\n            merge(touchStarted),\r\n            merge(touchEnded),\r\n            merge(interval(0, animationFrame)),\r\n            timestamp(),\r\n            distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            sampleTime(0, animationFrame),\r\n            startWith(Pulse)\r\n        )\r\n\r\n        return shouldSample.pipe(\r\n            map(() => this.containerScroll),\r\n            map(Math.round),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScrollVelocity$(): Observable<Velocity> {\r\n        const {containerScroll$} = this\r\n\r\n        const move = containerScroll$.pipe(\r\n            timestamp(),\r\n            // distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            pairwise()\r\n        )\r\n\r\n        return move.pipe(\r\n            map(([prev, curr]) =>\r\n                (curr.value - prev.value) / (curr.timestamp - prev.timestamp)\r\n            ),\r\n            startWith(0),\r\n            bufferCount(3, 1),\r\n            map(nearestToAverage),\r\n            filter(existing),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get useAutoLayout$(): Observable<boolean> {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        return containerScrollVelocity$.pipe(\r\n            map(Math.abs),\r\n            map(speed => speed > 3),\r\n            bufferCount(2, 1),\r\n            map(buffer => buffer.filter(isTrue).length > buffer.filter(isFalse).length),\r\n            distinctUntilChanged(),\r\n            // log$('useAutoLayout'),\r\n            shareReplay(1)\r\n        )\r\n\r\n    }\r\n\r\n    @Memoize()\r\n    private get scroll$(): Observable<Velocity> {\r\n        const {containerScroll$, temporalScroll$} = this\r\n\r\n        return containerScroll$.pipe(\r\n            withLatestFrom(temporalScroll$),\r\n            map(([container, temporal]) => container + temporal)\r\n        )\r\n    }\r\n\r\n    private get velocity(): Velocity {\r\n        return this['_velocity']\r\n    }\r\n\r\n    private updateState(): Subscription {\r\n        const {scroll$, layout, containerScrollVelocity$, height$, useAutoLayout$} = this\r\n\r\n        const preload$: Observable<px> = containerScrollVelocity$.pipe(\r\n            bufferCount(3, 1),\r\n            map(calcAverage),\r\n            filter(existing),\r\n            map(Math.round),\r\n            map(velocity => Math.max(Math.min(velocity * 500, 10000), -10000)),\r\n            distinctUntilChanged(),\r\n            // log$('preload'),\r\n            shareReplay(1)\r\n        )\r\n\r\n        const state: Observable<State> = scroll$.pipe(\r\n            combineLatest(preload$, useAutoLayout$, layout, height$),\r\n            map(([scroll, preload, useAutoLayout, layout, height]): State => {\r\n                const segments = calcSegments(scroll, preload, height, layout)\r\n                return {layout, segments, useAutoLayout, scroll}\r\n            }),\r\n            distinctUntilChanged((prev, curr) =>\r\n                prev.useAutoLayout === curr.useAutoLayout &&\r\n                prev.layout === curr.layout &&\r\n                deepEqual(prev.segments, curr.segments)\r\n            ),\r\n            startWith(this.state),\r\n            // tap(state=> console.log(state.useAutoLayout)),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return state.subscribe(state => this.setState(state))\r\n    }\r\n\r\n    private adjustScroll(): Subscription {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        const shouldApplyTemporalScroll: Observable<Pulse> = containerScrollVelocity$.pipe(\r\n            bufferCount(2, 1),\r\n            filter(buffer => !buffer.some(v => Math.abs(v) > 0.01))\r\n        )\r\n\r\n        return shouldApplyTemporalScroll.subscribe(() => {\r\n            const {temporalScroll, containerScroll} = this\r\n            if (temporalScroll === 0)\r\n                return\r\n            // console.log('adjusted')\r\n            this.containerScroll = containerScroll + temporalScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private focusOnSegment(): Subscription {\r\n        const {props$} = this\r\n\r\n        const newFocusSegment = props$.focus.pipe(\r\n            distinctUntilChanged(),\r\n            filter(existing),\r\n            map(focus => this.state.layout.getByID(focus)),\r\n            filter(existing)\r\n        )\r\n\r\n        return newFocusSegment.subscribe(segment => {\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const targetScroll = segment.offset - focusOffset\r\n            this.containerScroll = targetScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private callEventHandlers(): Subscription {\r\n        const {scroll$, layout} = this\r\n\r\n        const work = new Subscription()\r\n\r\n        work.add(scroll$.subscribe(scroll => {\r\n            if (existing(this.props.onScroll))\r\n                this.props.onScroll(scroll)\r\n        }))\r\n        work.add(layout.subscribe(layout => {\r\n            if (existing(this.props.onReflow))\r\n                this.props.onReflow(layout)\r\n        }))\r\n\r\n        return work\r\n    }\r\n}\r\n\r\ntype Props = {\r\n    segmentIDs: Array<ListItemID>\r\n    width: px\r\n    height: px\r\n    Segment: Segment\r\n    focus?: ListItemID\r\n    focusOffset?: px\r\n    onScroll?: EventHandler<px>\r\n    onReflow?: EventHandler<ListLayout>\r\n}\r\nconst propsFilter: Pipes<Required<Props>> = {\r\n    segmentIDs: distinctUntilChanged(),\r\n    width: distinctUntilChanged(),\r\n    height: distinctUntilChanged(),\r\n    Segment: distinctUntilChanged(),\r\n    focus: distinctUntilChanged(),\r\n    focusOffset: distinctUntilChanged(),\r\n    onScroll: distinctUntilChanged(),\r\n    onReflow: distinctUntilChanged()\r\n}\r\n\r\ntype State = {\r\n    scroll: px\r\n    layout: ListLayout\r\n    segments: Array<ListItemPosition>\r\n    useAutoLayout: boolean\r\n}\r\ntype Children = {\r\n    container: HTMLElement\r\n    content: HTMLElement\r\n    segments: Map<ListItemID, HTMLElement>\r\n}\r\n\r\ntype Actions = {\r\n    scrolled: React.SyntheticEvent<HTMLDivElement>\r\n    touchStarted: React.TouchEvent<HTMLDivElement>\r\n    touchMoved: React.TouchEvent<HTMLDivElement>\r\n    touchEnded: React.TouchEvent<HTMLDivElement>\r\n    heightUpdated: ListItemShape\r\n}\r\nconst actionsFilter: Pipes<Actions> = {\r\n    scrolled: Pass,\r\n    touchStarted: Pass,\r\n    touchMoved: Pass,\r\n    touchEnded: Pass,\r\n    heightUpdated: Pass\r\n}\r\n\r\nexport const classes = sharedInstance.createStyleSheet({\r\n    container: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        'overflow-x': 'hidden',\r\n        'overflow-y': 'scroll',\r\n        'overflow-anchor': 'none', // https://stackoverflow.com/questions/42205462/disable-chromes-scroll-preserving-feature\r\n        'scroll-behavior': 'auto',\r\n        '-webkit-overflow-scrolling': 'touch',\r\n        contain: 'strict',\r\n        'will-change': 'transform', // https://bugs.chromium.org/p/chromium/issues/detail?id=514303\r\n        '-webkit-font-smoothing': 'subpixel-antialiased'\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        contain: 'strict',\r\n        'will-change': 'transform, height'\r\n    },\r\n    segment: {\r\n        display: 'block',\r\n        'will-change': 'top, height'\r\n    }\r\n}).attach().classes\r\n\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","import * as loremIpsum from 'lorem-ipsum'\r\nimport * as React from 'react';\r\nimport {PropsOf} from '../../../react/PropsOf';\r\nimport {ensure} from '../../../utils/ensure'\r\nimport {getRandomIntInclusive} from '../../../utils/getRandomIntInclusive'\r\nimport {Segment} from '../src/Segment';\r\n\r\nexport class SegmentExample extends React.Component<PropsOf<Segment>, State> {\r\n    componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            if (this.state.type !== 'text')\r\n                return\r\n            const text = loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[this.props.id] = text\r\n            this.setState({text})\r\n        }, getRandomIntInclusive(3000, 5000))\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval)\r\n    }\r\n\r\n    render() {\r\n        return <div style={{\r\n            display: 'block',\r\n            width: this.props.width,\r\n            backgroundColor: 'white',\r\n            wordWrap: 'break-word',\r\n            wordBreak: 'break-all'\r\n        }}>\r\n            <div>{this.props.id}</div>\r\n            <br/>\r\n            {\r\n                this.state.type === 'text'\r\n                    ? this.state.text\r\n                    : <img style={{width: this.props.width}} src={this.state.image}/>\r\n            }\r\n            <br/>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: PropsOf<Segment>) {\r\n        super(props)\r\n        const type = ensure(typeCache[props.id], Math.random() > 0.2 ? 'text' : 'image')\r\n        typeCache[props.id] = type\r\n\r\n        let state: State\r\n\r\n        if (type === 'text') {\r\n            let text = textCache[props.id] || loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[props.id] = text\r\n            this.state = {type, text}\r\n        } else {\r\n            const image = imgCache[props.id]\r\n                || `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`\r\n            imgCache[props.id] = image\r\n            this.state = {type, image}\r\n        }\r\n    }\r\n\r\n    private interval: any\r\n}\r\n\r\nconst typeCache: { [id: string]: 'text' | 'image' } = {}\r\nconst textCache: { [id: string]: string } = {}\r\nconst imgCache: { [id: string]: string } = {}\r\n\r\ntype State = { type: 'text', text: string }\r\n    | { type: 'image', image: string }\r\n\r\n\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom'\r\nimport ErrorBoundary from 'react-error-boundary'\r\nimport {ListItemID} from '../../../layouts/ListLayout'\r\nimport {InfiniteList} from '../InfiniteList'\r\nimport {SegmentExample} from './SegmentExample'\r\n\r\nconst segmentIDs: Array<ListItemID> = []\r\nfor (let i = 0; i < 100000; i++) {\r\n    segmentIDs.push(i.toString())\r\n}\r\n\r\nexport class Demo extends React.Component<{}, {\r\n    width: number,\r\n    height: number,\r\n    focusOffset: number\r\n}> {\r\n    render() {\r\n        const {width, height, focusOffset} = this.state\r\n\r\n        return <InfiniteList Segment={SegmentExample}\r\n                             {...{width, height, segmentIDs, focusOffset}}\r\n                             onScroll={this.onScroll}/>\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => {\r\n            const width = window.innerWidth\r\n            const height = window.innerHeight\r\n            this.setState({width, height})\r\n        })\r\n    }\r\n\r\n    onScroll = (scroll: px) => {\r\n        if (Math.abs(scroll) < 10) {\r\n            this.setState({focusOffset: 0})\r\n        } else {\r\n            this.setState({focusOffset: this.state.height / 3})\r\n        }\r\n    }\r\n\r\n    constructor(props: {}) {\r\n        super(props)\r\n        this.state = {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            focusOffset: 0\r\n        }\r\n    }\r\n}\r\n\r\nconst root = document.getElementById('root')!\r\nReactDOM.render(\r\n    <ErrorBoundary FallbackComponent={({componentStack, error}) =>\r\n        <pre style={{width: window.innerWidth, wordBreak: 'break-all'}}>\r\n            {JSON.stringify(componentStack, null, 4)}\r\n            {JSON.stringify(error, null, 4)}\r\n        </pre>\r\n    }>\r\n        <Demo/>\r\n    </ErrorBoundary>,\r\n    root\r\n)\r\n\r\n"]}