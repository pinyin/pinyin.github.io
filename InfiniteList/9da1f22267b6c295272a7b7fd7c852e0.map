{"version":3,"sources":["..\\..\\..\\typecheck\\existing.ts","..\\..\\..\\utils\\cloneFastBinaryIndexedTree.ts","..\\..\\..\\utils\\ensure.ts","..\\..\\..\\utils\\expandFastBinaryIndexedTree.ts","..\\..\\..\\utils\\nothing.ts","..\\..\\..\\layouts\\ListLayoutImpl.ts","..\\..\\..\\rxjs\\applyMiddleware.ts","..\\..\\..\\rxjs\\createPublishers.ts","..\\..\\..\\rxjs\\createSubjects.ts","..\\..\\..\\rxjs\\createDispatcher.ts","..\\..\\..\\rxjs\\Pipe.ts","..\\..\\..\\typecheck\\isFalse.ts","..\\..\\..\\typecheck\\isTrue.ts","..\\..\\..\\typecheck\\isFunction.ts","..\\..\\..\\utils\\assume.ts","..\\..\\..\\utils\\publishAll.ts","..\\..\\..\\utils\\Pulse.ts","..\\..\\..\\utils\\statics.ts","..\\..\\..\\utils\\forDuration.ts","..\\..\\..\\utils\\nextAnimationFrame.ts","..\\..\\..\\utils\\uniqueID.ts","..\\..\\..\\view\\calcOutline.ts","..\\..\\..\\view\\intermediateTransform.ts","..\\..\\..\\view\\tweenHere.ts","..\\src\\functions\\calcFocusOffset.ts","..\\src\\functions\\calcSegments.ts","..\\src\\functions\\projectScroll.ts","..\\..\\..\\react\\measure\\measuring.tsx","..\\src\\MeasuredSegment.tsx","..\\InfiniteList.tsx","..\\..\\..\\utils\\getRandomIntInclusive.ts","SegmentExample.tsx","InfiniteList.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA4B,KAAkB;IAC1C,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI,CAAA;AACzD,CAAC;AAFD,ACAA,4BDEC,yCCF2D;ADG5D,ACDA,ACFA,qBFG+B,KAAe,UCDH,MAA6B,QCFvB;AAEjD,IFEI,ACDA,IAAM,GDCC,CAAC,ECDI,ECDU,CDCP,GDCC,CAAC,ACDE,ACDkB,EAAE,GFEjB,CAAC,CAAA,OEF+B,oBDCd,CAAC;ADE7C,AGLA,CHKC,GEFG,IDCI,GCDG,aDCa,EAAE,MAAM,CAAC,ACDX,CAAC,KAAK,CAAC,IAAI,KDCgB,CCDV,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,ACHa,CDGZ,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAA;AFA3E,AECA,ACFA,CDEC,ODCO,MAAM,EAAE,MAAM,CAAC,MAAM,KDA5B,GGFG,MAA6B,EAC7B,aAAqB;ADFzB,AEFa,IDMT,CFAC,CAAC,CAAA,CGNO,OAAO,EDMH,CCNe,EDMZ,ECNgB,CAAA,CFInC,ACEuB,CAAC,KAAK,CAAC,aAAa,CAAC,CAAA;IFEzC,AEDA,IAAI,EFCE,CAAC,OAAO,CAAC,EEDE,IAAI,CAAC,iBFCA,MAAM,CAAC,OAAO,CAAC,CAAC,CAAA;IACtC,IEDI,EFCE,CAAC,IEDG,OFCQ,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,CAAA;AIT7C,IJWI,AEDA,IAAM,GFCC,MAAM,AEDE,CFCF,EEDK,IAAI,qBAAqB,CAAC,uBEVY;AAC5D,ACEA,ALSA,CAAC,OEDO,MAAM,EAAE,MAAM,CAAC,EGPnB,IHOyB,EGPH,CHOM,CGPJ,KAAe,OHOE,KEVI;AACjD,AJAA,IKII,IHMI,GGNG,MAAM,CAAC,IAAI,CAAC,CHMC,EAAE,GGNG,CAAC,EHME,CAAC,gBAAgB,eFAhD,kBIV6E;AAC9E,AEDA,KJWK,CAAC,CAAA,EGNG,GAAG,CAAC,UAAA,GAAG,ACLmC,QAAqB,QFClC;AACtC,IEDI,AJYA,IGRgB,EHQV,CIZC,AJYA,IGRS,ECJH,CAAC,EJYE,CAAC,CIZC,CAAC,CJYC,CGRF,GAAC,GAAG,ACJK,CAAC,CJYC,CAAC,CGRL,KAAK,CAAC,EHQQ,CGRL,AHQM,CGRL,AHQK,CGRJ,MAAM,CAAC,GAAG,CAAC,CAAC,KAAE,qBDH0B;AAChF,AGLA,ILgBI,KIZK,CJYC,CAAC,CIZC,CAAC,IJYI,CAAC,GAAG,EIZR,GAAG,IJYc,CAAC,MAAM,CAAC,CAAA,CKhBF,IHKI;AAGxC,AGLA,ALcA,CAAC,GGVmB,CAAkC,CAAC,ECHnC,OAAA,SCD6B,CDC3B,GAAC,CCD2C,EDCxC,IAAG,UAAC,KAAoB,IAAK,OAAA,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAzB,CAAyB,KAAE;AEJlF,ANEA,IEuKI,AGrKA,KFIK,EEJE,IFII,CAAC,CEJC,CAAC,IAAI,CAAC,GFIN,EDkKQ,AGtKG,CAAC,CFIR,EAAE,IAAI,IAAK,CDkKU,EAC1B,ICnKgB,GDmKkB,EAClC,CCpKsB,AGRW,CHQV,MAAM,CDoKa,ACpKZ,EDqKrB,ECrKyB,CHSjD,CGTmD,IAAI,CAAC,EAAzB,CDqK0B,ACrKD,CAAQ,CDsKxC,ACtKwC,cDsKH;ACrK9D,AGRA,CHQC,GCLmB,CAA8D,CAAC,EFsK1D,CGrKhB,GAAG,CAAC,UAAA,GHqKyB,AGrKtB,GHqKS,aAAa,CAAI,YIzKS;ACItC,AJFb,AGDA,QJyKgB,AKtKH,AFAO,CDAX,GGAQ,GAAG,AHAL,ACAK,CDAJ,IFsKO,GAAP,EKtKQ,AFAF,CDAL,ECAM,EHsKA,AEtKF,CFsK6B,AGtKxB,CDAH,GGA0B,AFApB,CDAF,GGA0C,AFApC,CDAD,EDI/B,IIJoE,CHArC,IEHe,EFGT,CAAC,EGAwC,AFAvC,EEA6B,AFA3B,CEAqC,CAAA,AHAlC,CAAC,ECAF,EDAM,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CAAA;AECjE,AFAA,CAAC,OFsKe,cAAS,GAAT,CIrKZ,QJqKqB,CAAiC,CIrKxB;AFLlC,AIFA,IFSI,ADJgB,CAAwB,CAAC,EHwKpB,AIpKf,QAAQ,CETM,EFSH,GETa,GN6KG,GAAZ,YAAY,CAAqB,GEvKzD,MEGkC,CAAc,UAAU,CAAC,CAAA;IACxD,AETA,IN6KqB,CGxKhB,ECIE,AETA,IHKI,CAAC,AGLA,CFSC,CAAC,GETG,GFSG,CAChB,CDLS,AGLS,CN6Ka,AInK9B,AEViB,GN6KD,AGxKJ,EAAE,ECKP,EAAE,ADLS,IAAK,IHwKO,CAAuB,EGxK9B,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,ICKlB,ADLsB,CCKR,ADLS,EAAzB,CAAyB,CAAQ,CAAA,GCKT,CAAC,EAAC,EAClD,iCAAe,CAAc,QAAQ,EAAE,UAAU,CAAC,CACrD,CAAA;AACL,ADPA,AGLA,ACFA,CHcC,ADPA,AGLA,GN6KM,CAAC,WO/Ke,KAAU;AHMjC,ADHA,AGHA,INSkB,AORd,OAAO,KAAK,KAAK,IPQG,AORC,CDCxB,ACDwB,EPQrB,UAAqB,EGFxB,ICOA,CJL0D,EAClC,aAAuB,EACvB,OAAgD;AQXzE,ADEA,CAAC,OPQwB,YQVE,CAAM,iBRUR,EAAA,mBAAuB;AOVhD,ICCI,IRUqB,GQVd,OAAO,CAAC,KAAK,ADCvB,QPSwB,EAAA,AQVS,CAAA,aRUkC,GAAG,EAAE;AQTzE,CAAC,ORUO,IAAM,SAAS,GAAG,IAAI,GAAG,EAAE,CAAA;AQZnC,ACAA,QTaQ,OAAO,CAAC,OAAO,CAAC,QQXvB,ERWwB,EAAE,EAAE,KAAK,OSbe;AACjD,ACDA,YVcY,IAAI,IUd6B,KVcpB,AUd4B,CVc3B,CUd6B,EVc1B,CAAC,EAAE,CAAC,EUd0D,mBDCzC;AAClD,ICDI,MAAM,CAAC,IAAI,CVcC,AUdA,MVcM,EUdE,CAAC,CVcC,AUdA,OAAO,CAAC,GDCD,OCDC,GAAG,GVca,CAAC,AUdV,EVcY,CAAC,CAAA,GUdb,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAzB,CAAyB,CAAC,CAAA;ACAxD,AFKX,ACJA,CAAC,OCDU,IXeC,CWfI,GAAU,IAAI,CXeT,AWfS,CXeR,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,CAAA;AUhBpC,IDM0B,ITWlB,CAAC,CAAC,CAAA,SSX+E,YCJxF;AEFD,QZmBQ,CSbkB,GTaZ,OSb2E,EAA/D,KTaE,GAAG,IAAI,SSbsD,EAA/D,IAA+D,EGNxC,iBZmBO,CAAC;AYlBzD,QHK0B,ITcd,gBAAgB,EAAE,KSd2D,EGLxD,MZmBU;AYjB3C,YZkBY,KYlBY,CZkBN,EAAE,EYlBwB,KZkBjB,CAAC,MAAM;ISd9B,AGHA,IHGM,CTeD,CAAC,CAAA,AYlBC,CHGG,GAAG,CGHD,CAAC,IHGM,CAAC,CGHD,CAAC,IHGM,CAAC,KGHN,CHGY,EGHT,CHGY,CAAC,AGHX,CHGY,CAAA,EGHR,IAAK,OAAA,GAAG,GAAG,IAAI,EAAV,CAAU,EAAE,CAAC,CAAC,CAAA;AACrD,CAAC,GHGG,ITgBI,AShBE,ITgBI,MShBM,GAAG,GTgBG,GAAG,AShBA,CAAC,GTgBG,EShBE,CTgBC,AShBA,CAAC,CTgBC,CAAA,AShBC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AGLzD,IHMI,ITgBI,AShBA,CAAC,MTgBM,CAAC,OAAO,CAAC,EYpBvB,MHIkB,CAAC,CTgBK,GShBD,CAAC,ETgBM,EAAE,AShBJ,ETgBM,QShBI,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,sBAAW,CAAC,EAAE;AGFpF,QHGQ,ITgBI,GShBG,CTgBC,CAAC,IYnBW,KZmBF,AYnBsB,CZmBrB,GAAG,CAAC,CShBT,CTgBW,AShBX,CTgBY;Aa1BlC,IDQI,CHGC,GGHG,KAAK,CAAC,EZmBE,IYnBI,CCRc,Eb2BZ,EYnBG,CAAC,GCRoB;IJY1C,IGHI,GHGG,CTgBC,GShBG,AGHA,SZmBS,CAAC,GAAG,CAAC,EAAE,CYnBT,CZmBW,AYnBX,MZmBiB,CAAC,CAAA,MShBrB,UAAU,GAAC;AAC9B,AKbA,CLaC,GGHG,OAAO,CZmBC,MYnBM,CAAC,KAAK,CAAC,CZmBC,CAAC,CYnBC,KAAK,CAAC,IZmBI,CAAC,CYnBC,CAAA,OZmBQ,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,MAAM,CAAC,CAAA;ASvBlE,AGKA,AGXA,CHWC,OZmBO,CAAC,CAAC,CAAA,Ca7BN,YJYH,UIZU,IAAI,OAAO,CAAO,CEDkB,SFCjB,IAAI,IAAK,OAAA,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,EAA1B,CAA0B,CAAC,EAAA;ADMlE,AGNA,ACDA,QhBgCQ,OAAO,GgBhCG,ChBgCC,cAAc,CACrB,AYtBX,aZsBwB,mBACT,OAAO,GACX,SAAS,EACT,YAAY,EACZ,cAAc,CACjB,CAAA;AYzBT,IZ0BI,AerCA,CfqCC,MerCM,CDDP,GCCW,CAAC,MAAM,EAAE,CAAC,CHWQ,KAAoB,EGXpB,CDDtB,ACCuB,EAAE,CAAC,CDDtB,ACCuB,ODDhB,CAAC,CCCwB,CAAC,CAAC,CAAC,MDD3B,OAAO,IAAI,OAAA,qBAAqB,CAAC,OAAO,CAAC,EAA9B,CAA8B,CAAiB,EAAC;AEClF,CHAC,GbuCU,AY3BP,IAAM,EGXA,CAAC,IHWM,AGXF,GHWK,CGXD,EAAE,ACDO,CDCN,CAAC,CCDiB,KJYT,CAAC,AGXF,EAAE,CAAC,EHWI,CZ2BnB,AY3BoB,CAAA,EZ2BlC,EetCqC,CAAC,EAAE,CAAC,CAAC,GfsC3B,EAAc;AazCjC,AEIA,CAAC,GHWG,AIZA,IhBuCI,AY3BA,AIZE,IhBuCE,AgBvCE,CJYD,CAAC,CIZG,ChBuCD,CAAC,CgBvCG,CAAC,CJYD,CZ2BC,IY3BI,CZ2BC,AY3BA,CZ2BC,EAAE,CY3BC,ICb7B,MGCyC,EAAE,CAAA,SJYH,CAAC,OAAO,CAAC;AGdlD,CDCC,GEGU,IJWH,AIXG,IhBqCoB,GY1BhB,IZ0BuB,OgBrCtB,EDDf,ACCiB,IJWI,CAAA,GZ0BuB,CAAA,WgBrCrB,CAAQ;AFLhC,IFiBI,AIXA,IJWM,AIXA,ChBoCqC,AgBpCpC,GAAG,EJWE,EIXE,CJWC,AIXA,IAAI,CJWC,AIXD,CJWE,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,EEfvC,KFeuC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,EAA7C,CAA6C,CAAC,CAAA;IAClF,AIXA,IhBoCI,AgBpCE,CAAC,EJWA,CZyBG,AgBpCA,IAAI,ChBoCC,AYzBF,AIXE,CJWD,CAAC,CZyBG,AYzBF,AIXE,CJWF,AIXE,GhBoCI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AYxB5C,CAAC,GIVG,IhBmCI,GgBnCG,ChBmCC,CgBnCA,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,KAAK,IhBmCA,CAAC,EgBnCD,EAAE,ChBmCI,CAAC,EAAE,EgBnCD,QAAA,EAAC,CAAA;AJIhC,AIHA,CAAC,WhBkCiC,OAAO,iBAAO,CAAA,OYzB/C;AAED,AInBA,ShB0CkD,cYvBpB,KAAoB,MIXjD;IJYG,IZuBI,AYvBE,IZuBI,GYvBG,GZuBG,AYvBA,GZuBG,IAAI,CAAC,GYvBG,CAAC,KAAK,CAAC,CAAA,GZuBI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;AiB7CtD,ILuBI,IZuBI,AYvBA,IZuBM,CYvBD,CAAC,IZuBM,EYvBA,CZuBG,IAAI,AYvBF,CZuBG,AYvBF,IAAI,UZuBY,CAAC,UAAU,CAAC,AYvBb,CAAC,IZuBiB,CAAC,CAAA,CYvBX,CAAC,6FKvBD;AACjD,QjB8CQ,AYvBA,OZuBO,AYvBA,EZuBC,EAAE,IAAA,EAAE,KAAK,EYvBH,CAAA,IZuBG,EAAE,MAAM,QAAA,EAAE,MAAM,QAAA,EAAC,CAAA,0FiB9Ce;AACzD,IjB8CI,AYvBA,CZuBC,MYvBM,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,EAAvB,CAAuB,CAAC,CAAC,CAAA,4EKvBR;ALwBzD,AKtBA,ACJA,CN0BC,GZwBU,2BiB9C2B,IAAa,EAAE,EjB8ChC,AiB9C2C,GjB8C5D,UAAkB,KAAa,qGkBlDkB;ANqBrD,AMpBA,ACDA,IFKI,IjB8CI,AiB9CE,IjB8CE,IAAI,AiB9CE,CjB8CD,EiB9CI,EjB8CA,KAAK,CAAC,EAAE,AiB9CP,IAAa,KLqBlC,aO1B8C,6GDCK;AACpD,ACAA,QFIQ,IjB6CuB,GiB7ChB,IjB6CuB,MmBjDN,WnBiDa,AmBjDS,CnBiDT,CmBjDW,cAAkB,EDAxB;AAClD,AEFA,IDEI,KnBgD2C,EmBhDpC,CFIC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,EEJP,CAAK,CFIM,CAAC,KAAK,GAAG,CEJJ,EFIO,AEJL,YDAa,ECAC,GAAG,CAAC,CAAC,ACFE,CDEF;ADCtD,ACAA,ACDA,CDCC,GCDK,IpBiDE,IAAM,AiB5CF,AGLE,CHKD,CjB4CG,CiB5CD,AGLE,EpBiDE,AoBjDA,CAAA,CHKA,CAAC,CjB4CG,AiB5CF,CjB4CG,EiB5CA,IAAI,CjB4CG,AiB5CF,CjB4CG,KAAK,AiB5CF,CjB4CG,CAAA,CiB5CA,GAAG,yBCJqB;AAC9D,ACHA,ACGA,ACJA,QrBoDQ,CiB5CC,CAAA,EjB4CG,UoBhDiB,MAAU,EAAE,IpBgDlB,CAAC,EAAE,AoBhD0B,CpBgDzB,CoB/CE,CpB+CA,EmBjD5B,GCEsC,CFDG,CECD,MAAkB,MCLD;AHK1D,AGJA,IJQI,AGHA,CHGC,CAAA,EGHK,IpB8CqB,IoB9Cb,GpB8CoB,AoB9CQ,EAAE,CAAA,MpB8CD,CAAA,gBkB/CN,MGJM;AHK/C,AGHA,IJOI,AGFA,IHEM,AGFA,CpB4CuC,OoB5C/B,EHEE,CGFC,EHEE,EIPO,EDKH,CAAC,GHEG,AIPS,CJOR,CIPU,GJON,CAAC,CAAA,CGFE,CAC/B,IAAI,ACN6C,CDM5C,CCN8C,EDM3C,CACJ,CCP+D,EAAE,CDO7D,CAAC,ACP0E,GDOvE,CACJ,MAAM,GFLuC,AEKpC,MAAM,EACf,MAAM,GAAG,OAAO,CACnB,EACD,CAAC,CACJ,CACJ,CAAA;AFRL,IDGI,AGMA,ACbA,IrBiDI,AiB1CE,AGMA,ACbA,IrBiDI,AqBjDA,GDaG,ACbA,CJOC,EjB0CE,AoBpCA,CHNC,ACFjB,AGLiB,CAAC,CrBiDC,GoBpCG,CpBoCC,AoBpCA,CpBoCC,AkB5CJ,CDEK,CAAC,ACD1B,EDC4B,CAAC,AIPA,CJOA,ACDoD,AGNnD,EHO9B,EEMkC,CAC9B,CCdgC,ErBiDE,CAAC,AoBnC/B,ACd+B,CHOsB,AEOpD,EFNT,ClByC2C,AoBnC/B,CpBmCgC,AoBlCpC,IFPqB,AEOjB,CpBkCqC,AoBlCpC,CpBkCqC,AqBjDA,CrBiDA,AqBjDC,CDenC,ACfmC,CDgBvC,MAAM,GAAG,MAAM,GAAG,MAAM,EACxB,MAAM,GAAG,MAAM,GAAG,OAAO,CAC5B,EACD,MAAM,CAAC,WAAW,CACrB,CACJ,CAAA;IHZD,ACHA,AEgBA,ACrBA,IrBiDI,AiBzCE,AGaF,ACrBE,IrBiDI,AqBjDA,EJQE,CIRC,EJQE,CjByCC,GAAG,IAAI,AkB5CvB,ClB4CwB,CkB5CxB,AEgBY,CAAC,ECrBM,CAAC,IAAI,CDqBH,CAAC,ACrBI,GrBiDY,CAAC,AoB5Bb,GFhBqC,GGLrC,IrBiDuB,AkB5CqB,AGLxC,CrBiDoB,GkB5CwB,AGLxC,ErBiDqB,CAAC,CAAA,CoB5BtB,CAAC,CFhBuC,AGLxC,EAAE,CAAC,GDqBK,CFhBuC,AEgBtC,EFhB+B,AEgB7B,CFhBoC,AGLrC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAnB,CAAmB,CAAC,CAAA,WJQ9B,CACpB,gFAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAC/D,wEAAK,CAAC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CACxD,CAAA;IAED,ACPA,AGLA,IrBiDI,AoB5BA,ACrBA,GJYG,CGSG,GpB4BC,EAAC,AiBrCC,CAAA,CjBqCC,EoB5BK,EpB4BL,CoB5BQ,CpB4BN,GoB5BU,CFhB1B,AEgB2B,CpB4BN,AqBjDN,CHKf,AGLgB,GDqBgB,CAAC,ACrBb,CAAC,CrBiDA,EAAE,CqBjDE,GDqBgB,CAAC,CpB4Bb,AkB5CgC,IEgBd,GAAG,CpB4BrB,EAAE,KoB5B2B,CpB4BrB,AoB5BsB,CCrBvB,CAAC,CDqByB,GCrBrB,CAAC,CrBiDL,EAAC,CAAA,AoB5BgC,CAAA;AHR1E,CAAC,GjBqCG,AkB5CA,ClB4CC,GoB5BG,ACrBA,IDqBM,GCrBC,IDqBM,ECrBA,CDqBG,ACrBH,IDqBO,CFhBxB,AEgByB,EFhBzB,CEgB4B,CACpB,IAAI,CAAC,GFjBK,CAAC,AEiBF,CAAC,CFjBG,CAAC,EAAE,CAAC,EAAE,AEiBF,CFjBG,AEiBF,CFjBG,IEiBE,GAAG,QAAQ,CAAC,GAAG,QAAQ,EAC9C,MAAM,CAAC,IAAI,GAAG,CAAC,CAClB,CAAA;AH5BT,IjBuDW,AqBlDP,IDwBI,ACxBE,KDwBG,IAAI,KAAK,GAAG,ICxBM,GAAG,EDwBA,EAAE,ECxBI,GDwBC,ACxBE,GrBkDjB,CoB1BmB,EpB0BzC,KoB1BgD,ACxBE,EJWrD,AGaqD,CCxBG,ErBkD9B,EoB1BgC,ACxBE,CAAC,CrBkDvB,AoB1BsB,EpB0BpB,AoB1BsB,EpB0BZ,CqBlDiB,CAAA;IAChE,IrBkDI,AqBlDE,IrBkDE,AoB1BA,IpB0BI,CAAC,GoB1BG,CpB0BC,AoB1BA,IAAI,CpB0BC,AoB1BA,CpB0BC,EAAE,AqBlDE,GDwBC,ACxBE,CDwBD,ACxBE,UDwBQ,CAAC,KAAK,CAAE,CAAC,CAAA,ECxBI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA;IACjF,KDwBK,ECxBE,CrBiDmB,GqBjDf,CAAC,GrBiDqB,EAAE,CAAA,AqBjDjB,GAAG,CAAC,WAAW,GAAG,qBAAqB,CAAC,CAAA;AAC9D,CAAC,IDwBI,IpBwBmC;AqBxDxC,IDkCI,IpBuBI,GoBvBG,CpBuBG,OoBvBK,CpBuBG,AoBvBH,GpBuBM,eAAM,AqBjD9B,CrBiDiD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAE,CAAC,CA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,EAAE,EAAM;AwB/E5C,QxBgFQ,IAAI,AsB/CJ,AClBA,IvBiEQ,AuBjEF,CvBiEG,CuBjED,ELqBZ,ClB4CiB,AuBjEF,GDmBP,EtB8Cc,AuBjEH,CvBiEI,AuBjEH,EvBiEK,AkB5CE,AMpCD,CNoCC,EKrBF,CAAC,EAAE,CAAA,MDmBd,KAAK,CAAC,SAcf;AE9CT,YxB8E8B,AsB5ClB,ACnBJ,IAAI,CDmBI,CAAC,CtB4CoB,CkB3CjC,ClB2CmC,CAAA,EkB3C/B,EIDiB,GAAG,GJCZ,CIDgB,AJCf,EKpBG,CLoBA,AKpBC,CLoBA,IKpBI,CAAC,ELoBE,CAAC,EKpBE,CAAC,ELoBE,MMnCmB,INmCT,EKpBE,CAAC,EAAE,EDmBH,CAC9B,UAAC,OAA8B,EAAE,QAAwB;AEjCzE,SxB4EwC,OsB1CpB,ACpBR,IDoBc,CCpBV,CAAC,ELoBT,EIAwB,CCpBV,CAAC,CDoBY,OAAO,CAAC,CAAC,CAAC,CAAC,ECpBT,CAAC,EAAC,CLoBzB,CKpB2B,IDoBgB,ACpBhB,CDoBiB,CElCT,ADcN,KDoBqB,CAAA,ACpBf,QAAA,EAAC,CAAC,CAAA;ACbnD,QxB4EQ,IAAM,CuB9DL,GDoBW,ItB0CE,AsB1CI,AJAtB,GlB0CqB,EsB1CM,EJApB,CIAuB,AJAtB,KAAK,CAAC,CIAuB,CAAC,CAAC,CtB0CZ,AsB1Ca,CtB0CM,AsB1CL,ItB0CS,CAAC,AkB1C3B,AMnBL,GNmBQ,GIAyB,CAAC,EJApB,CAAA,ClB0C6B,CAAC,AsB1CL,CAAA,GtB0CS,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAE,CAAC,CAAA;AwB5D9F,QxB6DQ,AuB9DJ,CAAC,CAAA,EvB8DS,IsB1CM,EtB0CA,EsB1CI,AJApB,ClB0CmB,OkB1CX,CAAC,MAAM,ClB0CU,AkB1CT,ClB0C4B,EsB1ChB,CAAC,CtB0CmB,CAAC,CkB1C1B,CAAC,CIAS,AJAT,CIAU,KAAK,CAAC,CtB0CoB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,AwB7Df,EFmBF,CAAC,EAAE,KtB0CwB,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAE,CAAC,CAAA;AyBnFtG,ADuBA,QxB6DQ,AuB3DA,IvB2DM,CuB3DF,CAAC,KvB2DQ,CsB1CG,CCjBJ,CvB2D6B,EAAE,AuB3D5B,CvB2D4B,AsB1CvB,CAAC,KAAK,CAAC,aCjBH,CDiBiB,ACjBhB,CDiBiB,GEnBJ,CDER,CAAC,CDiBiB,CAAC,CAAA,ICjBX,CAAC,CAAA,kCEzBgD;ADwB/F,QxB6DQ,KAAK,IAAI,AsB1CI,CtB0CH,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC,AwB7Df,ExB6DiB,EAAE;AyBnF7D,ADwBA,IDAI,CAAC,OvB4DO,IsB1CQ,GtB0CD,CAAC,AsB1CI,ItB0CA,CAAC,IAAI,CAAC,CyBpFQ,GAAW,EAAE,GH0CnB,AG1C8B,CzBoFtB,AsB1CP,CtB0CQ,CAAC,CAAE,CAAC,CAAA,AsB1CR,CAAC,KAAK,CAAC,WElBe,EFkBF,CAAC,EAAE;AEjB5D,ICxBI,AFMA,GENG,EzBoFE,CyBpFC,IAAI,CAAC,IAAI,CH0CK,AG1CJ,GAAG,CAAC,CH0CI,AG1CH,CH0CI,KAAK,CAAC,ICpCzB,GAAN,MDoC4C,CAAC,KAAK,CAAC,CAAA,WElBK;AAC5D,AE5BA,CR0CC,GOtCG,GAAG,CzBoFC,AuB9EM,EENJ,EFMI,EENA,CzBoFC,AyBpFA,EH0CM,GG1CD,CAAC,CzBoFC,CAAA,CyBpFE,CAAC,CAAC,CFMY,EAAvB,UAAE,CCkBoB,AE5BI,CHUtB,gBAAK,CAAc;ALDtC,AMqBA,AE7BA,I1BwFI,AyBpFA,CzBoFC,GuB9EU,GENJ,CH0CK,ACpCD,CDoCE,CACJ,CAAA,AG3CE,CAAC,KAAK,CAAC,IAAI,CAAC,ECJI,CRyC9B,GOrCgC,CFMX,CENa,AFML,GENQ,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,ADyBJ,CCzBK,GAAG,GAAG,CAAC,CAAC,uDAAuD;AACrH,APsCA,AMbA,AG/BA,ADGA,CDGC,GzBqFU,AkB/CL,IKhCE,ILgCM,GAA8B,AKhC7B,ILgCiC,OAAO,EAAE,CAAA,AS5C1B,K3B2Ff,CuB/EA,EvB+EZ,KuB/EmB,IAAC,CvB+EP,CuB/ES,AGTkB,EHShB,CCmBoB,CDnBlB,EAAE,KAAK,EAAE,EvB+ED,GuB/EM,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,GAAG,CAAA;AEVlF,AD8BA,AG/BA,ADGA,IHSI,CAAC,GvB+ES,AsB3CN,CAAC,GtB2CK,SAAwE,EAAvE,a2B3FsB,O3B2Ff,EAAE,IwB5DsB,KC1B7C,ezBsFgC,EAAE,O0BxFuC,uB1BwF3B,EAAE,gCAAa,EAAE,kCAAc,CAAQ;AwB3DtF,AG/BA,ADKA,IHsBA,IvBiEQ,AsBjFA,gBtBiFgB,EuBjEvB,CvBiE0B,CsBjFb,GAAN,WtBiFyB,CAAC,EwB7DO,cxB6DS,EAAE,A2B5FJ,a3B4FiB,CAAC,CAAA;AwB5DlE,ADLA,AI1BA,CJKA,AAqBC,CArBoC,EGDD,GHCM,CvBuFlC,AuBvFmC,IvBuF7B,AsBjFF,SCN4C,GAqBvD,GvBkE4B,GAAG,IAAI,GAAG,CAAC,OwB7DC,CE3BmC,ECJhC,E3B4FQ,CAAC,CAAA,YsBjFW;AEqBhE,AD3Ba,AIHb,IDoCI,I1BuDI,IAAM,AsBnFN,gBI4BQ,C1BuDe,AsBnEtB,GtBmEyB,C0BvDK,SHjCX,KC2Be,IG9BI,oC3B2Fa,CAAC,cAAc,CAAC,CAAA;AwB5D5E,ADDA,AI5BA,IJ4BM,AI5BA,I3B2FE,A0BzDJ,GHNS,CDnBD,ECmBI,AI5BA,C3B2FD,CsBlFG,CKTmB,E3B2FlB,A2B3FoB,CAAA,ADmC/B,CJ1Be,GAAe,GCmBR,CAAC,EDnBa,CAAC,EtBkFZ,CACrB,GsBnFuC,CACnC,AIyBF,EJzBI,EACF,CIwBG,CHP4B,AGO3B,CHP4B,CDjB5B,CAAC,GtBiFO,EAChB,AsBlFc,CEkBuB,AEsB5C,CJvCW,EAAC,GtBiFE,AsBjFC,EtBkFR,AsBlFU,StBkFD,CsBlFE,CtBmFX,CsBnFkB,IAAK,OAAA,GtBmFR,EACf,AsBpF2B,CAAC,SAAS,CAAC,EAAE,CAAC,EAAlB,CtBoFN,AsBpFwB,CtBqF5C,CAAA,AsBrF6C,CAClC,CAAA;AEiBpB,AG7BA,I3BiGI,AuBrEA,CvBqEC,A2BjGA,GJ4BG,AGOA,CCnCC,CJ4BC,AI5BA,ELaE,AIsBE,CCnCD,CAAC,EAAE,ADmCE,CCnCD,ELaE,AIsBE,CCnCD,ILaI,CAAC,CKbC,EAAE,CAAC,EAAE,EAAE,CDmCN,CAAC,MJtBa,CAAC,CAAA,AEgBH,CEMF,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;AFLxF,IxBqEW,A2BlGP,IJ4BI,AGOA,IJtBI,EKbE,CJ4BC,AI5BA,EJ4BE,AGOA,CAAC,CJtBC,AKbA,CAAC,CAAC,CAAC,CDmCC,CJtBC,ACeA,AGOA,CJtBC,CIsBC,CAAC,GCnCG,ADmCA,ECnCE,C3BkGjB,A2BlGkB,CAAA,ADmCC,CAAA,C1B+D9B,IsBrFoC,CAAC,CAAA,ItBqFzB,CwBrEkD,SxBqEb;AwBpErD,CG7BC,O3BkGa,AuBtEN,AGQA,I1B8DM,AsBpFF,AIsBA,GHRG,EAAE,AGQO,CAAA,CJtBL,EtBoF+B,EAAnC,CsBpFS,CAAC,CCcC,YDdY,CACtB,SAAS,EACT,AEa8B,KxBqElB,AsBlFP,EtBkFS,AsBjFd,IAAI,CAAC,KAAK,CAAC,QAAQ,CACtB,CAAA,StBgF6B,CAAQ;AwBpElD,AG5BA,Q3BkGQ,AsBjFA,ACUA,AGSA,CJnBC,GtBiFK,A0B9DF,EHTE,EAAE,AGSA,KAAK,CHTC,EvBuEI,GAAG,A0B9DF,EAAE,E1B8DI,GAAG,EAAE,CAAA,8BwBtEyB;AAC/D,IG7B0B,I3BmGlB,AsB5DA,ACXA,IGSI,IAAI,E1B8DE,AuBvEA,CvBuEC,CuBvEC,AGSA,GAAG,G1B8DG,CAAC,CuBvEC,IGSI,CAAC,GCjC/B,C3B+F0B,C0B9DU,C1B8DR,A0B9DS,E1B8DP,A0B9DS,CJEb,AIFc,GJElC,CtB4D6B,A0B9DS,I1B8DJ,M0B9Dc,C1B8Dd,A0B9De,EAAC,EFRD,GEQM,EAAE,G1B8DX,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,EAA3B,CAA2B,CAAC,CAAA,sB0B9DgB,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC,CAAC,CAAA;AFP/F,IGDI,CJAC,GvBwEG,IAAM,AsB7DF,AIFA,IJEI,CAAC,CKXD,GDSK,CAAC,CCTG,ELWA,CAAC,CtB6DG,A0B/DF,CAAC,E1B+DI,A0B/DF,CAAC,G1B+DK,A0B/DF,EJEE,CtB6DG,CsB7DD,AIFA,C1B+DG,AsB7DH,AIFA,C1B+DG,uBwBvEkB;AAC3D,CDDC,CAAC,CAAC,KvBwEK,AsB7DA,AKZJ,CLYK,ACXA,EAAE,CvBwEG,AuBxEF,AGSA,KAAI,CAAC,CHTE,CAAA,AIAX,GDSc,GAAG,EAAC,C1B+DK,GAAG,A0B/DJ,I1B+DQ,E2BxExB,ADSgB,EAAE,GCTb,CAAC,ADSgB,MAAA,EAAC,CCHhC,ADGgC,IFRiB,axBuEK,CAAC;AwBpE5D,QFSgB,AKtBZ,CDmBK,G1B+DG,U2BlFA,GAAG,G3BkFa,EAAE,CsB5DL,GAAjB,CKtBQ,GHawB,GGbd,E3BkFiB,CsB5DjB,GAA+B;AEPzD,YxBoEY,AsB5DA,AKtBJ,CDkBO,GJIC,AKtBJ,E3BkFM,EAAE,A2BlFJ,CAAC,GAAG,CAAC,K3BkFS,CAAC,A2BlFJ,CAAC,GLsBJ,AKtBO,CLsBN,CtB4DY,A2BlFJ,EAAE,CLsBN,CAAC,SAAS,CAAC,EAAE;IERR,KxBqEzB,CAAC,CAAA,C0BhEE,IJII,AKtBJ,ADkBM,IJIE,CAAC,AKtBL,ADkBO,CClBN,EDkBS,KJIG,CAAC,AKtBL,CAAC,CDkBQ,CClBP,ADkBQ,KAAK,CJID,AIJE,CJID,CIJG,CAAC,EJIA,AETmB,AGbzB,CLsBO,CKtBL,CAAC,EAAC,CAAC,CAAA,GLsBW,CAAC,CAAA;IEuCnD,IxBsBI,K2BlFC,GLsBO,EtB4DE,CAAC,A0BhEA,CJIC,CAAC,KtB4DK,AwBtBV,CxBsBW,GsB5DG,CEsCF,EFtCK,ItB4DN,EAAE,WsB5DW,AIJQ,CJIR,4CIJ6B,CAAC,GAAG,EAAE,GAAG,CAAG,CAAA;QF0C7E,IxBuBQ,A0BhEA,CJIC,GtB4DK,C2BnFH,GH6DP,AE1CY,CAAC,KAAK,CAAC,E1BgEI,A0BhEF,CAAC,E1BgEI,C0BhED,KF0CnB,AE1CwB,CAAA,IF0CnB,CxBsB2B,AwBtB1B,CxBsB2B,GAAG,CAAC,EAAE,CAAC,CAAA,AwBTjD;QAwEgB,IxB9DT,AsB5DA,AIJA,I1BgEI,AsB5DA,AKvBJ,CDmBI,CF8HS,AE9HR,GF8HyB,AGjJ1B,CAAC,CDmBK,EF8HwB,CE9HrB,EAAC,ECnBD,CAAC,CDmBI,CCnBH,K3BmFA,AsB5DA,AIJG,C1BgEF,AsB5DA,CIJI,EJID,CAAC,CKvBM,CLuBJ,AIJG,CCnBG,KAAI,C3BmFH,AwB8DiB,AGjJb,ADmBR,C1BgEK,CwB8DkB,AE9HtB,CF8HsB,AE9HtB,ECnBY,CAAC,MAAM,GAAG,CAAC,EAAC,CAAC,CAAA;QHqJ1C,CEjIZ,ICnBA,G3BmFO,AsB5DA,ME6Ha,CxBjEP,AsB5DA,EE6HU,mCAAgB,CAAU,aAAa,CAAC,CAAA;QACnD,AGpJjB,CAAC,CAAA,E3BmFO,CsB5DC,OE6Hc,GAAG,IxBjEH,CAAC,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA,AwBiEX,CAAQ,WAAW,CAAC,CAAA;IEjI9D,CAAC,GF8LgB,AG7Mb,I3BgFI,AsB5DA,CKpBA,CAAC,ELoBK,GAAG,AKpBH,GLoBe,AKpBZ,GLoBe,ItB4DP,AwB6HO,CxB7HN,EwB6HyB,IAAI,CFzLX,ItB4DP,CAAC,AsB5DW,CAAC,SAAS,EtB4DT,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,KwB6HS,CAAC,CAAC,CAAC,CAAA,IxB7HC,CAAC,CAAA;I0BnH3E,I1BoHI,AwB1BA,CxB0BC,CAAC,CAAA,C2BhFE,CHsDA,CAAC,EFlCG,CAAC,AKpBA,CLoBC,CKpBC,GHsDE,GAAG,AGtDC,CLoBC,AKpBA,CLoBC,SKpBS,ELoBE,CAAC,GAAG,CAAC,GIxDtB,GAAjB;Q1BsHI,A0BtHJ,IF2FQ,AGtDA,G3BiFG,CsB7DC,CAAC,CAAC,AKpBA,C3BiFC,C2BjFC,CLoBC,AEkCA,CFlCA,CEkCE,EEnFlB,CC6BqB,CAAC,IHsDI,CAAC,CxB2BC,CACrB,I2BlF0B,OHsDO,CAAC,CxB4BrB,IwB5B0B,CAAC,cxB6BpC,UAAU,GACd,YAAY,EACZ,eAAe,EACf,iBAAiB,CACpB,CAAA;IACL,CAAC,G0B5HG,IJyDI,AEkCA,AGtDA,ADrCA,CAAC,GJyDG,GEkCG,EAAE,AE3FA,ECqCE,CDrCC,CCqCC,CAAC,GHsDG,CAAC,KFlCN,AIzDW,CJyDV,AIzDW,GJyDR,CAAC,EAAE,CEkCY,CAAC,KAAK,CAAC;IxBmCvC,K2BxFF,CAAA,EHsDG,AE3FA,IJyDI,AIzDA,IJyDI,AEkCA,CFlCC,AIzDD,CF2FE,AE3FD,IF2FK,CE3FA,CAAC,CJyDE,AEkCA,CFlCC,CEkCyB,CE3FxB,G1B6Hd,EsBpEoB,AIzDD,C1B6HhC,AsBpEkC,GAAG,CAAC,CAAA,AIzDA,K1B6HxB,iBAA4C;QAChD,CwBlCL,CAAA,ExBkCK,IsBpEE,AIzDA,IJyDI,CtBoE2C,AsBpE1C,EtBoEN,A0B7HO,OJyDQ,GAAG,GAAG,CAAA,UtBoEZ,EAAE,oBAAO,EAAE,kCAAc,EAAE,cAAI,CAAQ;I2BxF3D,CAAC,G3B0FG,AwBlCA,IAAM,AE5FF,CJyDC,GIzDK,EF4FE,EE5FE,CF4FC,EE5FE,E1B8HA,CAAC,OAAO,A0B9HE,C1B8HD,A0B9HE,EAAC,KAAK,EAAE,C1B8HV,EAAE,MwBlCC,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,AE5FR,CF4FS,AE5FR,CAAC,EAAE,EF4FU,AE5FR,CF4FS,AE5FR,EAAC,CAAC,CAAA,EF4FY,GAAG,CAAC,CAAC,CAAC,CAAA;IGvFxF,ILqDI,AEmCA,CFnCC,GtBqEG,AwBlCE,AE5FF,I1B8HI,K0B9HK,CAAC,CF4FG,ExBkCA,A2B1Hf,C3B0HgB,AwBlCE,CE5FF,CCItB,ADJuB,C1B8HE,CAAC,EAAE,CAAC,A0B9HD,CAAC,EAAE,CAAC,GAAG,IAAI,CAAA,cF4FA,CAAC,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;QFlClF,AEmCI,AGxFM,IHwFA,AGxFA,ADJF,I1B8HI,CwBlCG,AE5FH,CJyDX,AIzDY,EF4FK,ExBkCA,IAAI,A0B9HD,CCI8B,ADJ7B,ECIX,ADJY,IAAI,EF4FH,CAAC,GE5FE,EF4FG,AE5FF,CF4FG,AE5FF,CAAA,ECIb,EHwFoB,AGxFlB,EHwFoB,CxBkCQ,CAAC,EAAE,CAAC,CAAA,IwBlCZ,KAAK,CGxFnB,EAAE,CHwFqB,OAAA,MAAM,CAAC,OAAO,CAAC,KAAK,AGxF9B,CHwF+B,AGxFjB,EHwFJ,CAAqB,CAAC,CAAA;IFnCrE,CA3DA,AA2DC,CA3DiB,EtBiId,AwBlCA,AGvFA,ADLA,C1B8HC,A0B9HA,C1B8HC,CAAA,AsBjIiB,AIGhB,CJHiB,AE+Fd,GGvFC,GHuFK,GAAG,IF/FkB,GA2DpC,OKnDW,CHuFa,CAAK,eAAM,CAAC,GE5FT,CAAC,CF4Fa,EAAE,CE5FX,CCKT,CDLW,IAAI,CAAC,CAAC,CF4FG,AE5FH,KF4FQ,IAAI,IGvF5B,GHuF4B,IGvFrB,CHuF0B,CAAC,AGvFzB,MHuF+B,GAAG,WAAW,EAA1B,CAA0B,CAAC,EAAE,CAAC,CAAC,CAAA,EGvFpC,IACnB,EAAC,KAAK,OAAA,EAAE,MAAM,QAAA,EAAE,UAAU,YAAA,EAAE,WAAW,aAAA,EAAC,IAC5C,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAG,CAAA;ILmDnD,AKlDA,ADPA,CCOC,ADPA,G1B+HG,AsBtEA,AEmCA,CFnCC,GEmCK,QAAQ,GAAG,CFnCR,CAAC,SAAS,CAAC,EAAE,aEmCO,CAAC,MAAM,EAAE,CAAC,EAAE,GxBmCd,CAAC,CwBnCkB,CAAC,MAAM,EAAE,IxBmCb,EAAE,AwBnCiB,CAAC,CAAA,exBmCD,CAAC,MAAM,CAAC,CAAA;I2BtHzE,ADPA,I1B8HI,AsBtEA,AEmCA,IxBmCI,CAAC,AwBnCD,CAAC,KAAK,CxBmCE,EwBnCC,EAAC,IFnCM,CAAC,CEmCD,EFnCI,EAAE,EKjDb,EHoFO,CGpFxB,C3BuHuB,AwBnCG,GFnCoB,CAAC,CAAA,CEmCf,CxBmCF,EAAK,A0B9Hf,GAApB,EF2FgC,EAAE,QAAQ,ExBmCU,CAAC,CAAA,MwBnCX,EAAE,aAAa,EAAE,IAAI,EAAC,CAAA;KFlC/D,GtBsEG,A2BxHJ,ADNI,I1B8HM,S0B9HO,CAAC,E1B8HI,C2BlHrB,CDZqB,C1B8HG,A0B9HF,I1B8HM,GAAG,CAAC,A0B9HF,CAAC,CAAA,O1B8HU,CAAC,CAAA;IsBpE3C,AEiCA,AE1FA,CF0FC,AE1FA,G1B8HG,A2BxHA,GLmDG,GAAG,AKnDA,CLmDA,AKnDC,U3BwHU,CAAC,K2BxHK,CAAC,C3BwHC,CAAC,M2BxHM,EAAE,E3BwHP,EAAE,EAAE,KAAK,IAAK,OAAA,YAAY,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC,EAAlC,CAAkC,CAAC,CAAA;AsBpEpF,CAAC,GE7BU,AE3BP,I1B6HI,IAAI,A2BxHA,C3BwHC,G2BxHK,KAAK,C3BwHD,E2BxHI,C3BwHD,K2BxHO,CAAC,EHsBhB,EE3BP,CF2BN,CxBkGiC,CAAA,A0B7HjC,GCKuC,CAAA;ALlB3C,QtB4IQ,AwBnGM,AE3BN,IF2BM,AGtBF,G3ByHG,A0B9HA,CCKG,G3ByHC,CAAA,E2BzHK,GAAG,KLkD1B,CKlDgC,CAAC,MHsBmE,EAAtF,GGtB8B,CAAA,ADLzB,KAAK,EAAE,WF2BJ,EAAE,gCAAa,EAAE,0BAAU,EAAE,0BAAU,EAAE,8BAAY,CAAyB;IxBoGjG,CAAC,GwBnGS,IAAA,AGtBF,IDLA,CCKI,CAAC,GHsB4C,EAA9C,AE3BI,EAAE,CCKI,CAAC,EAAC,GDLC,ECKI,KHsBZ,EAAE,AGtBU,EAAE,MAAM,QHsBb,AGtBa,EHsBX,AGtBY,CAAC,CAAA,oBHsBL,EAAE,kCAAc,CAAQ;IxBqGlD,IwBpGI,AGtBP,CAAC,CAAC,CAAA,CHsBK,IE3BH,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,C1B+Hb,AwBpGK,EAAE,CxBoGpB,C0B/H+B,S1B+HjB,QwBpGW,CxBoG4B,CwBpG1B,qBAAM,CAAS;IGrB1C,CAAC,G3B0HS,AwBpGC,IxBoGD,AwBpGC,IE3BH,K1B+HkD,EAA/C,Q0B/HY,EAAE,IF2BN,EAAE,CE3BW,O1B+HZ,EAAE,WwBpGK,EAAE,iBxBoGK,EAAE,gBwBpGM,CAAS,iBxBoGD,CAAQ;I2BxG9D,I3B0GQ,AwBpGA,IAAM,GGNb,CDtBW,C1BgIK,CAAC,IwBpGM,EE5BJ,C1BgIK,AwBpGE,CxBoGD,A0BhIJ,U1BgII,EwBpGc,AE5BN,G1BgIH;A2B1G/B,CArCA,AA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","file":"9da1f22267b6c295272a7b7fd7c852e0.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\n\nexport function cloneFastBinaryIndexedTree(source: FastBinaryIndexedTree): FastBinaryIndexedTree {\n    const target = new FastBinaryIndexedTree({\n        defaultFrequency: source.defaultFrequency,\n        maxVal: source.maxVal\n    })\n\n    target['_tree'] = {...source['_tree']}\n    target['_countNeg'] = source['_countNeg']\n\n    return target\n}\n","import {notExisting} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: Maybe<A>, defaultValue: A): A {\n    return notExisting(maybe) || Number.isNaN(maybe) ? defaultValue : maybe\n}\n\n","import FastBinaryIndexedTree = require('fast-binary-indexed-tree')\n\nexport function expandFastBinaryIndexedTree(\n    source: FastBinaryIndexedTree,\n    increasedSize: number\n): void {\n    increasedSize = Math.round(increasedSize)\n    if (increasedSize <= 0)\n        return\n\n    const emptyTree = new FastBinaryIndexedTree({\n        maxVal: source.maxVal + increasedSize,\n        defaultFrequency: source.defaultFrequency\n    })\n\n    source['_maxVal'] = emptyTree['_maxVal']\n    source['_msb'] = emptyTree['_msb']\n}\n","export const nothing: nothing = null\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\nimport {notExisting} from '../typecheck/existing'\nimport {cloneFastBinaryIndexedTree} from '../utils/cloneFastBinaryIndexedTree'\nimport {ensure} from '../utils/ensure'\nimport {expandFastBinaryIndexedTree} from '../utils/expandFastBinaryIndexedTree'\nimport {nothing} from '../utils/nothing'\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout} from './ListLayout'\n\nexport class ListLayoutImpl implements ListLayout {\n    public static create(itemIDs: ReadonlyArray<ListItemID>,\n                         defaultHeight: px = 100,\n                         heights: ReadonlyMap<ListItemID, px> = new Map()): ListLayout {\n        const idToIndex = new Map()\n        itemIDs.forEach((id, index) => {\n            if (idToIndex.has(id))\n                throw new DuplicateListItemIDError(id)\n            idToIndex.set(id, index)\n        })\n\n        const prefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: defaultHeight,\n            maxVal: itemIDs.length\n        })\n\n        const knownHeights = new Map()\n        heights.forEach((height, id) => {\n            if (!idToIndex.has(id))\n                return\n            knownHeights.set(id, height)\n            prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            [...itemIDs],\n            idToIndex,\n            knownHeights,\n            prefixSumIndex\n        )\n    }\n\n    public getByID(id: ListItemID): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const index = this.idToIndex.get(id)\n        if (notExisting(index)) { return nothing }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndex(index: number): Maybe<ListItemPosition> {\n        if (this.size === 0) { return nothing }\n        const id = this.itemIDs[index]\n        if (notExisting(id)) { return undefined }\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByIndexRange(from: number, to: number): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByIndex(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByIndex(to), this.getByIndex(this.size - 1)!)\n        const results: Array<ListItemPosition> = []\n        for (let i = fromItem.index; i <= toItem.index; i++) {\n            results.push(this.getByIndex(i)!)\n        }\n        return results\n    }\n\n    public getByOffset(position: px): Maybe<ListItemPosition> {\n        if (this.size === 0) { return undefined }\n        let bound = this.prefixSumIndex.upperBound(position)\n        const index = bound === this.size ? bound - 1 : bound\n        const id = this.itemIDs[index]\n        const offset = this.prefixSumIndex.read(index)\n        const height = this.prefixSumIndex.readSingle(index)\n        return {id, index, offset, height}\n    }\n\n    public getByOffsetRange(from: px, to: px): Array<ListItemPosition> {\n        if (this.size === 0) {return []}\n        const fromItem = ensure<ListItemPosition>(this.getByOffset(from), this.getByIndex(0)!)\n        const toItem = ensure<ListItemPosition>(this.getByOffset(to), this.getByIndex(this.size - 1)!)\n        const results: Array<ListItemPosition> = []\n        for (let i = fromItem.index; i <= toItem.index; i++) {\n            results.push(this.getByIndex(i)!)\n        }\n        return results\n    }\n\n    public clone(newDefaultHeight?: px): ListLayout {\n        const {itemIDs, idToIndex, knownHeights, defaultHeight, prefixSumIndex} = this\n\n        newDefaultHeight = ensure(newDefaultHeight, defaultHeight)\n        const newKnownHeights = new Map(knownHeights)\n        const newPrefixSumIndex = cloneFastBinaryIndexedTree(prefixSumIndex)\n\n        return new ListLayoutImpl(\n            newDefaultHeight,\n            itemIDs,\n            idToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    public join(newItemIDs: ReadonlyArray<ListItemID>): ListLayout {\n        const {defaultHeight, knownHeights} = this\n\n        const newIDToIndex = new Map()\n        newItemIDs.forEach((id, index) => newIDToIndex.set(id, index))\n\n        const newKnownHeights = new Map()\n        const newPrefixSumIndex = new FastBinaryIndexedTree({\n            defaultFrequency: defaultHeight,\n            maxVal: newItemIDs.length\n        })\n        newItemIDs.forEach(id => {\n            const currentHeight = knownHeights.get(id)\n            if (notExisting(currentHeight))\n                return\n            newKnownHeights.set(id, knownHeights.get(id))\n            newPrefixSumIndex.writeSingle(newIDToIndex.get(id)!, currentHeight)\n        })\n\n        return new ListLayoutImpl(\n            defaultHeight,\n            [...newItemIDs],\n            newIDToIndex,\n            newKnownHeights,\n            newPrefixSumIndex\n        )\n    }\n\n    public append(additionalItemIDs: ReadonlyArray<ListItemID>): this {\n        const {idToIndex, itemIDs, prefixSumIndex, size} = this\n\n        additionalItemIDs.forEach(id => {\n            if (idToIndex.has(id))\n                throw new DuplicateListItemIDError(id)\n        })\n\n        expandFastBinaryIndexedTree(prefixSumIndex, additionalItemIDs.length)\n        this.itemIDs = [...itemIDs, ...additionalItemIDs]\n        const newIDToIndex = new Map(idToIndex)\n        additionalItemIDs.forEach((id, index) => newIDToIndex.set(id, index + size))\n        this.idToIndex = newIDToIndex\n\n        return this\n    }\n\n    public update(newShapes: ReadonlyArray<ListItemShape>): this {\n        const {idToIndex, knownHeights, prefixSumIndex} = this\n\n        newShapes.forEach(shape => {\n            const {id, height} = shape\n\n            knownHeights.set(id, height)\n            prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\n        })\n\n        return this\n    }\n\n    public get size(): number { return this.itemIDs.length }\n\n    public get totalHeight(): px { return this.prefixSumIndex.read(this.itemIDs.length) }\n\n    private constructor(\n        private readonly defaultHeight: px,\n        private itemIDs: ReadonlyArray<ListItemID>,\n        private idToIndex: ReadonlyMap<ListItemID, number>,\n        private readonly knownHeights: Map<ListItemID, px>,\n        private readonly prefixSumIndex: FastBinaryIndexedTree\n    ) {}\n}\n\nexport class DuplicateListItemIDError extends Error {}\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        {publish: createPublishers<Required<T>>(subjects)},\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {Observable} from 'rxjs/Observable'\n\nexport type Pipe<A, B=A> = (source: Observable<A>) => Observable<B>\n\nexport type Pass<T> = Pipe<T, T>\nexport const Pass = <T>(observable: Observable<T>): Observable<T> => observable\n\n","export function isFalse(value: any): value is false {\n    return value === false\n}\n","export function isTrue(value: any): value is true {\n    return value === true\n}\n","export function isFunction(a: any): a is Function {\n    return typeof a === 'function'\n}\n","import {notExisting} from '../typecheck/existing'\nimport {isFunction} from '../typecheck/isFunction'\nimport {nothing} from './nothing'\n\nexport function assume<A, B>(a: Maybe<A>, func: (a: A) => B): Maybe<B>\nexport function assume<A, B, C>(a: Maybe<A>, b: Maybe<B>, func: (a: A, b: B) => C): Maybe<C>\nexport function assume<T>(...params: Array<Maybe<any> | ((...p: Array<Maybe<any>>) => T)>): Maybe<T> {\n    const func = params[params.length - 1]\n    const funcParams = params.slice(0, params.length - 1)\n    if (!isFunction(func) || funcParams.length < 1 || funcParams.some(notExisting)) {\n        return nothing\n    }\n    return func(...funcParams)\n}\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","export type Pulse = any\nexport let Pulse: Pulse = true\n","import {notExisting} from '../typecheck/existing'\nimport {nothing} from './nothing'\n\nexport function calcSum(array: Array<number>): number {\n    return array.reduce((acc, curr) => acc + curr, 0)\n}\n\nexport function calcAverage(array: Array<number>): Maybe<number> {\n    if (array.length === 0)\n        return nothing\n    return calcSum(array) / array.length\n}\n\nexport function nearestToAverage(array: Array<number>): Maybe<number> { // TODO better name\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    const sorted = array.sort((a, b) => Math.abs(a - average) - Math.abs(b - average))\n    return sorted[0]\n}\n\nexport function calcDeviation(array: Array<number>): Maybe<number> {\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    return calcAverage(array.map(num => Math.abs(num - average)))\n}\n\n\n","export async function forDuration(duration: ms): Promise<void> {\n    return new Promise<void>((then) => setTimeout(then, duration))\n}\n","export async function nextAnimationFrame(): Promise<undefined> {\n    return new Promise(resolve => requestAnimationFrame(resolve)) as Promise<any>;\n}\n","// https://stackoverflow.com/a/44078785/1815491\nexport function uniqueID() {\n    return Math.random().toString(36).substring(2)\n        + (new Date()).getTime().toString(36);\n}\n","// ignoring rotate\r\n\r\nexport function calcOutline(dom: Element): Outline {\r\n    const rect = dom.getBoundingClientRect()\r\n\r\n    const {width, height} = rect\r\n    const x = rect.left\r\n    const y = rect.top\r\n\r\n    return {x, y, width, height}\r\n}\r\n","import {scale} from 'transformation-matrix/scale'\nimport {transform} from 'transformation-matrix/transform'\nimport {translate} from 'transformation-matrix/translate'\n\nexport function intermediateTransform(from: Outline, to: Outline): Matrix {\n    const centerOf = (rect: Outline): Point => {\n        return {\n            x: rect.x + rect.width * 0.5,\n            y: rect.y + rect.height * 0.5\n        }\n    }\n    const fromMiddle = centerOf(from)\n    const toMiddle = centerOf(to)\n\n    const matrix = transform(\n        translate(toMiddle.x - fromMiddle.x, toMiddle.y - fromMiddle.y),\n        scale(to.width / from.width, to.height / from.height)\n    )\n\n    return matrix\n}\n\n","import {inverse} from 'transformation-matrix/inverse'\r\nimport {toCSS} from 'transformation-matrix/toString'\r\nimport {isFunction} from '../typecheck/isFunction'\r\nimport {forDuration} from '../utils/forDuration'\r\nimport {nextAnimationFrame} from '../utils/nextAnimationFrame'\r\nimport {uniqueID} from '../utils/uniqueID'\r\nimport {calcOutline} from './calcOutline'\r\nimport {intermediateTransform} from './intermediateTransform'\r\n\r\nexport async function tweenHere(\r\n    element: HTMLElement,\r\n    from: Outline | ((current: Outline, to: Outline) => Outline) = current => current,\r\n    duration: ms | ((from: Outline, target: Outline) => ms) = 200,\r\n    easing: Easing = [0, 0, 1, 1]\r\n): Promise<void> {\r\n    const tweeningID = uniqueID()\r\n    tweening.set(element, tweeningID)\r\n\r\n    const current = calcOutline(element)\r\n\r\n    const to = current // calcOutlineOrigin(element)\r\n    from = isFunction(from) ? from(current, to) : from\r\n\r\n    const transform = intermediateTransform(from, to)\r\n    duration = isFunction(duration) ? duration(from, to) : duration\r\n    element.style.transition = 'none'\r\n    element.style.transform = toCSS(inverse(transform))\r\n\r\n    await nextAnimationFrame()\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `\r\n        opacity ${duration}ms cubic-bezier(${easing.join(',')}),\r\n        transform ${duration}ms cubic-bezier(${easing.join(',')})\r\n    `\r\n    element.style.transform = 'none'\r\n\r\n    await forDuration(duration)\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `none`\r\n    tweening.delete(element)\r\n}\r\n\r\nconst tweening: WeakMap<Element, TweenID> = new WeakMap()\r\n\r\ntype TweenID = string\r\n\r\n","import {ensure} from '../../../../utils/ensure'\n\nexport function calcFocusOffset(focusOffset: Maybe<px>, viewportHeight: px): px {\n    return ensure<px>(focusOffset, viewportHeight / 3)\n}\n","import {ListItemPosition, ListLayout} from '../../../../layouts/ListLayout'\nimport {existing} from '../../../../typecheck/existing';\n\nconst pageSize = 10\n\nexport function calcSegments(scroll: px, preload: px,\n                             height: px, layout: ListLayout): Array<ListItemPosition> {\n    const segments: Array<ListItemPosition> = []\n\n    const floorSeg = layout.getByOffset(\n        Math.max(\n            Math.min(\n                scroll - height,\n                scroll + preload\n            ),\n            0\n        )\n    )\n    const ceilSeg = layout.getByOffset(\n        Math.min(\n            Math.max(\n                scroll + height + height,\n                scroll + height + preload\n            ),\n            layout.totalHeight\n        )\n    )\n    if (existing(floorSeg) && existing(ceilSeg)) {\n        const fromIndex = Math.floor(floorSeg.index / pageSize) * pageSize\n        const toIndex = Math.min(\n            Math.ceil(ceilSeg.index / pageSize) * pageSize,\n            layout.size - 1\n        )\n        for (let index = fromIndex; index <= toIndex; index++) {\n            segments.push(layout.getByIndex(index)!)\n        }\n    }\n\n    return segments\n}\n","import {ListLayout} from '../../../../layouts/ListLayout'\nimport {notExisting} from '../../../../typecheck/existing'\nimport {assume} from '../../../../utils/assume'\n\nexport function projectScroll(scroll: px, focusOffset: px, from: ListLayout, to: ListLayout): px {\n    const prev = from.getByOffset(scroll + focusOffset)\n    const curr = assume(prev, prev => to.getByID(prev.id))\n    if (notExisting(prev) || notExisting(curr))\n        return scroll\n    const prevHeightBeforeFocus = scroll + focusOffset - prev.offset\n    const currHeightBeforeFocus = (prevHeightBeforeFocus / prev.height) * curr.height\n    return curr.offset - (focusOffset - currHeightBeforeFocus)\n}\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {isString} from 'util';\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\n\nexport function measuring<C extends React.ComponentClass<any> | keyof React.ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                {ref: (it: any) => this.updateRef(it)}\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<C> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateRef(ref: Maybe<React.ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if (notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if (!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends React.ComponentClass<any> | keyof React.ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import sharedInstance from 'jss'\nimport * as React from 'react';\nimport {ListItemShape} from '../../../layouts/ListLayout'\nimport {measuring, Measuring} from '../../../react/measure/measuring'\nimport {PropsOf} from '../../../react/PropsOf';\nimport {existing} from '../../../typecheck/existing'\nimport {Segment} from './types/Segment'\n\nexport class MeasuredSegment extends React.PureComponent<Props> {\n    render() {\n        const {id, width} = this.props\n        const {Segment} = this\n        return <Segment id={id} width={width} onHeightChange={this.reportHeight}/>\n    }\n\n    private reportHeight = (height: px) => {\n        const id = this.props.id\n\n        if (existing(this.props.onHeightChange)) {\n            this.props.onHeightChange({id, height})\n        }\n    }\n\n    constructor(props: Props) {\n        super(props)\n        this.Segment = measuring(props.Segment)\n    }\n\n    private Segment: Measuring<Segment>\n}\n\ntype Props = PropsOf<Segment>\n    & { Segment: Segment }\n    & { onHeightChange: EventHandler<ListItemShape> }\n\nconst classes = sharedInstance.createStyleSheet({\n    mask: {\n        display: 'block',\n        contain: 'content',\n        height: 'auto',\n        willChange: 'height'\n    }\n}).attach().classes\n","import sharedInstance from 'jss'\r\nimport * as React from 'react'\r\nimport {CSSProperties} from 'react'\r\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {interval} from 'rxjs/observable/interval'\r\nimport {\r\n    bufferCount,\r\n    bufferTime,\r\n    combineLatest,\r\n    distinctUntilChanged,\r\n    filter,\r\n    map,\r\n    merge,\r\n    pairwise,\r\n    sampleTime,\r\n    scan,\r\n    shareReplay,\r\n    startWith,\r\n    timestamp,\r\n    withLatestFrom\r\n} from 'rxjs/operators'\r\nimport {animationFrame} from 'rxjs/scheduler/animationFrame'\r\nimport {Subscription} from 'rxjs/Subscription'\r\nimport {Memoize} from 'typescript-memoize'\r\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout} from '../../layouts/ListLayout'\r\nimport {ListLayoutImpl} from '../../layouts/ListLayoutImpl'\r\nimport {createDispatcher} from '../../rxjs/createDispatcher'\r\nimport {Pass} from '../../rxjs/Pipe';\r\nimport {Pipes} from '../../rxjs/Pipes'\r\nimport {existing} from '../../typecheck/existing'\r\nimport {isFalse} from '../../typecheck/isFalse';\r\nimport {isTrue} from '../../typecheck/isTrue';\r\nimport {assume} from '../../utils/assume'\r\nimport {ensure} from '../../utils/ensure'\r\nimport {nothing} from '../../utils/nothing'\r\nimport {publishAll} from '../../utils/publishAll'\r\nimport {Pulse} from '../../utils/Pulse'\r\nimport {calcAverage, nearestToAverage} from '../../utils/statics';\r\nimport {tweenHere} from '../../view/tweenHere'\r\nimport {calcFocusOffset} from './src/functions/calcFocusOffset'\r\nimport {calcSegments} from './src/functions/calcSegments'\r\nimport {projectScroll} from './src/functions/projectScroll'\r\nimport {MeasuredSegment} from './src/MeasuredSegment';\r\nimport {Segment} from './src/types/Segment'\r\nimport {SegmentID} from './src/types/SegmentID'\r\nimport deepEqual = require('deep-equal')\r\n\r\nexport class InfiniteList extends React.Component<Props, State> {\r\n    public render(): JSX.Element {\r\n        const {scrolled, heightUpdated, touchEnded, touchMoved, touchStarted} = this.actions$.publish\r\n        const {state, props, children, temporalScroll} = this\r\n        const {Segment, width, height} = props\r\n        const {segments, layout, useAutoLayout} = state\r\n\r\n        const paddingTop = useAutoLayout\r\n            ? <div key={'infinite-scroll-padding-top'}\r\n                   style={{height: existing(segments[0]) ? segments[0].offset : 0}}/>\r\n            : nothing\r\n\r\n        const contentStyle = {\r\n            width,\r\n            height: layout.totalHeight,\r\n            transform: temporalScroll === 0\r\n                ? 'none'\r\n                : `translateY(${-temporalScroll}px)`\r\n        }\r\n        const segmentStyle = (offset: px): CSSProperties => {\r\n            return useAutoLayout\r\n                ? {position: 'relative'}\r\n                : {position: 'absolute', top: `${offset}px`}\r\n        }\r\n\r\n        return <div className={classes.container} style={{width, height}}\r\n                    ref={ref => existing(ref) ? children.container = ref : nothing}\r\n                    onScroll={scrolled}\r\n                    onTouchStartCapture={touchStarted}\r\n                    onTouchEndCapture={touchEnded}\r\n                    onTouchMoveCapture={touchMoved}>\r\n            <div className={classes.content} style={contentStyle}\r\n                 ref={ref => existing(ref) ? children.content = ref : nothing}>\r\n                {paddingTop}\r\n                {segments.map(spec =>\r\n                    <div key={spec.id} className={classes.segment}\r\n                         style={segmentStyle(spec.offset)}\r\n                         ref={ref => existing(ref)\r\n                             ? children.segments.set(spec.id, ref)\r\n                             : children.segments.delete(spec.id)}>\r\n                        <MeasuredSegment {...{id: spec.id, Segment, width}}\r\n                                         onHeightChange={heightUpdated}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.children = {\r\n            container: document.createElement('div'),\r\n            content: document.createElement('div'),\r\n            segments: new Map<SegmentID, HTMLElement>()\r\n        }\r\n\r\n        const layout = ListLayoutImpl.create(props.segmentIDs, Math.round(props.height / 6))\r\n        const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n        const focus = assume(props.focus, focus => layout.getByID(focus))\r\n        const scroll = ensure<px>(assume(focus, focus => focus.offset - focusOffset), 0)\r\n        const segments = calcSegments(scroll, 0, props.height, layout)\r\n        this.state = {scroll, layout, segments, useAutoLayout: true}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.children.container.scrollTop = this.state.scroll\r\n        this.work.add(this.updateState())\r\n        this.work.add(this.adjustScroll())\r\n        this.work.add(this.focusOnSegment())\r\n        this.work.add(this.callEventHandlers())\r\n        publishAll<Props>(this.props, this.props$.publish)\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {props, state, children} = this\r\n\r\n        if (prevProps !== props) {\r\n            publishAll<Props>(this.props, this.props$.publish)\r\n        }\r\n\r\n        if (prevState.layout !== state.layout) {\r\n            const {containerScroll, temporalScroll} = this\r\n            const prevScroll = containerScroll + temporalScroll\r\n\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const currScroll = Math.min(Math.max(projectScroll(\r\n                prevScroll, focusOffset,\r\n                prevState.layout, state.layout\r\n            ), 0), state.layout.totalHeight - props.height)\r\n\r\n            const expectedTemporalScroll = Math.ceil(currScroll - containerScroll)\r\n            if (Math.abs(temporalScroll - expectedTemporalScroll) > 1) {\r\n                this.temporalScroll = expectedTemporalScroll\r\n            }\r\n\r\n            if (!state.useAutoLayout && !prevState.useAutoLayout) {\r\n                Array.from(children.segments.entries())\r\n                    .forEach(([segmentID, element]) => {\r\n                        const prev = prevState.layout.getByID(segmentID)\r\n                        const curr = state.layout.getByID(segmentID)\r\n\r\n                        if (!existing(prev) || !existing(curr))\r\n                            return\r\n\r\n                        const prevScreenOffset = prev.offset - prevScroll\r\n                        const currScreenOffset = curr.offset - currScroll\r\n                        if (prevScreenOffset === currScreenOffset)\r\n                            return\r\n\r\n                        tweenHere(\r\n                            element,\r\n                            (current, to) => {\r\n                                return {\r\n                                    ...current,\r\n                                    y: prevScreenOffset - (to.y - current.y)\r\n                                }\r\n                            },\r\n                            (from, to) => {\r\n                                const diff = Math.abs(from.y - to.y) +\r\n                                    Math.abs(from.height - to.height)\r\n\r\n                                return Math.min(Math.min(diff, 100), 300)\r\n                            },\r\n                            [0.445, 0.05, 0.55, 0.95]\r\n                        )\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.work.unsubscribe()\r\n    }\r\n\r\n    private readonly work: Subscription = new Subscription()\r\n\r\n    private readonly children: Children\r\n\r\n    private readonly actions$ = createDispatcher<Actions>(actionsFilter)\r\n    private readonly props$ = createDispatcher<Props>(propsFilter)\r\n\r\n    @Memoize()\r\n    private get height$(): Observable<px> {\r\n        const {height} = this.props$\r\n\r\n        return height.pipe(\r\n            startWith(this.props.height),\r\n            distinctUntilChanged(),\r\n            // log$('height'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get layout(): Observable<ListLayout> {\r\n        const {segmentIDs} = this.props$\r\n        const {heightUpdated} = this.actions$\r\n\r\n        const updates$: Observable<Array<ListItemShape>> = heightUpdated.pipe(\r\n            bufferTime(0, animationFrame),\r\n            filter(buffer => buffer.length > 0)\r\n        )\r\n\r\n        const layout$: Observable<ListLayout> = segmentIDs.pipe(\r\n            scan<Array<ListItemID>, [Array<ListItemID>, ListLayout]>(\r\n                ([prevIDs, prevLayout], currIDs) => currIDs === prevIDs\r\n                    ? [currIDs, prevLayout]\r\n                    : [currIDs, prevLayout.join(currIDs)],\r\n                [this.props.segmentIDs, this.state.layout]\r\n            ),\r\n            map(([_, layout]) => layout),\r\n            startWith(this.state.layout),\r\n            distinctUntilChanged(),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return layout$.pipe(\r\n            combineLatest(updates$),\r\n            map(([layout, updates]): ListLayout => layout.update(updates).clone()),\r\n            distinctUntilChanged(),\r\n            // log$('layout'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    private get temporalScroll(): px {\r\n        const {temporalScroll$} = this\r\n        return (temporalScroll$ as BehaviorSubject<px>).getValue()\r\n    }\r\n\r\n    private set temporalScroll(scroll: px) {\r\n        const {temporalScroll$} = this\r\n        const {content} = this.children;\r\n\r\n        (temporalScroll$ as BehaviorSubject<px>).next(scroll)\r\n        content.style.transform = scroll === 0\r\n            ? 'none'\r\n            : `translateY(${-scroll}px)`\r\n    }\r\n\r\n    private readonly temporalScroll$: Observable<px> = new BehaviorSubject(0)\r\n\r\n    private get containerScroll(): px {\r\n        const {container} = this.children\r\n        return container.scrollTop\r\n    }\r\n\r\n    private set containerScroll(scroll: px) {\r\n        const {container} = this.children\r\n        container.style['-webkit-overflow-scrolling'] = 'auto'\r\n        container.scrollTop = scroll\r\n        container.style['-webkit-overflow-scrolling'] = 'touch'\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScroll$(): Observable<px> {\r\n        const {scrolled, touchStarted, touchEnded} = this.actions$\r\n\r\n        const shouldSample: Observable<Pulse> = scrolled.pipe(\r\n            merge(touchStarted),\r\n            merge(touchEnded),\r\n            merge(interval(0, animationFrame)),\r\n            timestamp(),\r\n            distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            sampleTime(0, animationFrame),\r\n            startWith(Pulse)\r\n        )\r\n\r\n        return shouldSample.pipe(\r\n            map(() => this.containerScroll),\r\n            map(Math.round),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScrollVelocity$(): Observable<Velocity> {\r\n        const {containerScroll$} = this\r\n\r\n        const move = containerScroll$.pipe(\r\n            timestamp(),\r\n            // distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            pairwise()\r\n        )\r\n\r\n        return move.pipe(\r\n            map(([prev, curr]) =>\r\n                (curr.value - prev.value) / (curr.timestamp - prev.timestamp)\r\n            ),\r\n            startWith(0),\r\n            bufferCount(3, 1),\r\n            map(nearestToAverage),\r\n            filter(existing),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get useAutoLayout$(): Observable<boolean> {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        return containerScrollVelocity$.pipe(\r\n            map(Math.abs),\r\n            map(speed => speed > 3),\r\n            bufferCount(2, 1),\r\n            map(buffer => buffer.filter(isTrue).length > buffer.filter(isFalse).length),\r\n            distinctUntilChanged(),\r\n            // log$('useAutoLayout'),\r\n            shareReplay(1)\r\n        )\r\n\r\n    }\r\n\r\n    @Memoize()\r\n    private get scroll$(): Observable<Velocity> {\r\n        const {containerScroll$, temporalScroll$} = this\r\n\r\n        return containerScroll$.pipe(\r\n            withLatestFrom(temporalScroll$),\r\n            map(([container, temporal]) => container + temporal)\r\n        )\r\n    }\r\n\r\n    private get velocity(): Velocity {\r\n        return this['_velocity']\r\n    }\r\n\r\n    private updateState(): Subscription {\r\n        const {scroll$, layout, containerScrollVelocity$, height$, useAutoLayout$} = this\r\n\r\n        const preload$: Observable<px> = containerScrollVelocity$.pipe(\r\n            bufferCount(3, 1),\r\n            map(calcAverage),\r\n            filter(existing),\r\n            map(Math.round),\r\n            map(velocity => Math.max(Math.min(velocity * 500, 10000), -10000)),\r\n            distinctUntilChanged(),\r\n            // log$('preload'),\r\n            shareReplay(1)\r\n        )\r\n\r\n        const state: Observable<State> = scroll$.pipe(\r\n            combineLatest(preload$, useAutoLayout$, layout, height$),\r\n            map(([scroll, preload, useAutoLayout, layout, height]): State => {\r\n                const segments = calcSegments(scroll, preload, height, layout)\r\n                return {layout, segments, useAutoLayout, scroll}\r\n            }),\r\n            distinctUntilChanged((prev, curr) =>\r\n                prev.useAutoLayout === curr.useAutoLayout &&\r\n                prev.layout === curr.layout &&\r\n                deepEqual(prev.segments, curr.segments)\r\n            ),\r\n            startWith(this.state),\r\n            // tap(state=> console.log(state.useAutoLayout)),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return state.subscribe(state => this.setState(state))\r\n    }\r\n\r\n    private adjustScroll(): Subscription {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        const shouldApplyTemporalScroll: Observable<Pulse> = containerScrollVelocity$.pipe(\r\n            bufferCount(2, 1),\r\n            filter(buffer => !buffer.some(v => Math.abs(v) > 0.01))\r\n        )\r\n\r\n        return shouldApplyTemporalScroll.subscribe(() => {\r\n            const {temporalScroll, containerScroll} = this\r\n            if (temporalScroll === 0)\r\n                return\r\n            // console.log('adjusted')\r\n            this.containerScroll = containerScroll + temporalScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private focusOnSegment(): Subscription {\r\n        const {props$} = this\r\n\r\n        const newFocusSegment = props$.focus.pipe(\r\n            distinctUntilChanged(),\r\n            filter(existing),\r\n            map(focus => this.state.layout.getByID(focus)),\r\n            filter(existing)\r\n        )\r\n\r\n        return newFocusSegment.subscribe(segment => {\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const targetScroll = segment.offset - focusOffset\r\n            this.containerScroll = targetScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private callEventHandlers(): Subscription {\r\n        const {scroll$, layout} = this\r\n\r\n        const work = new Subscription()\r\n\r\n        work.add(scroll$.subscribe(scroll => {\r\n            if (existing(this.props.onScroll))\r\n                this.props.onScroll(scroll)\r\n        }))\r\n        work.add(layout.subscribe(layout => {\r\n            if (existing(this.props.onReflow))\r\n                this.props.onReflow(layout)\r\n        }))\r\n\r\n        return work\r\n    }\r\n}\r\n\r\ntype Props = {\r\n    segmentIDs: Array<SegmentID>\r\n    width: px\r\n    height: px\r\n    Segment: Segment\r\n    focus?: SegmentID\r\n    focusOffset?: px\r\n    onScroll?: EventHandler<px>\r\n    onReflow?: EventHandler<ListLayout>\r\n}\r\nconst propsFilter: Pipes<Required<Props>> = {\r\n    segmentIDs: distinctUntilChanged(),\r\n    width: distinctUntilChanged(),\r\n    height: distinctUntilChanged(),\r\n    Segment: distinctUntilChanged(),\r\n    focus: distinctUntilChanged(),\r\n    focusOffset: distinctUntilChanged(),\r\n    onScroll: distinctUntilChanged(),\r\n    onReflow: distinctUntilChanged()\r\n}\r\n\r\ntype State = {\r\n    scroll: px\r\n    layout: ListLayout\r\n    segments: Array<ListItemPosition>\r\n    useAutoLayout: boolean\r\n}\r\ntype Children = {\r\n    container: HTMLElement\r\n    content: HTMLElement\r\n    segments: Map<SegmentID, HTMLElement>\r\n}\r\n\r\ntype Actions = {\r\n    scrolled: React.SyntheticEvent<HTMLDivElement>\r\n    touchStarted: React.TouchEvent<HTMLDivElement>\r\n    touchMoved: React.TouchEvent<HTMLDivElement>\r\n    touchEnded: React.TouchEvent<HTMLDivElement>\r\n    heightUpdated: ListItemShape\r\n}\r\nconst actionsFilter: Pipes<Actions> = {\r\n    scrolled: Pass,\r\n    touchStarted: Pass,\r\n    touchMoved: Pass,\r\n    touchEnded: Pass,\r\n    heightUpdated: Pass\r\n}\r\n\r\nexport const classes = sharedInstance.createStyleSheet({\r\n    container: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        'overflow-x': 'hidden',\r\n        'overflow-y': 'scroll',\r\n        'overflow-anchor': 'none', // https://stackoverflow.com/questions/42205462/disable-chromes-scroll-preserving-feature\r\n        'scroll-behavior': 'auto',\r\n        '-webkit-overflow-scrolling': 'touch',\r\n        contain: 'strict',\r\n        'will-change': 'transform', // https://bugs.chromium.org/p/chromium/issues/detail?id=514303\r\n        '-webkit-font-smoothing': 'subpixel-antialiased'\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        contain: 'strict',\r\n        'will-change': 'transform, height'\r\n    },\r\n    segment: {\r\n        display: 'block',\r\n        'will-change': 'top, height'\r\n    }\r\n}).attach().classes\r\n\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","import * as loremIpsum from 'lorem-ipsum'\r\nimport * as React from 'react';\r\nimport {PropsOf} from '../../../react/PropsOf';\r\nimport {ensure} from '../../../utils/ensure'\r\nimport {getRandomIntInclusive} from '../../../utils/getRandomIntInclusive'\r\nimport {Segment} from '../src/types/Segment';\r\n\r\nexport class SegmentExample extends React.Component<PropsOf<Segment>, State> {\r\n    componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            if (this.state.type !== 'text')\r\n                return\r\n            const text = loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[this.props.id] = text\r\n            this.setState({text})\r\n        }, getRandomIntInclusive(3000, 5000))\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval)\r\n    }\r\n\r\n    render() {\r\n        return <div style={{\r\n            display: 'block',\r\n            width: this.props.width,\r\n            backgroundColor: 'white',\r\n            wordWrap: 'break-word',\r\n            wordBreak: 'break-all'\r\n        }}>\r\n            <div>{this.props.id}</div>\r\n            <br/>\r\n            {\r\n                this.state.type === 'text'\r\n                    ? this.state.text\r\n                    : <img style={{width: this.props.width}} src={this.state.image}/>\r\n            }\r\n            <br/>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: PropsOf<Segment>) {\r\n        super(props)\r\n        const type = ensure(typeCache[props.id], Math.random() > 0.2 ? 'text' : 'image')\r\n        typeCache[props.id] = type\r\n\r\n        let state: State\r\n\r\n        if (type === 'text') {\r\n            let text = textCache[props.id] || loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[props.id] = text\r\n            this.state = {type, text}\r\n        } else {\r\n            const image = imgCache[props.id]\r\n                || `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`\r\n            imgCache[props.id] = image\r\n            this.state = {type, image}\r\n        }\r\n    }\r\n\r\n    private interval: any\r\n}\r\n\r\nconst typeCache: { [id: string]: 'text' | 'image' } = {}\r\nconst textCache: { [id: string]: string } = {}\r\nconst imgCache: { [id: string]: string } = {}\r\n\r\ntype State = { type: 'text', text: string }\r\n    | { type: 'image', image: string }\r\n\r\n\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom'\r\nimport ErrorBoundary from 'react-error-boundary'\r\nimport {InfiniteList} from '../InfiniteList'\r\nimport {SegmentID} from '../src/types/SegmentID'\r\nimport {SegmentExample} from './SegmentExample'\r\n\r\nconst segmentIDs: Array<SegmentID> = []\r\nfor (let i = 0; i < 100000; i++) {\r\n    segmentIDs.push(i.toString())\r\n}\r\n\r\nexport class Demo extends React.Component<{}, {\r\n    width: number,\r\n    height: number,\r\n    focusOffset: number\r\n}> {\r\n    render() {\r\n        const {width, height, focusOffset} = this.state\r\n\r\n        return <InfiniteList Segment={SegmentExample}\r\n                             {...{width, height, segmentIDs, focusOffset}}\r\n                             onScroll={this.onScroll}/>\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => {\r\n            const width = window.innerWidth\r\n            const height = window.innerHeight\r\n            this.setState({width, height})\r\n        })\r\n    }\r\n\r\n    onScroll = (scroll: px) => {\r\n        if (Math.abs(scroll) < 10) {\r\n            this.setState({focusOffset: 0})\r\n        } else {\r\n            this.setState({focusOffset: this.state.height / 3})\r\n        }\r\n    }\r\n\r\n    constructor(props: {}) {\r\n        super(props)\r\n        this.state = {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            focusOffset: 0\r\n        }\r\n    }\r\n}\r\n\r\nconst root = document.getElementById('root')!\r\nReactDOM.render(\r\n    <ErrorBoundary FallbackComponent={({componentStack, error}) =>\r\n        <pre style={{width: window.innerWidth, wordBreak: 'break-all'}}>\r\n            {JSON.stringify(componentStack, null, 4)}\r\n            {JSON.stringify(error, null, 4)}\r\n        </pre>\r\n    }>\r\n        <Demo/>\r\n    </ErrorBoundary>,\r\n    root\r\n)\r\n\r\n"]}