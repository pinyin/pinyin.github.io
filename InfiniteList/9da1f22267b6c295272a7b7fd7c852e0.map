{"version":3,"sources":["..\\..\\..\\typecheck\\existing.ts","..\\..\\..\\utils\\alternate.ts","..\\..\\..\\utils\\ensure.ts","..\\..\\..\\utils\\cloneFastBinaryIndexedTree.ts","..\\..\\..\\utils\\nothing.ts","..\\..\\..\\layouts\\ListLayoutImpl.ts","..\\..\\..\\rxjs\\applyMiddleware.ts","..\\..\\..\\rxjs\\createPublishers.ts","..\\..\\..\\rxjs\\createSubjects.ts","..\\..\\..\\rxjs\\createDispatcher.ts","..\\..\\..\\rxjs\\Pipe.ts","..\\..\\..\\typecheck\\isFalse.ts","..\\..\\..\\typecheck\\isTrue.ts","..\\..\\..\\typecheck\\isFunction.ts","..\\..\\..\\utils\\assume.ts","..\\..\\..\\utils\\publishAll.ts","..\\..\\..\\utils\\Pulse.ts","..\\..\\..\\utils\\statics.ts","..\\..\\..\\utils\\forDuration.ts","..\\..\\..\\utils\\nextAnimationFrame.ts","..\\..\\..\\utils\\uniqueID.ts","..\\..\\..\\view\\calcOutline.ts","..\\..\\..\\view\\intermediateTransform.ts","..\\..\\..\\view\\tweenHere.ts","..\\src\\calcFocusOffset.ts","..\\..\\..\\utils\\max.ts","..\\..\\..\\utils\\min.ts","..\\src\\calcSegments.ts","..\\..\\..\\react\\measure\\measuring.tsx","..\\src\\MeasuredSegment.tsx","..\\src\\projectScroll.ts","..\\InfiniteList.tsx","..\\..\\..\\utils\\getRandomIntInclusive.ts","SegmentExample.tsx","InfiniteList.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA4B,KAAkB;IAC1C,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;AACjF,ACFA,CDEC,iDCF6C;ADA9C,ACEA,mBAA6B,CAAI,EAAE,CAAI,KDAtC;AACD,AEHA,IDGI,OAAO,UDAoB,KAAe,ICA3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA,QCHgB;ADI9C,ACFA,CDEC,GDAG,OAAO,CAAC,IEFc,IFEN,CAAC,AEFa,EAAE,GFEV,CAAC,CAAA,OEFqC;AFGhE,ACHA,CDGC,GEFG,OAAO,mBDCV,ACDkB,CAAC,KAAK,CAAC;AFA1B,AGHA,QDIQ,CAAC,CAAC,KAAK,mBFCd,mCGL2D;AAC5D,ACDa,QFKL,AELK,CFKJ,CAAC,KELU,GAAY,IFKV,AELc,CFKd,AELc,YDCL;AAE/B,ADGA,CAAC,mCCFG,MAA6B,EAC7B,gBAAqB;ADHzB,ICKI,IAAM,MAAM,GAAG,IAAI,GDDtB,+BCC2C,CAAC;AEP7C,QFQQ,gBAAgB,EAAE,eAAM,CAAC,gBAAgB,EAAE,MAAM,CAAC,EERE,cFQc,CAAC;AEP3E,ACEA,QHMQ,MAAM,EAAE,MAAM,CAAC,EGLnB,IHKyB,EGLH,EAAE,KAAe,CDHR;AACnC,ICII,CHIC,CAAC,CAAA,IGJK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,oBDJ6B;AAC3D,AEDA,IJUI,KGLK,CHKC,CAAC,CGLC,CAAC,KHKK,CAAC,IGLN,GAAG,ACLmC,QAAqB,SJU9C,KETkB,CFSZ,CAAC,OAAO,CAAC,CAAC,CAAA;AER1C,IEDI,AJUA,IGNgB,EHMV,CIVC,AJUA,IGNS,ECJH,CAAC,IAAI,AJUA,CIVC,AJUA,EGND,CHMI,EGNH,GAAG,ACJK,CAAC,AJUA,CAAC,EGNJ,KAAK,CAAC,GAAG,AHMM,CGNL,AHMM,CGNL,AHMK,MGNC,CAAC,GAAG,CAAC,CAAC,KAAE,mBDHwB;AAC9E,AGLA,ILeI,KIXK,EJWE,CIXC,CAAC,IJWI,CAAA,KIXJ,GAAG,cCJoB,EHKE;AACtC,AGHA,ALaA,CAAC,GGTmB,CAAkC,CAAC,ECHnC,OAAA,SCD6B,CDC3B,GAAC,CCD2C,EDCxC,IAAG,SFEW,CEFV,KAAoB,IAAK,OAAA,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAzB,CAAyB,KAAE;AFKlF,AITA,ANGA,IKCI,KFIK,EEJE,IFII,CAAC,CEJC,CAAC,IAAI,CAAC,GFIN,EEJW,CAAC,CFIR,EAAE,IAAI,IAAK,OAAA,MAAM,AGRW,CHQV,MAAM,CAAC,GHQ7C,CGRiD,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CAAA;AACjE,AGRA,CHQC,GDoKG,AEzKgB,CAA8D,CAAC,GCC1E,GAAG,CAAC,UAAA,GAAG,aHwKuB,gBI5KY;ACItC,AJFb,AGDA,IJ4KI,IKzKS,AFAO,CDAX,GGAQ,GAAG,AHAL,ACAK,CDAJ,SGAQ,AFAF,CDAL,EF0KD,AG1KO,EDAF,CCAK,CDAH,GGA0B,AFApB,CDAF,GGA0C,AFApC,CDAD,CF0KC,CCtKhC,CDuKe,GK3KqD,CHArC,IEHe,CJ8KJ,CE3KL,CF4KtB,AE5KuB,EGAwC,AFAvC,EEA6B,AFA3B,CEAqC,CAAA,AHAlC,CAAC,EF4KI,AG5KN,EH6K5B,AE7KkC,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAQ,CF6KhB,AE7KgB,EF8KjD,cAAqC;AI7KrD,AFAA,CAAC,OFyKe,kBAAa,AIxKzB,GJwKY,OIxKkB,MJwKL,CAAI;AE7KjC,AIFA,IFSI,ADJgB,CAAwB,CAAC,EH2K7B,AIvKN,QAAQ,CETM,EFSH,GJuKI,AMhLS,GNgLlB,SAAS,CAAkB,SE1K1C,MEGkC,CAAc,UAAU,CAAC,CAAA;IACxD,AETA,INgLY,CG3KP,ECIE,AETA,IHKI,CAAC,AGLA,CFSC,CAAC,GETG,CNgLI,EIvKD,CJuKR,AItKR,CDLS,AGLS,CFUjB,AEViB,GHKL,EAAE,EH2KE,AItKT,CJsKkC,CItKhC,ADLS,IAAK,OAAA,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,ICKlB,ADLsB,CCKR,ADLS,EAAzB,CAAyB,CAAQ,CAAA,GCKT,CAAC,EAAC,EAClD,iCAAe,CAAc,QAAQ,EAAE,UAAU,CAAC,CACrD,CAAA;AACL,ADPA,AGLA,ACFA,CHcC,ADPA,AGLA,ONgLe,QOlLO,KAAU,IPkLL,GAAZ,YAAY,CAAqB;AI5KjD,ADHA,AGHA,ICCI,IPkLY,GOlLL,KAAK,KAAK,IAAI,CDCxB,ACDwB,CPkLK,GAAd,UG5Kf,IH4K6B,AIrK7B,CJqKoD;AQnLrD,ADEA,CAAC,GPkLM,CAAC,eQpLmB,CAAM;ADAjC,IPUI,AQTA,OAAO,OAAO,CAAC,KAAK,ADCvB,EPQc,QQTmB,CAAA,0BRSZ;AQRtB,CAAC,YRQG,cAAkD,wBAAW,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;AQVlF,ACAA,gCDEC,kBCFgD;AACjD,ACDA,oBAA6C,KAAQ,EAAE,QAAoC,mBDCzC;AAClD,ICDI,GVS8E,GUTxE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,GDCD,OCDC,GAAG,IAAI,OAAA,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAzB,CAAyB,CAAC,CAAA;ACAxD,AFKX,ACJA,CAAC,GVUG,IWXO,KAAK,GAAU,IAAI,CAAA,KXWf,gCAAI;AUZnB,IDOI,STKA,OSL8D,OTKlC,KUV/B,EVUsC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAA,CAAC,CAAC;AYZ5D,SHOI,UAA8D,EAA9D,qBAA8D,EAA9D,IAA8D,EGPjB;AACjD,QHMI,2BAA8D,EGNjC;AAEjC,OZS4D,UYTpC,KAAoB;IZWxC,ASLA,AGLA,IHKM,GGLC,CHKG,GAAG,CGLD,CAAC,IHKM,CAAC,CGLD,CAAC,EZUT,ESLe,CAAC,KGLN,CHKY,EGLT,CHKY,CAAC,AGLX,CHKY,CAAA,EGLR,IAAK,OAAA,GAAG,GAAG,IAAI,CZUvB,CYVa,CAAU,EAAE,CAAC,CAAC,CAAA;AACrD,CAAC,GHKG,IAAM,KTIN,KSJgB,GAAG,MTIY,ASJN,CAAC,KAAK,CTIO,ASJN,CAAC,EAAE,CTIO,CAAC,ISJF,CAAC,MAAM,GTIS,ASJN,CTIO,ASJN,CAAC,CAAA,ETIS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,CAAC,CAAC;AYXzF,IHQI,IAAI,CAAC,iBGNR,MHMkB,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,sBAAW,CAAC,EAAE;AGJpF,QHKQ,OAAO,MGLa,KAAoB,MHK1B,CAAA;AIZtB,IDQI,CHKC,ETCoF,CYNjF,KAAK,CAAC,MAAM,CCRc,IDQT,CAAC,GCRoB;IbgB1C,ASFA,IGLI,GHKG,IAAI,AGLA,WZOA,MYPO,CAAA,cHKH,UAAU,GAAC,QTED;ASD7B,AKfA,CLeC,GGLG,OAAO,EZMP,KYNc,CAAC,KAAK,CAAC,EZMsC,CYNnC,KAAK,CZMqC,AYNpC,IZMwC,CAAC,CYNnC,CAAA,UZM+C,CAAA,CAAC,CAAC;ASVzF,AGKA,AGXA,CHWC,WCVG,YJcH,UIdU,IAAI,OAAO,CAAO,CEDkB,SFCjB,IAAI,IAAK,OAAA,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,EAA1B,CAA0B,CAAC,EAAA;ADMlE,AGNA,ACDA,kBAAkB,gBJWjB;AAED,IGXI,GfcqF,Ied9E,CDDP,GCCW,CAAC,MAAM,EHWS,AGXP,CAAC,IHW0B,IGXlB,CDDtB,ACCuB,EAAE,CAAC,CDDtB,ACCuB,ODDhB,CAAC,CCCwB,CAAC,CAAC,CAAC,MDD3B,OAAO,IAAI,OAAA,qBAAqB,CAAC,OAAO,CAAC,EAA9B,CAA8B,CAAiB,EAAC;AEClF,CHAC,GbgBU,AYJP,IAAM,EGXA,CAAC,IHWM,AGXF,GHWK,CGXD,EAAE,ACDO,CDCN,CAAC,CCDiB,KJYT,CAAC,AGXF,EAAE,CAAC,EHWI,CZInB,AYJoB,CAAA,EZIlC,EefqC,CAAC,EAAE,CAAC,CAAC,Gfe3B,EAAc;AalBjC,AEIA,CAAC,GHWG,AIZA,IhBgBU,AYJN,AIZE,IhBgBI,AgBhBA,CJYD,CAAC,CIZG,GAAG,CAAC,CJYD,CZI4B,EAAjC,EYJU,CAAC,IAAI,ICb7B,MGCyC,EAAE,CAAA,IhBgBpB,EAAE,GYJe,CAAC,OAAO,CAAC,sBZIV,CAAQ;AelBhD,CDCC,GEGU,IhBeH,AYJA,AIXG,IhBeG,GYJC,EZII,GAAG,MgBfN,EDDf,ACCiB,ChBea,CAAC,EYJV,CZIa,AYJb,CZIc,EAAE,CAAC,CAAA,UgBff,CAAQ;AFLhC,IFiBI,AIXA,IhBeI,AYJE,AIXA,CAAC,GhBeC,AgBfE,EJWE,EIXE,CJWC,AIXA,IAAI,CJWC,AIXD,CJWE,IAAI,CAAC,MZIP,CAAC,GYJO,CAAC,CZIH,CAAC,AYJI,CAAC,IAAK,EEfvC,KFeuC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,EAA7C,CAA6C,CAAC,CAAA;IAClF,AIXA,IAAM,CAAC,EJWA,CZIC,AgBfE,IAAI,CJWD,AIXE,CJWD,CZIC,AYJA,CAAC,AIXE,CJWF,AIXE,ehBeI,CAAA;AYH1B,CAAC,GIVG,IhBcI,GgBdG,ChBcG,CgBdF,CAAC,GAAA,ChBcO,CgBdL,CAAC,ChBcO,EgBdP,EAAE,KAAK,KhBcc,CAAC,CgBdf,EAAE,ChBciB,CAAC,IgBdZ,ChBciB,CAAC,CAAA,KgBdlB,EAAC,CAAA;AJIhC,AIHA,CAAC,OhBcO,IAAM,MAAM,GAAG,cAAc,CAAC,IYLrC,MZK+C,CAAC,KAAK,CAAC,CAAA;AYHvD,AInBA,QhBuBQ,OAAO,EAAC,EAAE,IAAA,AYJY,EZIV,GYJ8B,EZI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,ClBoCL,EACb,GkBrCwB,AO9BkB,CP8BlB,AO9BmB,CAAA,IzBmElC,EACT,EuBlEoD,OvBkE3C,EACT,YAAY,EACZ,iBAAiB,CACpB,CAAA;AuBnET,IvBoEI,AwBrEiC,ACFjC,CzBuEC,GyBvEK,IAAI,GAAG,IFIb,CL2BA,QK3BY,EEJO,CAAC,IAAI,EAAE,IP+BpB,MM7BqD,ACFjC,IAAI,IAAI,OAAA,EAAE,CAAC,CP+BpB,CAAC,KO/B0B,CAAC,EP+BnB,CAAC,CO/BsB,CP+BtB,AO/BuB,EAAE,CAAC,EAAnB,CAAmB,CAAC,CAAA;IzByE/C,AuBnEP,ACWA,AChBA,IAAI,qBDgBQ,CChBG,CAAC,GDgBQ,CxBwDX,AyBxEO,CAAC,EzBwErB,EyBxEyB,QzBwEX,cyBxEsB,CAAC,EzBwEqB,EyBxEjB,CAAC;QzByEhC,AuBpEQ,ACWlB,ACfI,IzBwEM,GyBxEC,KP6BX,AMbI,CxBwDmC,AyBxEtB,CAAA,CzBwEN,MkB3CgB,CAAA,QMbjB,CDZsD,ICYjD,CAAC,GxBwDI,EAAE,IwBtDrB,oBxBsD8B,CAAQ;IyBvEvC,IzByEI,AuBhDA,ACnBI,ACNF,IzByEI,QAAQ,AkB5ClB,CKJgB,EvBgDK,CkB5CjB,EKJ4C,ACnB5B,GAAG,ACNI,GzByEG,AkB5ClB,AO7BkB,CzByEC,AkB5ClB,GAAG,ClB4CmB,AkB5ClB,ClB4CkB,AyBzEC,CDMZ,ECNe,GP6Bf,CAAC,AMvBS,KNuBJ,EO7BoB,GAAG,IAAI,CP6BjB,AO7BkB,MAAM,CAAA;IAChE,IzByEI,AyBzEE,IzByEE,AuBjDJ,AClBA,CxBmEK,GwBnEC,EAAE,GAAG,CxBmEG,EuBhDV,ALIJ,ClB4CiB,CwBnEF,CAAC,ECNO,GDMF,ACNK,CDMJ,ACNK,CzByED,CAAC,AwBnEH,CAAA,KxBmES,CAAC,AuBhDxB,ILIJ,CKJS,CAAC,MEzBgC,GFuC/C,AEvCkD,EzByEA,CAAC,CAAA,AyBzEG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA;ACVrF,IDWI,IzB0EI,GyB1EG,CzB0EC,AuBhDA,ACnBJ,CxBmEK,EyB1EE,CDOH,ACPI,CF0BA,CAAC,ELGb,ElB6CkB,AyB1EA,GzB0EG,AyB1EA,CF0BA,AE1BC,CP6Bf,AQxCqB,CRwCpB,CKHgB,IAAI,ALGf,ClB6CiB,AkB7ChB,ClB6CiB,AwBnEf,CAAC,CCPgB,GAAG,CDOf,CAAC,ENsBE,GAAG,AMtBA,CxBmEiB,AwBnEhB,CxBmEiB,IkB7CZ,CAAA,KlB6CY,EyB1EY,CDOf,ACPgB,CDOf,ACPe,EDOb,EDmBH,CvBgDY,AuB/C1C,UAAC,OAA8B,EAAE,QAAwB;AGrCzE,ADWA,CAAC,WzB0EW,IuB/CQ,ACpBR,GxBmEA,CuB/Cc,ALEtB,CMtBY,CAAC,IDoBe,CCpBV,CNsBV,AMtBW,CDoBY,ALEtB,AQxCiB,MRwCX,ClB6CU,AuB/Ca,ALEtB,CKFuB,CAAC,CAAC,CAAC,ECpBT,CNsBV,AMtBW,CNsBV,CAAA,AMtBW,EAAE,IDoBgB,ACpBhB,CDoBiB,CCpBf,KDoBqB,CAAA,ACpBf,QAAA,EAAC,CAAC,CAAA;AEhBnD,ADCA,aDgBS,GDoBW,CvB+CH,GuB/CS,GvB+CH,CAAC,CuB/CO,GAAG,MvB+CT,CuB/CgB,CAAC,CvB+Cd,AuB/Ce,CAAC,AE5B3C,CzB2E6B,AuB/Ce,EvB+Cb,EAAE,KAAK,EuB/CiB,CAAC,CvB+Cb,IuB/CkB,AGrCT,CHqCS,EvB+ClB,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,GAAG,QAAQ,CAAC,EAA7B,CAA6B,EAAE,SAAS,CAAC;A0BlFrF,Q1BiFY,AwBjER,CxBkEiF,AwBlEhF,CxBmEI,AwBnEJ,CxBmEI,KuB/CW,IAAI,mBAAQ,CAAC,KAAI,CAAC,KAAK,CAAC,CGpCK,aHoCS,CAAC,EAAE;AGnC7D,Q1BoFQ,AwBjEA,KAAI,CAAC,CxBiEE,IAAI,CAAA,AuBhDK,CCjBJ,GAAG,CDiBK,CAAC,KAAK,CAAC,YGrBZ,CFIS,CDiBiB,ACjBhB,CDiBiB,ICjBZ,CAAC,CDiBiB,CAAC,CAAA,ICjBX,CAAC,CAAA;AEH/C,I1BqEI,CAAC,YuBhDgB,+CGrBuC;ACtB5D,ADuBA,CRmBC,GlBmDU,AwBnEP,CAAC,WDkBe,IAAI,evBiDP,GAAb,CuBjD4B,CAAC,KAAI,CAAC,EvBiDpB,E0BtE4B,CHqBH,CAAC,KvBiDa,QuBjDA,CAAC,EAAE,2BI5CmC;ATS/F,AQeA,IFfI,IxBqFU,IAAA,QuBjDU,CvBiDsC,EAA/C,EuBjDa,CAAC,ILH5B,CKGiC,CAAC,ICpCzB,GAAN,MDoC4C,CAAC,CvBiDzB,EAAE,EuBjD4B,CAAC,CAAA,IGrBb,sB1BsEJ,EAAE,kCAAc,CAAQ;A2B5F9D,AT0CA,AQlBA,IRkBM,IlBoDE,AwBtFM,IxBsFF,AkBpDE,AMlCA,CxBsFD,EkBpD+B,EKEvB,ELF2B,MlBoDvB,CkBpD8B,CMlCjB,CxBsFV,AkBpD6B,CAAA,AMlC1C,EGRuB,GAAW,EAAE,GAAW,AHQ7C,CxBsFuB,CAAC,AwBtFtB,axBsFmC,CAAC,EwBtF/B,CAAc,KEgBqB,E1BsEJ,YAAY;A0BrEnE,ICxBI,GAAG,CHQQ,EGRL,E3B8FE,AuBlDI,ACpCD,CDoCE,CACJ,AI7CC,CJ6CD,AI7CE,IAAI,CAAC,C3B8FC,CAAC,C2B9FC,CAAC,CAAC,I3B8FI,CAAC,IwBtFR,CAAQ,KxBsFA,KAAK,mB0BtEyB;AAC5D,AE5BA,IDII,GAAG,CHQC,EGRE,IAAI,CAAC,AHQA,CxBsFQ,IAAA,A2B9FH,CAAC,GAAG,CAAC,CAAC,O3B8FD,EAAE,AwBtFX,KEgBqB,AE5BI,EJYlB,IAAC,EAAE,EAAE,EAAE,EAAE,ExBsFC,CAAS,EwBtFL,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,GAAG,CAAA;AEkBlF,AE7BA,IDII,AHQA,CAAC,GDoCG,CAAC,EI5CE,IAAI,C3B8FC,A2B9FA,KAAK,CAAC,IAAI,CAAC,C3B8FC,CAAC,A4BlGE,G5BkGC,CAAC,A2B9FA,E3B8FE,A2B9FA,E3B8FE,C2B9FC,CAAC,GAAG,C3B8FC,CAAC,CAAA,A2B9FC,GAAG,GAAG,CAAC,CAAC,ADyBJ,CCzBK,GAAG,GAAG,CAAC,CAAC,uDAAuD;AACrH,ADyBA,AG/BA,ADGA,CDGC,GHuBD,IDhBQ,QvBuFQ,UwBvEf,EDhBa,CMbiB,C7BoGD,CAAC,AuBvFvB,WvBuFkC,CAAC,K4BjGC,GF4BI,C1BqEI,CAAC,GAAG,CAAC,EAAE,CAAE,EAAE,MAAM,CAAC,CAAA;A2BlGtE,AD8BA,AFHA,AK5BA,ADGA,CJIA,AAqBC,CArBoC,KAAK,CAAC,IxB6F/B,AuBvFA,CvBuFC,CAAC,CAAA,MwB7F0C,GAqBvD,YK5BoC,aH+BS,KC1B7C,UJQ+D,cKVU;AF6B1E,AFzBa,AKNb,ADKA,Q5B+FQ,CAAC,CAAC,CAAA,CuBzFF,iBAgBC,aCrBmB,GEyBa,gBG/BO;AHgChD,AFCA,AK/BA,IL+BM,AI5B8B,I5BiG5B,GwBrEK,CDnBD,ECmBI,CxBqED,CuBxFG,GvBwFC,CAAA,CuBxFI,GAAe,GCmBR,CAAC,EDnBa,CAAC,MAAM,CACnC,EAAE,EACF,ECiB+B,CEDN,AFCO,CDjB5B,AKXwD,CLWvD,CMduB,INclB,EACV,EAAC,GAAG,EAAE,UAAC,EAAO,IAAK,OAAA,KAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAlB,CAAkB,EAAC,CAClC,CAAA;AGepB,AG9BA,I7BoGI,AwBrEA,AIKA,C5BgEC,GwBrEG,EAAE,EDfE,OAAO,KAAK,CAAC,GKoBT,KAAuB,QLpBE,CAAC,CAAA,IGcC,IG9BI;AH+B/C,AG7BA,I7BoGW,A6BpGL,IL8BE,AIIJ,ILnBQ,EMfI,CL8BD,EAAE,AK9BqB,ENenB,AMfqB,CAAA,ADmChC,ILpBgB,ACeA,CDfC,UvBqFR,GAAb,A4BjEU,ELpB0B,CAAC,CAAA,CKoBtB,CAAC,I5BiEF,IAAoB,C0BvEW,AEsB5C;AFrBL,AG7BA,KAAK,G7BoGG,AwBtEA,AIKA,CCnCC,CAAC,E7BoGE,AuBpFA,AKmBE,CCnCD,CAAC,CL8BC,CK9BC,ADmCE,CJLD,AK9BA,ENgBE,AKmBE,CCnCD,INgBI,CAAC,CCcC,AK9BA,EAAE,CAAC,E7BoGT,A6BpGW,C7BoGV,C6BpGY,CDmCN,CAAC,C5BiEH,CAAC,CuBpFY,CACtB,IGYuB,CEMF,CAAC,GLlBb,EvBmFc,AuBlFvB,AKiB2B,C5BiEH,A4BjEI,E5BiEF,A4BjEI,CAAC,CLjB1B,CKiB4B,CLhBjC,GKgBqC,CLhBjC,AKgBkC,CLhBjC,KAAK,AKgBkC,CLhBjC,CKgBmC,GAAG,GAAG,CLhBjC,AKgBkC,CLfxD,AKeyD,CLfzD,AKe0D,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;AFLxF,IG7BI,INoBI,ACUA,AIKA,CLfC,GvBgFU,EwBtEL,AK9BA,CAAC,C7BoGI,AwBtEH,CIKC,CAAC,CCnCC,CAAC,CAAC,CL8BC,AK9BA,CDmCC,CAAC,EAAE,CAAC,GCnCG,ADmCA,ECnCE,CAAC,CAAA,ADmCC,CAAA,YFN8B,G1BuEhC,CAAQ;A0BtExC,CG7BC,ONyCO,ACXA,AIMA,I5BiEI,A4BjEA,I5BiEM,C4BjEM,CJNN,AIMM,EJNJ,QAAQ,IxBuEM,GAAG,OuB5DT,GAApB,KvB4DmC,A0BxEG,C1BwEF,IAAI,CAAC,aAAa,EAAE,aAAa,CAAC,CAAA;A0BvE9E,AG5BA,KL6BK,GIOG,I5BgEI,AuB5DA,AKJA,I5BgEM,AuB5DF,AKJA,CLIC,IKJI,ILII,CAAC,CKJC,EAAE,I5BgEM,GAAG,AuB5DF,EAAE,CAAA,CvB4DI,iB0BxEW,iB1BwEU,CAAC;A0BvEhE,CFCC,CAAC,CAAC,CK9BuB,INyClB,CAAC,ACXA,EAAE,CAAC,AIOA,I5BgEI,A4BhEA,GJPG,CAAA,AIOC,GAAG,S5BgES,A4BhEA,CAAC,C5BgEC,E6BjGhC,EDiCoC,CAAC,EAAE,CAAC,IAAI,I5BgEI,C0BxEH,KEQS,CAAC,EAAC,KAAK,EAAE,6CAAqB,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC,CAAC,CAAA;AFP/F,IGDI,INcY,IKLJ,I5BgEI,E6BzEA,GDSK,C5BgEC,A4BhEA,CCTG,C7ByED,G4BhEG,CAAC,EAAE,C5BgEC,AuB3DN,AKLM,GLKvB,AKL0B,IAAI,CAAA,KLKZ,GAA+B,UGbH;AACtD,QGFI,INeQ,AKLA,C5BgEC,CAAC,CAAA,CuB3DE,CKLA,CAAC,ECTT,GDSc,GAAG,EAAC,IAAI,GLKN,CAAC,EMdX,ADSgB,ELKD,AKLG,CLKF,EMdX,CAAC,ADSgB,MLKG,AKLH,CLKI,CKLH,CLKK,AGbO,AGK5C,ADGgC;AFNrC,QGZI,CDmBK,G5BgEG,IAAI,AuB3DA,CvB2DC,GuB3DG,CAAC,CMxBT,GAAG,INwBc,CvB2DC,AuB3DA,GvB2DG,E6BnFjB,GHYwB,CHYD,CAAC,CMxBd,GNwBkB,CAAC,IvB2DI,CAAA,IuB3DK,CAAC,CAAA;AGVvD,Y1BsEY,A6BnFJ,CDkBO,G5BiEC,AuB3DA,AMxBJ,C7BmFK,GuB3DG,AMxBJ,CNwBK,AMxBJ,GAAG,CAAC,KNwBS,CvB2DC,A6BnFJ,CAAC,CNwBK,CvB2DC,C6BnFH,EAAE,EAAE,WNwBK,CvB2DW,AuB3DX,CvB2DW;I0BtEjB,K1BuEzB,G4BjEG,CLMC,GMxBD,ADkBM,KClBF,ADkBO,CClBN,EDkBS,MClBD,CAAC,CDkBQ,CClBP,ADkBQ,KAAK,CAAC,EAAE,CAAC,EFNmB,AGZzB,EAAE,CAAC,EAAC,CAAC,CAAA;IH4DvC,I1ByBI,IAAI,AuB5DA,CMxBH,GNwBO,GKNG,OFyCH,K1ByBI,A0BzBQ,C1ByBP,IAAI,CAAC,CuB5DC,CAAC,GAAG,CAAC,CvB4DC,CAAC,AuB5DA,EvB4DE,G4BlEY,6CAAqB,CAAC,GAAG,EAAE,GAAG,CAAG,CAAA;QFyC7E,I1B0Bc,A4BlEN,I5BkEM,AuB5DF,CMzBD,GH4DP,AEzCY,CAAC,ELMC,EvB4D4C,C4BlExC,C5BkEP,A4BlEQ,EAAE,CAAC,GAAG,KFyCnB,AEzCwB,CAAA,IFyCnB,CAAC,O1ByBQ,EAAE,A0BTzB,oC1BSuC,EAAE,gCAAY,CAAQ;Q0B+D7C,I1B7DT,A4BnEA,CLMC,GvB6DK,A6BtFN,CDmBI,CFgIS,AEhIR,GFgIyB,AGnJ1B,CAAC,CDmBK,EFgIwB,CEhIrB,EAAC,E5BmEI,A6BtFL,CAAC,CDmBI,C5BmEG,A6BtFN,KDmBG,EAAE,ICnBM,CDmBD,CCnBG,E7BsFD,CAAC,E6BtFI,CHmJc,AGnJb,ADmBR,EFgIuB,AEhItB,CFgIsB,AEhItB,ECnBY,CAAC,MAAM,C7BsFb,CAAC,C6BtFe,CAAC,E7BsFZ,A6BtFa,C7BsFZ,A6BtFa,CAAA,M7BsFN,CAAC,EAAE,SAAS,CAAC,CAAA;Q0BiEjD,CEnIZ,G5BmEG,AuB7DA,CMzBH,G7BsFS,AuB7DA,GAAG,GAAY,AG6HJ,GH7HO,AG6HJ,K1BhEF,GAAG,IuB7De,KAAK,CAAC,KvB6DlB,EAAsB,CAAC,CuB7DI,QG6Hf,CAAU,G1BhEc,CAAC,S0BgEF,C1BhEE,A0BgED,CAAA,W1BhEa;Q0BiEhE,AGtJjB,CAAC,CAAA,M7BsFW,AuB7DA,CAAC,CAAC,EG6HS,GAAG,GH7HJ,CAAC,GvB6DC,CAAC,OAAO,AuB7DE,CvB6DD,AuB7DE,GAAG,CAAC,MvB6DL,EAAE,EAAE,KAAK,A0BgED,CAAQ,WAAW,CAAC,CAAA;IEnI9D,CAAC,GFgMgB,AG/Mb,KAAI,CAAC,ENsBG,CAAC,CAAC,CMtBA,C7BmFE,CuB7DC,CAAA,AMtBA,K7BmFD,E0B4HgB,GAAmB,IAAI,G1B5H3B,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,e0B4H2B,CAAC,CAAC,CAAC,CAAA;IElPzE,IFyFI,IH/BI,AMtBA,CHqDA,CAAC,E1B6BO,AuB5DJ,CvB4D+B,A6BlF9B,C7BmFA,CAAA,A6BnFE,GHqDE,GAAG,AGrDC,CAAC,SNsBF,CAAC,AMtBW,GNsBR,CAAC,EAAE,IK1DV,GAAjB;QAAA,I5BwHQ,A0B9BA,AGrDA,C7BmFC,CAAC,CAAA,CuB7DE,EMtBE,ENsBE,AMtBA,CNsBC,AG+BA,EAAE,EElFlB,CC6BqB,CAAC,ENsBE,CAAC,CG+BC,CAAC,KH/BK,CAAC,AMtBA,GNsBG,CAAC,CAAA,EG+BG,CAAC,KAAK,CAAC;QEzF5C,I5BwHI,A0B9BA,AGrDA,ADrCA,CAAC,G5BwHK,AuB7DF,GG+BG,CH/BC,CAAC,AG+BA,AE1FA,ECqCE,CDrCC,CCqCC,CAAC,GHqDG,CH/BC,AG+BA,C1B8BG,EuB7DA,CvB6DG,C4BxHD,CL2DC,AK3DA,CL2DA,MG+BO,CAAC,K1B8BL,A0B9BU,CAAC,C1B8BO,CAAC,aAAa,CAAC,UAAA,eAAe;S6BlF9E,CAAA,EHqDG,AE1FA,CL2DC,GvB6DG,A4BxHA,IF0FI,CE1FA,CF0FE,AE1FD,IF0FK,CE1FA,CAAC,CF0FE,C1B8BD,CAAC,A0B9B2B,CE1FzB,KAAK,C5BwHA,CAAC,I4BxHK,M5BwHJ,MAAM,EAAE,EAAE;QuB5DxC,CAAC,AG+BA,CAAA,ME1FO,I5BwHI,G4BxHE,C5BwHI,KAAK,GAAG,cAAY,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;I6BnFlD,CAAC,GNuBD,AGgCI,IAAM,AE3FF,IAAM,EL2Db,AGgCe,E1B6BA,A4BxHE,CF2FC,EE3FE,C5BwHD,S4BxHW,CAAC,EAAC,KAAK,E5BwHV,A4BxHY,C5BwHX,KAAK,CAAC,EAAE,A0B7BJ,CAAC,MAAM,CAAC,4BE3FoB,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC,CAAC,CAAA;IL2DtE,AMtDA,CNLA,AA2DC,CA3DiB,KAAK,CAAC,AG4FhB,AE3FA,OF2FO,EAAE,AE3FA,CAAC,E5BwHE,CuBzHiB,AMK/B,CHuFgB,CAAC,AE3FD,CL0DrB,AMtDD,ADJuB,KAAK,CAAC,EAAE,CF2FE,AE3FD,E5BwHG,CAAC,A4BxHD,G5BwHI,CAAC,A4BxHD,CAAA,C5BwHG,EAAE,MAAM,CAAC,CAAA;IuB5DnD,IAAI,AMvDM,CNuDL,GGgCG,AGvFE,ADJF,KAAI,CAAC,M5BwHO,AuB7DP,CAAC,AGgCO,CE3FA,CF2FE,AGvF4B,ADJ7B,ECIX,ADJY,EF2FI,CAAC,CE3FD,CL2DJ,CAAC,EAAE,AGgCO,CAAC,CE3FP,C5BwHO,CAAC,A4BxHP,CAAC,CF2FU,AE3FV,CF2FW,CGvFxB,EAAE,GHuF4B,E1B6BA,CAAC,A0B7BE,CAAC,CAAC,G1B6BC,EAAE,K6BpH9B,C7BoHoC,CAAC,A6BpHnC,C7BoHmC,2B6BpHxB,CAAc;QNwD/C,AMtDA,ADLA,CF2FC,AE3FA,CF2FC,CAAA,AE3FC,ICKI,M7BmHM,OuB7DO,CAAC,GAAG,EAAE,CMtDlB,QNsDkC,CAAC,CAAA,WK3DnB,CAAC,IAAI,CCKT,CDLW,IAAI,CAAC,CAAC,CAAA,aCKhB,OAAO,EAAE,+BAAc,IACnB,EAAC,KAAK,OAAA,EAAE,MAAM,QAAA,EAAE,UAAU,YAAA,EAAE,WAAW,aAAA,EAAC,IAC5C,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAG,CAAA;IACnD,ADPA,CL2DC,AMpDA,ADPA,GF2FG,IAAM,I1B6BE,CAAC,CAAC,CAAA,I0B7BO,GAAG,iCAAe,CAAC,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;IH9BlF,AMpDA,ADPA,IF0FI,GH/BG,CvB4DC,A0B7BE,C1B6BD,CAAC,AuB5DA,CvB4DA,AuB5DA,EG+BK,GAAG,eAAM,CAAC,AGnFR,GAAjB,EHmF8B,CAAC,KAAK,EAAE,AE1FlB,GAApB,OF0FsC,KAAK,IAAI,OAAA,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAArB,CAAqB,CAAC,CAAA;AH9BzE,CAAC,OG+BO,AGpFJ,ADNI,I5BwHI,A0B9BE,I1B8BE,CAAC,C0B9BG,GAAG,AE1FF,CAAC,GCYjB,C7B4GqB,A4BxHA,CAAC,E5BwHE,M4BxHM,CF0FN,AE1FO,CF0FN,AE1FM,M5BwHK,CAAA,Q0B9BL,CAAC,KAAK,EAAE,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,MAAM,GAAG,WAAW,EAA1B,CAA0B,CAAC,EAAE,CAAO,CAAC,CAAA;AHpG1F,IKWI,CAAC,GF0FG,AGpFA,I7BkHI,A0B9BE,EGpFA,CAAC,C7BkHC,CAAC,G0B9BK,GAAG,G1B8BC,GAAG,CuB9D5B,CMpD8B,CAAC,QAAQ,EAAE,C7BkHD,CAAA,M0B9BJ,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;IExFlE,IFyFI,I1B8BI,A6BlHA,CHoFA,CAAC,E1B8BG,A6BlHE,C7BkHD,E0B9BC,EGpFK,CHoFF,EAAC,AGpFI,K7BkHG,C0B9BD,AGpFI,CAAC,C7BkHD,G4BvHtB,GFyFkB,AEzFxB,EFyF0B,CGpFa,CAAA,IHoFP,C1B8BW,CAAA,M0B9BX,EAAE,QAAQ,UAAA,EAAE,aAAa,EAAE,IAAI,EAAC,CAAA;QExF5D,I5BuHI,A6BlHA,GDLG,C5BuHC,A6BlHE,C7BkHD,K6BlHO,GAAG,M7BkHI,A6BlHE,CAAC,E7BkHA,S6BlHW,CAAA,ADLzB,KAAK,C5BuHuB,CAAA,A4BvHrB;IFyFvB,CAAC,I1B+BI,G6BlHG,IDLA,CCKI,CAAC,KDLE,EAAE,CCKI,CAAC,EAAC,GDLC,ECKI,OAAA,EAAE,MAAM,QAAA,EAAC,CAAC,CAAA;IHmB/B,I1BiGH,A6BnHA,CAAC,CAAC,CAAA,I7BmHK,C4BxHH,G5BwHO,CAAA,C4BxHF,EAAE,IAAI,CAAC,KFuBP,AEvBY,CAAC,EFuB1B,GEvB+B;I5ByH/B,A6BnHA,C7BmHC,A6BnHA,GHkBS,IAAA,IEvBF,eAAe,EAAE,KFuBwE,EAAtF,AEvBqB,sBFuBb,EAAE,gCAAa,EAAE,0BAAU,EAAE,0BAAU,EAAE,8BAAY,CAAyB;I1BmGnF,A6BnGlB,IHCc,IAAA,GGDb,CDtBW,KFuBiD,EAA9C,CEvBK,C5ByHI,C4BzHF,E5ByHlB,UAAqB,A4BzHS,CFuBd,EAAE,C1BkGuB,e0BlGlB,EAAE,sBAAQ,EAAE,kCAAc,CAAQ;AGD7D,CArCA,AAqCC,CArCyB,KAAK,C7B0IvB,A0BnGO,AGvCiB,I7B0IlB,A0BnGC,IEvBH,CChB6B,GAqCxC,C7BqGsB,GAAqB,C4B1HvB,EAAE,QFuBD,EAAE,CEvBU,E5B0Hc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA,C0BnGjC,EAAE,qBAAM,CAAS;AGvCjC,Q7B2IL,A0BnGO,I1BmGD,A0BnGC,CEvBN,OCjBQ,C7B2IM,GACX,a0BpGW,E1BoGR,A0BpGU,E1BoGY,CAAC,aAAa,CAAC,I0BpGrB,EAAE,I1BoGmB,SAAS,sB0BpGf,CAAS;AGDvD,IAAM,IHGE,AGHE,GAAG,C7BsGG,A0BnGF,AExBF,O5B2HI,A6BtGK,CAAC,EHGE,GAAG,G1BmGF,CAAC,K6BtGU,CAAC,C7BsGJ,CAAC,C0BnGM,GGHG,CAAE,CAAA,EDrB3B,E5B2HiB,EAAE,A4B3Hf,CAAC,C5B2HgB,I4B3HX,C5B2HgB,A4B3Hf,EAAE,CAAO;ACsBtC,QAAQ,CAAC,GHGG,AExBA,CFwBC,CAAC,CGHC,C7BsGK,A6BrGhB,O7BqGgB,SAAS,CAAC,GAAG,A6BrG5B,C7BqG6B,EAAE,EAAE,E0BnGnB,AExBF,G5B2H0B,A0BnGrB,C1BmGsB,C0BnGpB,kBGFN,IAAC,OHEkC,EAClC,KAAK,EAAE,CGHU,CHGT,CGHW,KHGL,EAAE,GGHI,EAAuB,cHGnB,CAAC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","file":"9da1f22267b6c295272a7b7fd7c852e0.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null && !Number.isNaN(maybe)\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","import {existing} from '../typecheck/existing'\n\nexport function alternate<A>(a: A, b: A): A {\n    return existing(a) ? a : b\n}\n","import {existing} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: A, defaultValue: NonNullable<A>): NonNullable<A> {\n    return existing(maybe)\n        ? maybe\n        : defaultValue\n}\n\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\nimport {ensure} from './ensure'\n\nexport function cloneFastBinaryIndexedTree(\n    source: FastBinaryIndexedTree,\n    newDefaultHeight?: px\n): FastBinaryIndexedTree {\n    const target = new FastBinaryIndexedTree({\n        defaultFrequency: ensure(newDefaultHeight, source.defaultFrequency),\n        maxVal: source.maxVal\n    })\n\n    target['_tree'] = {...source['_tree']}\n    target['_countNeg'] = source['_countNeg']\n\n    return target\n}\n","export const nothing: nothing = null\n","import FastBinaryIndexedTree from 'fast-binary-indexed-tree'\r\nimport {List, Map} from 'immutable'\r\nimport {existing, notExisting} from '../typecheck/existing'\r\nimport {alternate} from '../utils/alternate'\r\nimport {cloneFastBinaryIndexedTree} from '../utils/cloneFastBinaryIndexedTree'\r\nimport {ensure} from '../utils/ensure'\r\nimport {nothing} from '../utils/nothing'\r\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout, ListLayoutSpec} from './ListLayout'\r\n\r\nexport class ListLayoutImpl implements ListLayout {\r\n    public get itemIDs(): ReadonlyArray<ListItemID> { return [...this.indexToID] }\r\n\r\n    public get size(): number { return this.indexToID.size }\r\n\r\n    public get totalHeight(): px { return this.prefixSumIndex.read(this.indexToID.size) }\r\n\r\n    public get updatedHeights(): ReadonlyMap<ListItemID, px> { return this.knownHeights }\r\n\r\n    public getByID(id: ListItemID): Maybe<ListItemPosition> {\r\n        const {idToIndex, prefixSumIndex} = this\r\n        const index = idToIndex.get(id)\r\n        if (notExisting(index))\r\n            return nothing\r\n        const offset = prefixSumIndex.read(index)\r\n        const height = prefixSumIndex.readSingle(index)\r\n        return {id, index, offset, height}\r\n    }\r\n\r\n    public getByIndex(index: number): Maybe<ListItemPosition> {\r\n        const {indexToID} = this\r\n        const id = indexToID.get(index)\r\n        if (notExisting(id))\r\n            return nothing\r\n        return this.getByID(id)\r\n    }\r\n\r\n    public getByIndexRange(from: number, to: number): Array<ListItemPosition> {\r\n        const fromItem = alternate(this.getByIndex(from), this.getByIndex(0))\r\n        const toItem = alternate(this.getByIndex(to), this.getByIndex(this.size - 1))\r\n        if (notExisting(fromItem) || notExisting(toItem))\r\n            return []\r\n        const results: Array<ListItemPosition> = []\r\n        for (let i = fromItem.index; i <= toItem.index; i++) {\r\n            results.push(this.getByIndex(i)!)\r\n        }\r\n        return results\r\n    }\r\n\r\n    public getByOffset(position: px): Maybe<ListItemPosition> {\r\n        let bound = this.prefixSumIndex.upperBound(position)\r\n        const index = bound === this.size ? bound - 1 : bound\r\n        const id = this.indexToID.get(index)\r\n        if (notExisting(id))\r\n            return nothing\r\n        return this.getByID(id)\r\n    }\r\n\r\n    public getByOffsetRange(from: px, to: px): Array<ListItemPosition> {\r\n        const fromItem = alternate(this.getByOffset(from), this.getByIndex(0))\r\n        const toItem = alternate(this.getByOffset(to), this.getByIndex(this.size - 1))\r\n        if (notExisting(fromItem) || notExisting(toItem))\r\n            return []\r\n        return this.getByIndexRange(fromItem.index, toItem.index)\r\n    }\r\n\r\n    public clone(): ListLayout {\r\n        const {indexToID, idToIndex, knownHeights, defaultHeight, prefixSumIndex} = this\r\n\r\n        const newPrefixSumIndex = cloneFastBinaryIndexedTree(prefixSumIndex)\r\n\r\n        return new ListLayoutImpl(\r\n            defaultHeight,\r\n            indexToID,\r\n            idToIndex,\r\n            knownHeights,\r\n            newPrefixSumIndex\r\n        )\r\n    }\r\n\r\n    public append(additionalItemIDs: ReadonlyArray<ListItemID>): this {\r\n        const {idToIndex, indexToID} = this\r\n\r\n        const prevSize = indexToID.size\r\n        this.indexToID = indexToID.concat(additionalItemIDs)\r\n\r\n        this.idToIndex = idToIndex.withMutations(idToIndex =>\r\n            additionalItemIDs\r\n                .reduce((map, id, index) => map.set(id, index + prevSize), idToIndex)\r\n        )\r\n\r\n        return this\r\n    }\r\n\r\n    public update(newShapes: ReadonlyArray<ListItemShape>): this {\r\n        const {idToIndex, knownHeights, prefixSumIndex} = this\r\n\r\n        this.knownHeights = knownHeights.withMutations(knownHeights => {\r\n            newShapes.forEach(shape => {\r\n                const {id, height} = shape\r\n                knownHeights.set(id, height)\r\n                prefixSumIndex.writeSingle(idToIndex.get(id)!, height)\r\n            })\r\n        })\r\n\r\n        return this\r\n    }\r\n\r\n    public reflow(spec: ListLayoutSpec): this {\r\n        if (existing(spec.defaultHeight)) {\r\n            const {defaultHeight} = this\r\n\r\n            const newDefaultHeight = ensure(spec.defaultHeight, defaultHeight)\r\n            const newPrefixSumIndex = new FastBinaryIndexedTree({\r\n                defaultFrequency: newDefaultHeight,\r\n                maxVal: maxSize\r\n            })\r\n            this.defaultHeight = newDefaultHeight\r\n            this.prefixSumIndex = newPrefixSumIndex\r\n        }\r\n\r\n        if (existing(spec.itemIDs)) {\r\n            const {indexToID, prefixSumIndex, knownHeights} = this\r\n\r\n            const newIndexToID = ensure(List(spec.itemIDs), indexToID)\r\n            const newIDToIndex = Map<ListItemID, number>().withMutations(newIDToIndex => {\r\n                newIndexToID.forEach((id, index) =>\r\n                    newIDToIndex.set(id, index)\r\n                )\r\n            })\r\n            const newKnownHeights = Map<ListItemID, px>().withMutations(newKnownHeights => {\r\n                knownHeights.forEach((height, id) => {\r\n                    const index = newIDToIndex.get(id)\r\n                    if (existing(index)) {\r\n                        newKnownHeights.set(id, height)\r\n                        prefixSumIndex.writeSingle(index, height)\r\n                    }\r\n                })\r\n            })\r\n\r\n            this.indexToID = newIndexToID\r\n            this.idToIndex = newIDToIndex\r\n            this.knownHeights = newKnownHeights\r\n            this.prefixSumIndex = prefixSumIndex\r\n        }\r\n\r\n        return this\r\n    }\r\n\r\n    public static create(spec: ListLayoutSpec): ListLayout {\r\n\r\n        const indexToID: List<ListItemID> = List(spec.itemIDs)\r\n        const idToIndex: Map<ListItemID, number> =\r\n            Map<ListItemID, number>().withMutations(idToIndex =>\r\n                indexToID.forEach((id, index) =>\r\n                    idToIndex.set(id, index)\r\n                )\r\n            )\r\n        const knownHeights = Map<ListItemID, px>()\r\n\r\n        const prefixSumIndex = new FastBinaryIndexedTree({\r\n            defaultFrequency: spec.defaultHeight,\r\n            maxVal: maxSize\r\n        })\r\n\r\n        return new ListLayoutImpl(\r\n            spec.defaultHeight,\r\n            indexToID,\r\n            idToIndex,\r\n            knownHeights,\r\n            prefixSumIndex\r\n        )\r\n    }\r\n\r\n    // copy-on-write style data sharing\r\n    private constructor(\r\n        private defaultHeight: px,\r\n        private indexToID: List<ListItemID>,\r\n        private idToIndex: Map<ListItemID, number>,\r\n        private knownHeights: Map<ListItemID, px>,\r\n        private prefixSumIndex: FastBinaryIndexedTree\r\n    ) {}\r\n}\r\n\r\nexport class DuplicateListItemIDError extends Error {}\r\n\r\nconst maxSize = 100000 // TODO\r\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        {publish: createPublishers<Required<T>>(subjects)},\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {Observable} from 'rxjs/Observable'\n\nexport type Pipe<A, B=A> = (source: Observable<A>) => Observable<B>\n\nexport type Pass<T> = Pipe<T, T>\nexport const Pass = <T>(observable: Observable<T>): Observable<T> => observable\n\n","export function isFalse(value: any): value is false {\n    return value === false\n}\n","export function isTrue(value: any): value is true {\n    return value === true\n}\n","export function isFunction(a: any): a is Function {\n    return typeof a === 'function'\n}\n","import {notExisting} from '../typecheck/existing'\nimport {isFunction} from '../typecheck/isFunction'\nimport {nothing} from './nothing'\n\nexport function assume<A, B>(a: A, func: (a: NonNullable<A>) => B): Maybe<B>\nexport function assume<A, B, C>(a: A, b: Maybe<B>, func: (a: A, b: B) => C): Maybe<C>\nexport function assume<T>(\n    ...params: Array<any | ((...p: Array<NonNullable<any>>) => T)>\n): Maybe<T> {\n    const func = params[params.length - 1]\n    const funcParams = params.slice(0, params.length - 1)\n    if (!isFunction(func) || funcParams.length < 1 || funcParams.some(notExisting)) {\n        return nothing\n    }\n    return func(...funcParams)\n}\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","export type Pulse = any\nexport let Pulse: Pulse = true\n","import {notExisting} from '../typecheck/existing'\nimport {nothing} from './nothing'\n\nexport function calcSum(array: Array<number>): number {\n    return array.reduce((acc, curr) => acc + curr, 0)\n}\n\nexport function calcAverage(array: Array<number>): Maybe<number> {\n    if (array.length === 0)\n        return nothing\n    return calcSum(array) / array.length\n}\n\nexport function leastDeviation(array: Array<number>): Maybe<number> { // TODO better name\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    const sorted = array.sort((a, b) => Math.abs(a - average) - Math.abs(b - average))\n    return sorted[0]\n}\n\nexport function calcDeviation(array: Array<number>): Maybe<number> {\n    const average = calcAverage(array)\n    if (array.length === 0 || notExisting(average))\n        return nothing\n    return calcAverage(array.map(num => Math.abs(num - average)))\n}\n\n\n","export async function forDuration(duration: ms): Promise<void> {\n    return new Promise<void>((then) => setTimeout(then, duration))\n}\n","export async function nextAnimationFrame(): Promise<undefined> {\n    return new Promise(resolve => requestAnimationFrame(resolve)) as Promise<any>;\n}\n","// https://stackoverflow.com/a/44078785/1815491\nexport function uniqueID() {\n    return Math.random().toString(36).substring(2)\n        + (new Date()).getTime().toString(36);\n}\n","// ignoring rotate\r\n\r\nexport function calcOutline(dom: Element): Outline {\r\n    const rect = dom.getBoundingClientRect()\r\n\r\n    const {width, height} = rect\r\n    const x = rect.left\r\n    const y = rect.top\r\n\r\n    return {x, y, width, height}\r\n}\r\n","import {scale} from 'transformation-matrix/scale'\nimport {transform} from 'transformation-matrix/transform'\nimport {translate} from 'transformation-matrix/translate'\n\nexport function intermediateTransform(from: Outline, to: Outline): Matrix {\n    const centerOf = (rect: Outline): Point => {\n        return {\n            x: rect.x + rect.width * 0.5,\n            y: rect.y + rect.height * 0.5\n        }\n    }\n    const fromMiddle = centerOf(from)\n    const toMiddle = centerOf(to)\n\n    const matrix = transform(\n        translate(toMiddle.x - fromMiddle.x, toMiddle.y - fromMiddle.y),\n        scale(to.width / from.width, to.height / from.height)\n    )\n\n    return matrix\n}\n\n","import {inverse} from 'transformation-matrix/inverse'\r\nimport {toCSS} from 'transformation-matrix/toString'\r\nimport {isFunction} from '../typecheck/isFunction'\r\nimport {forDuration} from '../utils/forDuration'\r\nimport {nextAnimationFrame} from '../utils/nextAnimationFrame'\r\nimport {uniqueID} from '../utils/uniqueID'\r\nimport {calcOutline} from './calcOutline'\r\nimport {intermediateTransform} from './intermediateTransform'\r\n\r\nexport async function tweenHere(\r\n    element: HTMLElement,\r\n    from: Outline | ((current: Outline, to: Outline) => Outline) = current => current,\r\n    duration: ms | ((from: Outline, target: Outline) => ms) = 200,\r\n    easing: Easing = [0, 0, 1, 1]\r\n): Promise<void> {\r\n    const tweeningID = uniqueID()\r\n    tweening.set(element, tweeningID)\r\n\r\n    const current = calcOutline(element)\r\n\r\n    const to = current // calcOutlineOrigin(element)\r\n    from = isFunction(from) ? from(current, to) : from\r\n\r\n    const transform = intermediateTransform(from, to)\r\n    duration = isFunction(duration) ? duration(from, to) : duration\r\n    element.style.transition = 'none'\r\n    element.style.transform = toCSS(inverse(transform))\r\n\r\n    await nextAnimationFrame()\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `\r\n        opacity ${duration}ms cubic-bezier(${easing.join(',')}),\r\n        transform ${duration}ms cubic-bezier(${easing.join(',')})\r\n    `\r\n    element.style.transform = 'none'\r\n\r\n    await forDuration(duration)\r\n    if (tweening.get(element) !== tweeningID)\r\n        return\r\n    element.style.transition = `none`\r\n    tweening.delete(element)\r\n}\r\n\r\nconst tweening: WeakMap<Element, TweenID> = new WeakMap()\r\n\r\ntype TweenID = string\r\n\r\n","import {ensure} from '../../../utils/ensure'\n\nexport function calcFocusOffset(focusOffset: Maybe<px>, viewportHeight: px): px {\n    return ensure(focusOffset, viewportHeight / 3)\n}\n","import {existing} from '../typecheck/existing';\n\nexport function max(items: Array<Maybe<number>>): Maybe<number> {\n    return Math.max(...items.filter(existing))\n}\n","import {existing} from '../typecheck/existing';\n\nexport function min(items: Array<Maybe<number>>): Maybe<number> {\n    return Math.min(...items.filter(existing))\n}\n","import {ListItemPosition, ListLayout} from '../../../layouts/ListLayout'\r\nimport {existing} from '../../../typecheck/existing'\r\nimport {ensure} from '../../../utils/ensure'\r\nimport {max} from '../../../utils/max'\r\nimport {min} from '../../../utils/min'\r\n\r\nconst pageSize = 10\r\n\r\nexport function calcSegments(scroll: px, preload: px,\r\n                             height: px, layout: ListLayout): Array<ListItemPosition> {\r\n    const floor = Math.floor(ensure(min(\r\n        [layout.getByOffset(scroll - height), layout.getByOffset(scroll + preload)]\r\n            .filter(existing)\r\n            .map(item => item.index)\r\n    ), 0) / pageSize) * pageSize\r\n    const ceil = Math.ceil(ensure(max(\r\n        [\r\n            layout.getByOffset(scroll + height + height),\r\n            layout.getByOffset(scroll + height + preload)\r\n        ]\r\n            .filter(existing)\r\n            .map(item => item.index)\r\n    ), layout.size - 1) / pageSize) * pageSize\r\n\r\n    return layout.getByIndexRange(floor, ceil)\r\n}\r\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {isString} from 'util';\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\n\nexport function measuring<C extends React.ComponentClass<any> | keyof React.ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                {ref: (it: any) => this.updateRef(it)}\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<C> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateRef(ref: Maybe<React.ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if (notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if (!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends React.ComponentClass<any> | keyof React.ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import sharedInstance from 'jss'\r\nimport * as React from 'react';\r\nimport {ListItemShape} from '../../../layouts/ListLayout'\r\nimport {measuring, Measuring} from '../../../react/measure/measuring'\r\nimport {PropsOf} from '../../../react/PropsOf';\r\nimport {existing} from '../../../typecheck/existing'\r\nimport {Segment} from './Segment'\r\n\r\nexport class MeasuredSegment extends React.PureComponent<Props> {\r\n    render() {\r\n        const {id, width} = this.props\r\n        const {Segment} = this\r\n        return <Segment id={id} width={width} onHeightChange={this.reportHeight}/>\r\n    }\r\n\r\n    private reportHeight = (height: px) => {\r\n        const id = this.props.id\r\n\r\n        if (existing(this.props.onHeightChange)) {\r\n            this.props.onHeightChange({id, height})\r\n        }\r\n    }\r\n\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.Segment = measuring(props.Segment)\r\n    }\r\n\r\n    private Segment: Measuring<Segment>\r\n}\r\n\r\ntype Props = PropsOf<Segment>\r\n    & { Segment: Segment }\r\n    & { onHeightChange: EventHandler<ListItemShape> }\r\n\r\nconst classes = sharedInstance.createStyleSheet({\r\n    mask: {\r\n        display: 'block',\r\n        contain: 'content',\r\n        height: 'auto',\r\n        willChange: 'height'\r\n    }\r\n}).attach().classes\r\n","import {ListLayout} from '../../../layouts/ListLayout'\r\nimport {notExisting} from '../../../typecheck/existing'\r\nimport {assume} from '../../../utils/assume'\r\n\r\nexport function projectScroll(scroll: px, focusOffset: px, from: ListLayout, to: ListLayout): px {\r\n    const prev = from.getByOffset(scroll + focusOffset)\r\n    const curr = assume(prev, prev => to.getByID(prev.id))\r\n    if (notExisting(prev) || notExisting(curr))\r\n        return scroll\r\n    const prevHeightBeforeFocus = scroll + focusOffset - prev.offset\r\n    const currHeightBeforeFocus = (prevHeightBeforeFocus / prev.height) * curr.height\r\n    return curr.offset - (focusOffset - currHeightBeforeFocus)\r\n}\r\n","import sharedInstance from 'jss'\r\nimport * as React from 'react'\r\nimport {CSSProperties} from 'react'\r\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {interval} from 'rxjs/observable/interval'\r\nimport {\r\n    bufferCount,\r\n    bufferTime,\r\n    combineLatest,\r\n    distinctUntilChanged,\r\n    filter,\r\n    map,\r\n    merge,\r\n    pairwise,\r\n    sampleTime,\r\n    scan,\r\n    shareReplay,\r\n    startWith,\r\n    timestamp,\r\n    withLatestFrom\r\n} from 'rxjs/operators'\r\nimport {animationFrame} from 'rxjs/scheduler/animationFrame'\r\nimport {Subscription} from 'rxjs/Subscription'\r\nimport {Memoize} from 'typescript-memoize'\r\nimport {ListItemID, ListItemPosition, ListItemShape, ListLayout} from '../../layouts/ListLayout'\r\nimport {ListLayoutImpl} from '../../layouts/ListLayoutImpl'\r\nimport {createDispatcher} from '../../rxjs/createDispatcher'\r\nimport {Pass} from '../../rxjs/Pipe';\r\nimport {Pipes} from '../../rxjs/Pipes'\r\nimport {existing} from '../../typecheck/existing'\r\nimport {isFalse} from '../../typecheck/isFalse';\r\nimport {isTrue} from '../../typecheck/isTrue';\r\nimport {assume} from '../../utils/assume'\r\nimport {ensure} from '../../utils/ensure'\r\nimport {nothing} from '../../utils/nothing'\r\nimport {publishAll} from '../../utils/publishAll'\r\nimport {Pulse} from '../../utils/Pulse'\r\nimport {calcAverage, leastDeviation} from '../../utils/statics';\r\nimport {tweenHere} from '../../view/tweenHere'\r\nimport {calcFocusOffset} from './src/calcFocusOffset'\r\nimport {calcSegments} from './src/calcSegments'\r\nimport {MeasuredSegment} from './src/MeasuredSegment';\r\nimport {projectScroll} from './src/projectScroll'\r\nimport {Segment} from './src/Segment'\r\nimport deepEqual = require('deep-equal')\r\n\r\nexport class InfiniteList extends React.Component<Props, State> {\r\n    public render(): JSX.Element {\r\n        const {scrolled, heightUpdated, touchEnded, touchMoved, touchStarted} = this.actions$.publish\r\n        const {state, props, children, temporalScroll} = this\r\n        const {Segment, width, height} = props\r\n        const {segments, layout, useAutoLayout} = state\r\n\r\n        const paddingTop = useAutoLayout\r\n            ? <div key={'infinite-scroll-padding-top'}\r\n                   style={{height: existing(segments[0]) ? segments[0].offset : 0}}/>\r\n            : nothing\r\n\r\n        const contentStyle = {\r\n            width,\r\n            height: layout.totalHeight,\r\n            transform: temporalScroll === 0\r\n                ? 'none'\r\n                : `translateY(${-temporalScroll}px)`\r\n        }\r\n        const segmentStyle = (offset: px): CSSProperties => {\r\n            return useAutoLayout\r\n                ? {position: 'relative'}\r\n                : {position: 'absolute', top: `${offset}px`}\r\n        }\r\n\r\n        return <div className={classes.container} style={{width, height}}\r\n                    ref={ref => existing(ref) ? children.container = ref : nothing}\r\n                    onScroll={scrolled}\r\n                    onTouchStartCapture={touchStarted}\r\n                    onTouchEndCapture={touchEnded}\r\n                    onTouchMoveCapture={touchMoved}>\r\n            <div className={classes.content} style={contentStyle}\r\n                 ref={ref => existing(ref) ? children.content = ref : nothing}>\r\n                {paddingTop}\r\n                {segments.map(spec =>\r\n                    <div key={spec.id} className={classes.segment}\r\n                         style={segmentStyle(spec.offset)}\r\n                         ref={ref => existing(ref)\r\n                             ? children.segments.set(spec.id, ref)\r\n                             : children.segments.delete(spec.id)}>\r\n                        <MeasuredSegment {...{id: spec.id, Segment, width}}\r\n                                         onHeightChange={heightUpdated}/>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: Props) {\r\n        super(props)\r\n        this.children = {\r\n            container: document.createElement('div'),\r\n            content: document.createElement('div'),\r\n            segments: new Map<ListItemID, HTMLElement>()\r\n        }\r\n\r\n        const layout = ListLayoutImpl.create({\r\n            itemIDs: props.segmentIDs,\r\n            defaultHeight: Math.round(props.height / 6)\r\n        })\r\n        const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n        const focus = assume(props.focus, focus => layout.getByID(focus))\r\n        const scroll = ensure(assume(focus, focus => focus.offset - focusOffset), 0 as px)\r\n        const segments = calcSegments(scroll, 0, props.height, layout)\r\n        this.state = {scroll, layout, segments, useAutoLayout: true}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.children.container.scrollTop = this.state.scroll\r\n        this.work.add(this.updateState())\r\n        this.work.add(this.adjustScroll())\r\n        this.work.add(this.focusOnSegment())\r\n        this.work.add(this.callEventHandlers())\r\n        publishAll<Props>(this.props, this.props$.publish)\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {props, state, children} = this\r\n\r\n        if (prevProps !== props) {\r\n            publishAll<Props>(this.props, this.props$.publish)\r\n        }\r\n\r\n        if (prevState.layout !== state.layout) {\r\n            const {containerScroll, temporalScroll} = this\r\n            const prevScroll = containerScroll + temporalScroll\r\n\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const currScroll = Math.min(Math.max(projectScroll(\r\n                prevScroll, focusOffset,\r\n                prevState.layout, state.layout\r\n            ), 0), state.layout.totalHeight - props.height)\r\n\r\n            const expectedTemporalScroll = Math.ceil(currScroll - containerScroll)\r\n            if (Math.abs(temporalScroll - expectedTemporalScroll) > 1) {\r\n                this.temporalScroll = expectedTemporalScroll\r\n            }\r\n\r\n            if (!state.useAutoLayout && !prevState.useAutoLayout) {\r\n                Array.from(children.segments.entries())\r\n                    .forEach(([segmentID, element]) => {\r\n                        const prev = prevState.layout.getByID(segmentID)\r\n                        const curr = state.layout.getByID(segmentID)\r\n\r\n                        if (!existing(prev) || !existing(curr))\r\n                            return\r\n\r\n                        const prevScreenOffset = prev.offset - prevScroll\r\n                        const currScreenOffset = curr.offset - currScroll\r\n                        if (prevScreenOffset === currScreenOffset)\r\n                            return\r\n\r\n                        tweenHere(\r\n                            element,\r\n                            (current, to) => {\r\n                                return {\r\n                                    ...current,\r\n                                    y: prevScreenOffset - (to.y - current.y)\r\n                                }\r\n                            },\r\n                            (from, to) => {\r\n                                const diff = Math.abs(from.y - to.y) +\r\n                                    Math.abs(from.height - to.height) * 2\r\n\r\n                                return Math.min(Math.max(diff, 100), 300)\r\n                            },\r\n                            [0.445, 0.05, 0.55, 0.95]\r\n                        )\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.work.unsubscribe()\r\n    }\r\n\r\n    private readonly work: Subscription = new Subscription()\r\n\r\n    private readonly children: Children\r\n\r\n    private readonly actions$ = createDispatcher<Actions>(actionsFilter)\r\n    private readonly props$ = createDispatcher<Props>(propsFilter)\r\n\r\n    @Memoize()\r\n    private get height$(): Observable<px> {\r\n        const {height} = this.props$\r\n\r\n        return height.pipe(\r\n            startWith(this.props.height),\r\n            distinctUntilChanged(),\r\n            // log$('height'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get layout(): Observable<ListLayout> {\r\n        const {segmentIDs} = this.props$\r\n        const {heightUpdated} = this.actions$\r\n\r\n        const updates$: Observable<Array<ListItemShape>> = heightUpdated.pipe(\r\n            bufferTime(0, animationFrame),\r\n            filter(buffer => buffer.length > 0)\r\n        )\r\n\r\n        const layout$: Observable<ListLayout> = segmentIDs.pipe(\r\n            scan<Array<ListItemID>, [Array<ListItemID>, ListLayout]>(\r\n                ([prevIDs, prevLayout], currIDs) => currIDs === prevIDs\r\n                    ? [currIDs, prevLayout]\r\n                    : [currIDs, prevLayout.reflow({itemIDs: currIDs})],\r\n                [this.props.segmentIDs, this.state.layout]\r\n            ),\r\n            map(([_, layout]) => layout),\r\n            startWith(this.state.layout),\r\n            distinctUntilChanged(),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return layout$.pipe(\r\n            combineLatest(updates$),\r\n            map(([layout, updates]): ListLayout => layout.update(updates).clone()),\r\n            distinctUntilChanged(),\r\n            // log$('layout'),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    private get temporalScroll(): px {\r\n        const {temporalScroll$} = this\r\n        return (temporalScroll$ as BehaviorSubject<px>).getValue()\r\n    }\r\n\r\n    private set temporalScroll(scroll: px) {\r\n        const {temporalScroll$} = this\r\n        const {content} = this.children;\r\n\r\n        (temporalScroll$ as BehaviorSubject<px>).next(scroll)\r\n        content.style.transform = scroll === 0\r\n            ? 'none'\r\n            : `translateY(${-scroll}px)`\r\n    }\r\n\r\n    private readonly temporalScroll$: Observable<px> = new BehaviorSubject(0)\r\n\r\n    private get containerScroll(): px {\r\n        const {container} = this.children\r\n        return container.scrollTop\r\n    }\r\n\r\n    private set containerScroll(scroll: px) {\r\n        const {container} = this.children\r\n        container.style['-webkit-overflow-scrolling'] = 'auto'\r\n        container.scrollTop = scroll\r\n        container.style['-webkit-overflow-scrolling'] = 'touch'\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScroll$(): Observable<px> {\r\n        const {scrolled, touchStarted, touchEnded} = this.actions$\r\n\r\n        const shouldSample: Observable<Pulse> = scrolled.pipe(\r\n            merge(touchStarted),\r\n            merge(touchEnded),\r\n            merge(interval(0, animationFrame)),\r\n            timestamp(),\r\n            distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            sampleTime(0, animationFrame),\r\n            startWith(Pulse)\r\n        )\r\n\r\n        return shouldSample.pipe(\r\n            map(() => this.containerScroll),\r\n            map(Math.round),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get containerScrollVelocity$(): Observable<Velocity> {\r\n        const {containerScroll$} = this\r\n\r\n        const move = containerScroll$.pipe(\r\n            timestamp(),\r\n            // distinctUntilChanged((prev, curr) => curr.timestamp - prev.timestamp < 100),\r\n            pairwise()\r\n        )\r\n\r\n        return move.pipe(\r\n            map(([prev, curr]) =>\r\n                (curr.value - prev.value) / (curr.timestamp - prev.timestamp)\r\n            ),\r\n            startWith(0),\r\n            bufferCount(3, 1),\r\n            map(leastDeviation),\r\n            filter(existing),\r\n            shareReplay(1)\r\n        )\r\n    }\r\n\r\n    @Memoize()\r\n    private get useAutoLayout$(): Observable<boolean> {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        return containerScrollVelocity$.pipe(\r\n            map(Math.abs),\r\n            map(speed => speed > 3),\r\n            bufferCount(2, 1),\r\n            map(buffer => buffer.filter(isTrue).length > buffer.filter(isFalse).length),\r\n            distinctUntilChanged(),\r\n            // log$('useAutoLayout'),\r\n            shareReplay(1)\r\n        )\r\n\r\n    }\r\n\r\n    @Memoize()\r\n    private get scroll$(): Observable<Velocity> {\r\n        const {containerScroll$, temporalScroll$} = this\r\n\r\n        return containerScroll$.pipe(\r\n            withLatestFrom(temporalScroll$),\r\n            map(([container, temporal]) => container + temporal)\r\n        )\r\n    }\r\n\r\n    private get velocity(): Velocity {\r\n        return this['_velocity']\r\n    }\r\n\r\n    private updateState(): Subscription {\r\n        const {scroll$, layout, containerScrollVelocity$, height$, useAutoLayout$} = this\r\n\r\n        const preload$: Observable<px> = containerScrollVelocity$.pipe(\r\n            bufferCount(3, 1),\r\n            map(calcAverage),\r\n            filter(existing),\r\n            map(Math.round),\r\n            map(velocity => Math.max(Math.min(velocity * 500, 10000), -10000)),\r\n            distinctUntilChanged(),\r\n            // log$('preload'),\r\n            shareReplay(1)\r\n        )\r\n\r\n        const state: Observable<State> = scroll$.pipe(\r\n            combineLatest(preload$, useAutoLayout$, layout, height$),\r\n            map(([scroll, preload, useAutoLayout, layout, height]): State => {\r\n                const segments = calcSegments(scroll, preload, height, layout)\r\n                return {layout, segments, useAutoLayout, scroll}\r\n            }),\r\n            distinctUntilChanged((prev, curr) =>\r\n                prev.useAutoLayout === curr.useAutoLayout &&\r\n                prev.layout === curr.layout &&\r\n                deepEqual(prev.segments, curr.segments)\r\n            ),\r\n            startWith(this.state),\r\n            // tap(state=> console.log(state.useAutoLayout)),\r\n            shareReplay(1)\r\n        )\r\n\r\n        return state.subscribe(state => this.setState(state))\r\n    }\r\n\r\n    private adjustScroll(): Subscription {\r\n        const {containerScrollVelocity$} = this\r\n\r\n        const shouldApplyTemporalScroll: Observable<Pulse> = containerScrollVelocity$.pipe(\r\n            bufferCount(2, 1),\r\n            filter(buffer => !buffer.some(v => Math.abs(v) > 0.01))\r\n        )\r\n\r\n        return shouldApplyTemporalScroll.subscribe(() => {\r\n            const {children, temporalScroll, containerScroll} = this\r\n            if (temporalScroll === 0)\r\n                return\r\n            children.segments.forEach((segment, id) => {\r\n                const {segments} = this.state\r\n                const position = segments.find(position => position.id === id)\r\n                if (existing(position)) {\r\n                    segment.style.position = 'absolute'\r\n                    segment.style.top = `${position.offset}px`\r\n                }\r\n            })\r\n            this.containerScroll = containerScroll + temporalScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private focusOnSegment(): Subscription {\r\n        const {props$, children} = this\r\n\r\n        const newFocusSegment = props$.focus.pipe(\r\n            distinctUntilChanged(),\r\n            filter(existing),\r\n            map(focus => this.state.layout.getByID(focus)),\r\n            filter(existing)\r\n        )\r\n\r\n        return newFocusSegment.subscribe(segment => {\r\n            const focusOffset = calcFocusOffset(this.props.focusOffset, this.props.height)\r\n            const targetScroll = segment.offset - focusOffset\r\n            this.containerScroll = targetScroll\r\n            this.temporalScroll = 0\r\n        })\r\n    }\r\n\r\n    private callEventHandlers(): Subscription {\r\n        const {scroll$, layout} = this\r\n\r\n        const work = new Subscription()\r\n\r\n        work.add(scroll$.subscribe(scroll => {\r\n            if (existing(this.props.onScroll))\r\n                this.props.onScroll(scroll)\r\n        }))\r\n        work.add(layout.subscribe(layout => {\r\n            if (existing(this.props.onReflow))\r\n                this.props.onReflow(layout)\r\n        }))\r\n\r\n        return work\r\n    }\r\n}\r\n\r\ntype Props = {\r\n    segmentIDs: Array<ListItemID>\r\n    width: px\r\n    height: px\r\n    Segment: Segment\r\n    focus?: ListItemID\r\n    focusOffset?: px\r\n    onScroll?: EventHandler<px>\r\n    onReflow?: EventHandler<ListLayout>\r\n}\r\nconst propsFilter: Pipes<Required<Props>> = {\r\n    segmentIDs: distinctUntilChanged(),\r\n    width: distinctUntilChanged(),\r\n    height: distinctUntilChanged(),\r\n    Segment: distinctUntilChanged(),\r\n    focus: distinctUntilChanged(),\r\n    focusOffset: distinctUntilChanged(),\r\n    onScroll: distinctUntilChanged(),\r\n    onReflow: distinctUntilChanged()\r\n}\r\n\r\ntype State = {\r\n    scroll: px\r\n    layout: ListLayout\r\n    segments: Array<ListItemPosition>\r\n    useAutoLayout: boolean\r\n}\r\ntype Children = {\r\n    container: HTMLElement\r\n    content: HTMLElement\r\n    segments: Map<ListItemID, HTMLElement>\r\n}\r\n\r\ntype Actions = {\r\n    scrolled: React.SyntheticEvent<HTMLDivElement>\r\n    touchStarted: React.TouchEvent<HTMLDivElement>\r\n    touchMoved: React.TouchEvent<HTMLDivElement>\r\n    touchEnded: React.TouchEvent<HTMLDivElement>\r\n    heightUpdated: ListItemShape\r\n}\r\nconst actionsFilter: Pipes<Actions> = {\r\n    scrolled: Pass,\r\n    touchStarted: Pass,\r\n    touchMoved: Pass,\r\n    touchEnded: Pass,\r\n    heightUpdated: Pass\r\n}\r\n\r\nexport const classes = sharedInstance.createStyleSheet({\r\n    container: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        'overflow-x': 'hidden',\r\n        'overflow-y': 'scroll',\r\n        'overflow-anchor': 'none', // https://stackoverflow.com/questions/42205462/disable-chromes-scroll-preserving-feature\r\n        'scroll-behavior': 'auto',\r\n        '-webkit-overflow-scrolling': 'touch',\r\n        contain: 'strict',\r\n        'will-change': 'transform', // https://bugs.chromium.org/p/chromium/issues/detail?id=514303\r\n        '-webkit-font-smoothing': 'subpixel-antialiased'\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        display: 'block',\r\n        contain: 'strict',\r\n        'will-change': 'transform, height'\r\n    },\r\n    segment: {\r\n        display: 'block',\r\n        'will-change': 'top, height'\r\n    }\r\n}).attach().classes\r\n\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","import * as loremIpsum from 'lorem-ipsum'\r\nimport * as React from 'react';\r\nimport {PropsOf} from '../../../react/PropsOf';\r\nimport {ensure} from '../../../utils/ensure'\r\nimport {getRandomIntInclusive} from '../../../utils/getRandomIntInclusive'\r\nimport {Segment} from '../src/Segment';\r\n\r\nexport class SegmentExample extends React.Component<PropsOf<Segment>, State> {\r\n    componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            if (this.state.type !== 'text')\r\n                return\r\n            const text = loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[this.props.id] = text\r\n            this.setState({text})\r\n        }, getRandomIntInclusive(3000, 5000))\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval)\r\n    }\r\n\r\n    render() {\r\n        return <div style={{\r\n            display: 'block',\r\n            width: this.props.width,\r\n            backgroundColor: 'white',\r\n            wordWrap: 'break-word',\r\n            wordBreak: 'break-all'\r\n        }}>\r\n            <div>{this.props.id}</div>\r\n            <br/>\r\n            {\r\n                this.state.type === 'text'\r\n                    ? this.state.text\r\n                    : <img style={{width: this.props.width}} src={this.state.image}/>\r\n            }\r\n            <br/>\r\n        </div>\r\n    }\r\n\r\n    constructor(props: PropsOf<Segment>) {\r\n        super(props)\r\n        const type = ensure(typeCache[props.id], Math.random() > 0.2 ? 'text' : 'image')\r\n        typeCache[props.id] = type\r\n\r\n        let state: State\r\n\r\n        if (type === 'text') {\r\n            let text = textCache[props.id] || loremIpsum({count: getRandomIntInclusive(3, 20)})\r\n            textCache[props.id] = text\r\n            this.state = {type, text}\r\n        } else {\r\n            const image = imgCache[props.id]\r\n                || `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`\r\n            imgCache[props.id] = image\r\n            this.state = {type, image}\r\n        }\r\n    }\r\n\r\n    private interval: any\r\n}\r\n\r\nconst typeCache: { [id: string]: 'text' | 'image' } = {}\r\nconst textCache: { [id: string]: string } = {}\r\nconst imgCache: { [id: string]: string } = {}\r\n\r\ntype State = { type: 'text', text: string }\r\n    | { type: 'image', image: string }\r\n\r\n\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom'\r\nimport ErrorBoundary from 'react-error-boundary'\r\nimport {ListItemID} from '../../../layouts/ListLayout'\r\nimport {InfiniteList} from '../InfiniteList'\r\nimport {SegmentExample} from './SegmentExample'\r\n\r\nconst segmentIDs: Array<ListItemID> = []\r\nfor (let i = 0; i < 100000; i++) {\r\n    segmentIDs.push(i.toString())\r\n}\r\n\r\nexport class Demo extends React.Component<{}, {\r\n    width: number,\r\n    height: number,\r\n    focusOffset: number\r\n}> {\r\n    render() {\r\n        const {width, height, focusOffset} = this.state\r\n\r\n        return <InfiniteList Segment={SegmentExample}\r\n                             {...{width, height, segmentIDs, focusOffset}}\r\n                             onScroll={this.onScroll}/>\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => {\r\n            const width = window.innerWidth\r\n            const height = window.innerHeight\r\n            this.setState({width, height})\r\n        })\r\n    }\r\n\r\n    onScroll = (scroll: px) => {\r\n        if (Math.abs(scroll) < 10) {\r\n            this.setState({focusOffset: 0})\r\n        } else {\r\n            this.setState({focusOffset: this.state.height / 3})\r\n        }\r\n    }\r\n\r\n    constructor(props: {}) {\r\n        super(props)\r\n        this.state = {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            focusOffset: 0\r\n        }\r\n    }\r\n}\r\n\r\nconst root = document.getElementById('root')!\r\nReactDOM.render(\r\n    <ErrorBoundary FallbackComponent={({componentStack, error}) =>\r\n        <pre style={{width: window.innerWidth, wordBreak: 'break-all'}}>\r\n            <p>{componentStack}</p>\r\n            <p>{error.name}</p>\r\n            <p>{error.stack}</p>\r\n            <p>{error.message}</p>\r\n        </pre>\r\n    }>\r\n        <Demo/>\r\n    </ErrorBoundary>,\r\n    root\r\n)\r\n\r\n"]}