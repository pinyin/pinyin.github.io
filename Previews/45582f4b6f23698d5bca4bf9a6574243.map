{"version":3,"sources":["..\\..\\..\\..\\..\\..\\lib\\typecheck\\existing.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\getRandomIntInclusive.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\nothing.ts","..\\..\\..\\..\\..\\..\\lib\\react\\measure\\measuring.tsx","..\\..\\..\\..\\..\\..\\lib\\rxjs\\log$.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\combineLatestMaybe.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\applyMiddleware.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createPublishers.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createSubjects.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createDispatcher.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\ensure.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\publishAll.ts","..\\Previews.tsx","Previews.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA4B,KAAkB;ACA9C,IDCI,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI,CAAA,qCCDsC;ADE/F,CAAC;AAFD,ACEA,4BDAC,GCAqC,GAAW,EAAE,GAAW;ADC9D,ICAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CDAW,ECAR,CAAC,CAAC,CDAqB;IAC1C,ACAA,GAAG,GAAG,CDAC,CAAC,ECAE,CAAC,KDAK,ACAA,CDAC,ACAA,GAAG,CAAC,CDAC,ACAA,CDAC,CAAA;AAC3B,CAAC,GCAG,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,uDAAuD;ADFrH,ACGA,CAAC,iCDDA;ACHD,sDAIC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNY,QAAA,OAAO,GAAY,IAAI,CAAA;;;;;;ACApC,6BAA8B;AAC9B,oCAAsC;AACtC,qEAAqD;AACrD,ACHA,6BDG8B,eCHI;ADIlC,ACDA,cAAwB,GAAW,EAAE,IAAwB,8BDCC;AAC9D,ICDI,OAAO,eAAG,CAAC,UAAA,KAAK,IAAI,CDCmB,MCDnB,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAA5C,CAA4C,CAAC,CAAA;ADGrE,AENA,ADIA,CAAC,6DDE+D,CENJ;AFQ5D,AGNA,ADDA,ADCA,mBDOI,CCLH,KEDG,GHMY,GGNU,EAAE,KAAe,MDFK;AAChD,IFSI,AGNA,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,oBDHiB;AAC/C,AEFA,QJUsB,CGLb,GAAG,CAAC,UAAA,GAAG,ACLmC,QAAqB,KJUJ,KER5B;AACxC,IEFI,IJ+BI,AG3BY,GCJT,IDIS,ECJH,CAAC,GJ+BE,CI/BE,CAAC,EDID,CH2B8B,EG3B7B,EDFI,CCED,ACJK,CAAC,GDIH,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAE;ADAtD,AGPA,SDIS,GJ8BD,AI9BI,CAAC,UAAA,CJ+BD,EI/BI,EFGsB,WAAiC,CGPnC,ELmClB,KAAK,CAAC,SAcf;AK9CT,IFIoB,ADChB,CCDkD,CAAC,EDC7C,AEJU,IJiCR,GIjCQ,EJiCJ,CAAC,ME7BS,AGLuB,CDC3B,CJiCG,CE7BI,CEJN,CJiCK,AKlCsC,EDCxC,EJiCM,EIjCH,GFIW,CAAC,GAAG,CAAC,EEJf,KAAoB,GFIL,CEJU,OAAA,EFIA,IF6BT,CAC9B,CIlC+C,CAAC,GAAG,CAAC,CAAC,GJkCpD,CIlCwD,CAAC,KJkC3B,AIlCgC,CAAC,CJkC/B,CIlCM,CAAyB,KAAE,CJkCT;AMtCzE,IDII,IHKI,CCDC,EEJE,IFII,ADCP,CF8BY,AG/BJ,CEJC,CAAC,ELmCQ,EKnCJ,CAAC,EHKL,CF8Bc,AG/Bf,ADCE,EGLS,CLmCO,AKnCN,CFIR,ADCE,CAAC,CCDD,IH+BmB,AG/Bf,CH+BgB,CAAC,CAAC,CAAC,AG/Bd,OAAA,IH+ByB,CAAC,AE9BzB,CCDK,ADCM,AITK,CHQV,IH+ByB,CAAA,CG/BnB,CAAC,IAAI,EAAE,GDCD,CCDK,ADCJ,CCDK,ADCJ,ECDrB,CAAyB,CAAQ,CAAA;AACjE,AGRA,CHQC,GDAO,AELY,CFKiC,AEL6B,CFM7E,AEN8E,CFM9E,EGLI,GAAG,CAAC,GLmCO,IAAM,GKnCb,ELmCkB,CKnCf,ELmCkB,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IMvCN,CNuCW,CAAA;AGrC9D,AGDA,ACFA,ILYI,IGPgB,CDAX,EFOE,IEPI,ACAK,CLoCA,AIpCJ,IJoCQ,KKpCF,CDAL,ECAM,EDAF,CCAK,CDAH,GCAM,CDAF,GJoCK,AKpCC,CLoCA,AE7BT,AEPQ,EDI/B,GHgCoC,CAAC,CIpCN,GGLiB,CPyCN,AMvCI,CNuCH,CIpCN,CAAC,ECAC,EAAE,EDAG,CAAC,ECAF,EDAM,CJoCQ,CAAC,AIpCP,EJoCS,EIpCL,CFO5B,AEP6B,EAAzB,CAAyB,CAAQ,CAAA,WFOrB,GAAE,IAAI,CAC1C,kBAAM,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,IAAI,CAAC,mBAAQ,CAAC,EAArB,CAAqB,CAAC,EACvC,UAAI,CAAC,oBAAoB,CAAC,CAC7B,CAAA;AACL,AIVA,AFAA,AGJA,CLcC,AEVA,eGJyB,IPwCF,COxCiB,EAAE,EPwCf,CAAC,AMnCzB,KNmC8B,CAAC,GOxCuB,CDKxB,UNmCe,CAAC,MAAM,CAAC,CAAA;AEnCzD,AELA,AIFA,IFSI,ADJgB,AEFhB,CFEwC,CAAC,ECInC,GCNC,KDMO,CNkCG,EMlCA,CETwB,KAAQ,EAAE,MDGjC,CAAC,CCHoE,IDG/D,CAAC,IHG5B,AGHgC,ILahC,EIPkC,ACNI,CDMU,ACNT,KAAK,CAAC,IDMa,CAAC,ACNT,CDMS,ACNR,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAA;AAC3E,CAAC,GDMG,AETA,KHKK,CGLC,CFSC,AETA,IHKI,AGLA,CR2CK,AKtCJ,AGLA,CFSC,CAAC,ENkCM,IMlCA,AETA,CFUhB,AEViB,CHKR,AGLS,CFUjB,GDLY,EAAE,CGLU,CFUjB,AEVkB,EFUhB,ADLS,GLsCK,CAAC,AKtCD,IGLE,CR2CG,CAAC,CKtCN,AGLK,IR2CM,AQ3CF,CR2CG,CKtCN,CAAC,IGLE,EHKI,CAAC,ILsCW,AKtCP,CLsCQ,AQ3CT,CHKG,AGLF,CR2CU,EQ3CP,CFUnB,ADLsB,AGLF,CFUN,ADLS,AGLF,EHKvB,CAAyB,CAAQ,CAAA,AGLL,CAAC,EFUL,CAAC,A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","file":"45582f4b6f23698d5bca4bf9a6574243.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","export const nothing: nothing = null\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {isString} from 'util';\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\n\nexport function measuring<C extends React.ComponentClass<any> | keyof React.ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                {ref: (it: any) => this.updateObserver(it)}\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<C> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateObserver(ref: Maybe<React.ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if (notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if (!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends React.ComponentClass<any> | keyof React.ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import {tap} from 'rxjs/operators'\nimport {Pipe} from './Pipe'\n\nexport function log$<T>(tag: string, func?: (value: T) => any): Pipe<T, T> {\n    return tap(event => console.log(tag, func ? func(event) : event))\n}\n","import {Observable} from 'rxjs/Observable'\nimport {combineLatest} from 'rxjs/observable/combineLatest';\nimport {filter, startWith} from 'rxjs/operators'\nimport {existing} from '../typecheck/existing';\nimport {nothing} from '../utils/nothing'\nimport {log$} from './log$'\n\nexport function combineLatestMaybe<T>(observables: Array<Observable<T>>): Observable<Array<Maybe<T>>> {\n    const maybeObservables = observables.map(observable =>\n        observable.pipe(startWith<Maybe<T>>(nothing))\n    )\n\n    return combineLatest(...maybeObservables).pipe(\n        filter(values => values.some(existing)),\n        log$('combineLatestMaybe')\n    )\n}\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        {publish: createPublishers<Required<T>>(subjects)},\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {notExisting} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: Maybe<A>, defaultValue: A): A {\n    return notExisting(maybe) || Number.isNaN(maybe) ? defaultValue : maybe\n}\n\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","import sharedInstance from 'jss'\nimport * as React from 'react'\nimport FlipMove from 'react-flip-move'\nimport {Observable} from 'rxjs/Observable'\nimport {bufferTime, combineLatest, distinctUntilChanged, map, scan, shareReplay, startWith, switchMap, withLatestFrom} from 'rxjs/operators'\nimport {Subscription} from 'rxjs/Subscription'\nimport {Memoize} from 'typescript-memoize'\nimport {measuring} from '../../../../../lib/react/measure/measuring'\nimport {combineLatestMaybe} from '../../../../../lib/rxjs/combineLatestMaybe'\nimport {createDispatcher} from '../../../../../lib/rxjs/createDispatcher'\nimport {log$} from '../../../../../lib/rxjs/log$'\nimport {Pipes} from '../../../../../lib/rxjs/Pipes'\nimport {existing} from '../../../../../lib/typecheck/existing'\nimport {ensure} from '../../../../../lib/utils/ensure';\nimport {publishAll} from '../../../../../lib/utils/publishAll'\nimport {App} from '../../App'\nimport {View} from '../View'\nimport deepEqual = require('deep-equal')\n\nexport class Previews extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props)\n        this.state = {columns: [[]]}\n    }\n\n    componentDidMount() {\n        this.work.add(this.updateState())\n        publishAll<Props>(this.props, this.props$.publish)\n    }\n\n    componentDidUpdate() {\n        publishAll<Props>(this.props, this.props$.publish)\n    }\n\n    render() {\n        const {heightUpdate} = this.actions$.publish\n        const {columns} = this.state\n        const {MeasuredDiv} = this\n\n        return <div className={classes.container}>\n            <div className={classes.columns}>\n                {columns.map((column, index) =>\n                    <FlipMove key={index} className={classes.column}\n                              duration={2000}\n                              enterAnimation={'fade'} leaveAnimation={'fade'}\n                              appearAnimation={'fade'}>\n                        {column.map(exhibition =>\n                            <MeasuredDiv key={exhibition.id} className={classes.item}\n                                         onHeightChange={height =>\n                                             heightUpdate({id: exhibition.id, height})\n                                         }>\n                                <img className={classes.preview}\n                                     style={{display: 'block'}} src={exhibition.image}/>\n                            </MeasuredDiv>\n                        )}\n                    </FlipMove>\n                )}\n            </div>\n        </div>\n    }\n\n    componentWillUnmount() {\n        this.work.unsubscribe()\n    }\n\n    private MeasuredDiv = measuring('div')\n\n    private readonly props$ = createDispatcher<Props>(propsMiddleware)\n    private readonly actions$ = createDispatcher<Actions>(actionsMiddleware)\n\n    private work = new Subscription()\n\n    @Memoize()\n    private get columnNum$(): Observable<1 | 2> {\n        const {width} = this.props$\n\n        return width.pipe(\n            map<px, 1 | 2>(width => width > 600 ? 2 : 1),\n            startWith(this.state.columns.length as 1 | 2),\n            log$('columnNum'),\n            distinctUntilChanged(),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get heights$(): Observable<Map<App.ExhibitionID, px>> {\n        const {heightUpdate} = this.actions$\n\n        return heightUpdate.pipe(\n            bufferTime(200),\n            scan<Array<HeightUpdate>, Map<App.ExhibitionID, px>>(\n                (heights, updates) => {\n                    if (!updates.some(update => heights.get(update.id) !== update.height))\n                        return heights\n                    const newHeights = new Map(heights)\n                    updates.forEach(update =>\n                        newHeights.set(update.id, update.height)\n                    )\n                    return newHeights\n                },\n                new Map()\n            ),\n            distinctUntilChanged(),\n            startWith(new Map()),\n            log$('heights'),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get layout$(): Observable<Array<Array<App.ExhibitionID>>> {\n        const {columnNum$, heights$} = this\n        const {exhibitionIDs} = this.props$\n\n        return exhibitionIDs.pipe(\n            combineLatest(columnNum$),\n            withLatestFrom(heights$),\n            map(([[ids, columnNum], heights]) => {\n                if (columnNum === 1)\n                    return [ids]\n                const columns = [\n                    [] as Array<App.ExhibitionID>,\n                    [] as Array<App.ExhibitionID>\n                ]\n                ids.forEach(id => {\n                    const [columnA, columnB] = columns\n                    const [heightA, heightB] = columns.map(column => columnHeight(column, heights))\n                    heightA <= heightB ? columnA.push(id) : columnB.push(id)\n                })\n                return columns\n            }),\n            distinctUntilChanged(deepEqual),\n            log$('columns'),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get columns$(): Observable<Array<Array<App.Exhibition>>> {\n        const {getExhibition} = this.props$\n        const {layout$} = this\n\n        return layout$.pipe(\n            combineLatest(getExhibition),\n            switchMap(([columns, getExhibition]) =>\n                combineLatestMaybe(columns.map(column =>\n                    combineLatestMaybe<App.Exhibition>(column.map(id => getExhibition(id)))\n                        .pipe(map(values => values.filter(existing)))\n                )).pipe(\n                    map(values => values.filter(existing))\n                )\n            ),\n            startWith(this.state.columns),\n            distinctUntilChanged(deepEqual),\n            shareReplay(1)\n        )\n    }\n\n    private updateState(): Subscription {\n        const {columns$} = this\n\n        return columns$.pipe(\n            map((columns) => ({columns})),\n            distinctUntilChanged(deepEqual),\n            log$('state')\n        ).subscribe(state => this.setState(state))\n    }\n}\n\nfunction columnHeight(column: Array<App.ExhibitionID>, heights: Map<App.ExhibitionID, px>): px {\n    return column.reduce((height, id) => height + ensure<px>(heights.get(id), 1), 0)\n}\n\ntype Props = ContainerDecideWidth & SelfDecideHeight & {\n    exhibitionIDs: Array<App.ExhibitionID>\n    onOpen?: EventHandler<View.Actions.OpenExhibition>\n    getExhibition: App.GetExhibition\n}\nconst propsMiddleware: Pipes<Required<Props>> = {\n    width: distinctUntilChanged(),\n    exhibitionIDs: distinctUntilChanged(deepEqual),\n    onOpen: distinctUntilChanged(),\n    getExhibition: distinctUntilChanged(),\n    onHeightChange: distinctUntilChanged()\n}\n\ntype Actions = {\n    heightUpdate: HeightUpdate\n}\nconst actionsMiddleware: Pipes<Actions> = {\n    heightUpdate: distinctUntilChanged(deepEqual)\n}\ntype HeightUpdate = {\n    id: App.ExhibitionID\n    height: px\n}\n\ntype State = {\n    columns: Array<Array<App.Exhibition>>\n}\n\nconst classes = sharedInstance.createStyleSheet({\n    container: {\n        position: 'relative',\n        display: 'flex',\n        'justify-content': 'center'\n    },\n    columns: {\n        display: 'flex',\n        'max-width': '800px',\n        'justify-content': 'center',\n        width: '100%'\n    },\n    column: {\n        position: 'relative',\n        'flex-grow': 1\n    },\n    item: {\n        position: 'relative',\n        width: '100%'\n    },\n    preview: {\n        'max-width': '100%',\n        'max-height': '100%;'\n    }\n}).attach().classes\n\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom';\nimport {Observable} from 'rxjs/Observable'\nimport {empty} from 'rxjs/observable/empty'\nimport {timer} from 'rxjs/observable/timer'\nimport {map} from 'rxjs/operators'\nimport {existing} from '../../../../../../lib/typecheck/existing'\nimport {getRandomIntInclusive} from '../../../../../../lib/utils/getRandomIntInclusive'\nimport {App} from '../../../App'\nimport {Previews} from '../Previews'\n\nconst ids: Array<App.ExhibitionID> = []\nconst images: Map<App.ExhibitionID, string> = new Map<App.ExhibitionID, string>()\nfor (let i = 0; i < 10; i++) {\n    const id = i.toString()\n    ids.push(id)\n    images.set(id, `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`)\n}\n\nfunction getExhibition(id: App.ExhibitionID): Observable<App.Exhibition> {\n    const url = images.get(id)\n    return existing(url)\n        ? timer(getRandomIntInclusive(3000, 30000)).pipe(map(() => ({id, image: url, text: ''})))\n        : empty()\n}\n\nclass Demo extends React.Component<{}, {\n    width: number,\n    height: number\n}> {\n    render() {\n        const {width, height} = this.state\n\n        return <div style={{width, height, display: 'flex', justifyContent: 'center'}}>\n            <Previews width={width} exhibitionIDs={ids}\n                      getExhibition={getExhibition}/>\n        </div>\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => {\n            const width = window.innerWidth\n            const height = window.innerHeight\n            this.setState({width, height})\n        })\n    }\n\n    constructor(props: {}) {\n        super(props)\n        this.state = {\n            width: window.innerWidth,\n            height: window.innerHeight\n        }\n    }\n}\n\nconst root = document.getElementById('root')!\nReactDOM.render(<Demo/>, root)\n"]}