{"version":3,"sources":["..\\..\\..\\..\\..\\..\\lib\\typecheck\\existing.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\getRandomIntInclusive.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\nothing.ts","..\\..\\..\\..\\..\\..\\lib\\react\\measure\\measuring.tsx","..\\..\\..\\..\\..\\..\\lib\\rxjs\\log$.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\combineLatestMaybe.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\applyMiddleware.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createPublishers.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createSubjects.ts","..\\..\\..\\..\\..\\..\\lib\\rxjs\\createDispatcher.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\ensure.ts","..\\..\\..\\..\\..\\..\\lib\\utils\\publishAll.ts","..\\Previews.tsx","Previews.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA4B,KAAkB;ACA9C,IDCI,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI,CAAA,qCCDsC;ADE/F,CAAC;AAFD,ACEA,4BDAC,GCAqC,GAAW,EAAE,GAAW;ADC9D,ICAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CDAW,ECAR,CAAC,CAAC,CDAqB;IAC1C,ACAA,GAAG,GAAG,CDAC,CAAC,ECAE,CAAC,KDAK,ACAA,CDAC,ACAA,GAAG,CAAC,CDAC,ACAA,CDAC,CAAA;AAC3B,CAAC,GCAG,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,uDAAuD;ADFrH,ACGA,CAAC,iCDDA;ACHD,sDAIC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNY,QAAA,OAAO,GAAY,IAAI,CAAA;;;;;;;;;;;;;;;;;ACApC,6BAA8B;AAE9B,oCAAsC;AACtC,qEAAqD;AACrD,ACJA,4CAAkC,SDI4B;AAC9D,ACFA,cAAwB,GAAW,EAAE,IAAwB,wBDElB;AAE3C,ICHI,OAAO,eAAG,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,CDGgC,ECH7B,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAA5C,CAA4C,CAAC,CAAA;ADIrE,AEPA,ADIA,CAAC,4BDG6B,eEPkB;AFShD,AGPA,ADDA,ADCA,mBDQI,CCNH,KEDG,GHOY,GGPU,EAAE,KAAe,MDFH;AACxC,IFUI,AGPA,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,oBDHiB;AAC/C,AEFA,QJWsB,CGNb,GAAG,CAAC,UAAA,GAAG,ACLmC,QAAqB,KJWJ,wBETR;AAC5D,IEFI,IJgCI,AG5BY,GCJT,IDIS,ECJH,CAAC,GJgCE,CIhCE,CAAC,EDID,CH4B6C,EG5B5C,EDFI,CCED,ACJK,CAAC,GDIH,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAE;ADAtD,AGPA,SDIS,GJ+BD,AI/BI,CAAC,UAAA,CJgCD,EIhCI,EFGsB,WAAiC,CGPnC,ELoClB,KAAK,CAAC,SAcf;AK/CT,IFIoB,ADChB,CCDkD,CAAC,EDC7C,AEJU,IJkCR,GIlCQ,EJkCJ,CAAC,ME9BS,AGLuB,CDC3B,CJkCG,CE9BI,CEJN,CJkCK,AKnCsC,EDCxC,EJkCM,EIlCH,GFIW,CAAC,GAAG,CAAC,EEJf,KAAoB,GFIL,CEJU,OAAA,EFIA,IF8BT,CAC9B,CInC+C,CAAC,GAAG,CAAC,CAAC,GJmCpD,CInCwD,CAAC,KJmC3B,AInCgC,CAAC,CJmC/B,CInCM,CAAyB,KAAE,CJmCT;AMvCzE,IDII,IHKI,CCDC,EEJE,IFII,ADCP,CF+BY,AGhCJ,CEJC,CAAC,ELoCQ,EKpCJ,CAAC,EHKL,CF+Bc,AGhCf,ADCE,EGLS,CLoCO,AKpCN,CFIR,ADCE,CAAC,CCDD,IHgCmB,AGhCf,CHgCgB,CAAC,CAAC,CAAC,AGhCd,OAAA,IHgCyB,CAAC,AE/BzB,CCDK,ADCM,AITK,CHQV,IHgCyB,CAAA,CGhCnB,CAAC,IAAI,EAAE,GDCD,CCDK,ADCJ,CCDK,ADCJ,ECDrB,CAAyB,CAAQ,CAAA;AACjE,AGRA,CHQC,GDAO,AELY,CFKiC,AEL6B,CFM7E,AEN8E,CFM9E,EGLI,GAAG,CAAC,GLoCO,IAAM,GKpCb,ELoCkB,CKpCf,ELoCkB,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IMxCN,CNwCW,CAAA;AGtC9D,AGDA,ACFA,ILYI,IGPgB,CDAX,EFOE,IEPI,ACAK,CLqCA,AIrCJ,IJqCQ,KKrCF,CDAL,ECAM,EDAF,CCAK,CDAH,GCAM,CDAF,GJqCK,AKrCC,CLqCA,AE9BT,AEPQ,EDI/B,GHiCoC,CAAC,CIrCN,GGLiB,CP0CN,AMxCI,CNwCH,CIrCN,CAAC,ECAC,EAAE,EDAG,CAAC,ECAF,EDAM,CJqCQ,CAAC,AIrCP,EJqCS,EIrCL,CFO5B,AEP6B,EAAzB,CAAyB,CAAQ,CAAA,WFOrB,GAAE,IAAI,CAC1C,kBAAM,CAAC,UAAA,MAAM,IAAG,OAAA,MAAM,CAAC,IAAI,CAAC,mBAAQ,CAAC,EAArB,CAAqB,CAAC,EACtC,UAAI,CAAC,oBAAoB,CAAC,CAC7B,CAAA;AACL,AIVA,AFAA,AGJA,CLcC,AEVA,eGJyB,IPyCF,COzCiB,EAAE,EPyCf,CAAC,AMpCzB,KNoC8B,CAAC,GOzCuB,CDKxB,UNoCe,CAAC,MAAM,CAAC,CAAA;AEpCzD,AELA,AIFA,IFSI,ADJgB,AEFhB,CFEwC,CAAC,ECInC,GCNC,KDMO,CNmCG,EMnCA,CETwB,KAAQ,EAAE,MDGjC,CAAC,CCHoE,IDG/D,CAAC,IHG5B,AGHgC,ILahC,EIPkC,ACNI,CDMU,ACNT,KAAK,CAAC,IDMa,CAAC,ACNT,CDMS,ACNR,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAA;AAC3E,CAAC,GDMG,AETA,KHKK,CGLC,CFSC,AETA,IHKI,AGLA,CR4CK,AKvCJ,AGLA,CFSC,CAAC,ENmCM,IMnCA,AETA,CFUhB,AEViB,CHKR,AGLS,CFUhB,GDLW,EAAE,CGLU,CFUhB,AEViB,EFUf,ADLQ,GLuCK,CAAC,AKvCD,IGLE,CR4CG,CAAC,CKvCN,AGLK,IR4CM,AQ5CF,CR4CG,CKvCN,CAAC,IGLE,EHKI,CAAC,ILuCW,AKvCP,CLuCQ,AQ5CT,CHKG,AGLF,CR4CU,EQ5CP,CFUlB,ADLqB,AGLF,CFUL,ADLQ,AGLF,EHKvB,CAAyB,CAAQ,CAAA,AGLL,CAAC,EFUJ,CAAC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","file":"45582f4b6f23698d5bca4bf9a6574243.map","sourcesContent":["export function existing<T>(maybe: T | nothing): maybe is NonNullable<T> {\n    return typeof maybe !== 'undefined' && maybe !== null\n}\nexport function notExisting<T>(maybe: Maybe<T>): maybe is nothing {\n    return !existing(maybe)\n}\n\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\n\nexport function getRandomIntInclusive(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}","export const nothing: nothing = null\n","import * as React from 'react'\nimport {ComponentClass, ReactHTML, ReactInstance} from 'react'\nimport * as ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill'\nimport {existing, notExisting} from '../../typecheck/existing'\nimport {nothing} from '../../utils/nothing'\nimport {PropsOf} from '../PropsOf';\nimport hoistNonReactStatics = require('hoist-non-react-statics')\nimport {isString} from 'util';\n\nexport function measuring<C extends React.ComponentClass<any> | keyof ReactHTML>(\n    Component: C\n): Measuring<C> {\n    class HOC extends React.PureComponent<PropsOf<C> & MeasureProps> {\n        render() {\n            // TODO what if Component renders multiple elements?\n\n            const props: PropsOf<C> = Object.assign(\n                {},\n                this.props,\n                { ref: (it: any) => this.updateObserver(it) }\n            ) as any\n            delete props['onHeightChange']\n            delete props['onWidthChange']\n\n            return React.createElement(\n                Component,\n                props,\n                this.props.children\n            )\n        }\n\n        private observer: ResizeObserver\n        private observing: Maybe<Element>\n\n        constructor(props: PropsOf<typeof Component> & MeasureProps) {\n            super(props)\n\n            this.observer = new ResizeObserver(\n                (entries: ResizeObserverEntry[], observer: ResizeObserver) => {\n                    const height = entries[0].contentRect.height\n                    const width = entries[0].contentRect.width\n                    if (existing(this.props.onHeightChange)) {\n                        this.props.onHeightChange(height)\n                    }\n                    if (existing(this.props.onWidthChange)) {\n                        this.props.onWidthChange(width)\n                    }\n                }\n            )\n        }\n\n        componentWillUnmount() {\n            this.observer.disconnect()\n        }\n\n        private updateObserver(ref: Maybe<ReactInstance>) {\n            if (existing(this.observing)) {\n                this.observer.unobserve(this.observing)\n                this.observing = nothing\n            }\n            if(notExisting(ref)) {\n                return\n            }\n            const dom: Element = ref instanceof React.Component\n                ? ReactDOM.findDOMNode(ref)\n                : ref\n            if (existing(dom)) {\n                this.observer.observe(dom)\n                this.observing = dom\n            }\n        }\n    }\n\n    if(!isString(Component)) {\n        hoistNonReactStatics(HOC, Component as any)\n    }\n\n    return HOC\n}\n\nexport type Measuring<T extends ComponentClass<any> | keyof ReactHTML> =\n    React.ComponentClass<PropsOf<T> & MeasureProps>\n\ntype MeasureProps = SelfDecideHeight & SelfDecideWidth\n","import {tap} from 'rxjs/operators'\nimport {Pipe} from './Pipe'\n\nexport function log$<T>(tag: string, func?: (value: T) => any): Pipe<T, T> {\n    return tap(event => console.log(tag, func ? func(event) : event))\n}\n","import {Observable} from 'rxjs/Observable'\nimport {filter, startWith} from 'rxjs/operators'\nimport {nothing} from '../utils/nothing'\nimport {existing} from '../typecheck/existing';\nimport {combineLatest} from 'rxjs/observable/combineLatest';\nimport {log$} from './log$'\n\nexport function combineLatestMaybe<T>(observables: Array<Observable<T>>): Observable<Array<Maybe<T>>> {\n    const maybeObservables = observables.map(observable =>\n        observable.pipe(startWith<Maybe<T>>(nothing))\n    )\n\n    return combineLatest(...maybeObservables).pipe(\n        filter(values=> values.some(existing)),\n        log$('combineLatestMaybe')\n    )\n}\n","import {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function applyMiddleware<T extends object>(\n    origin: Observables<T>, pipes: Pipes<T>\n): Observables<T> {\n    return Object.keys(origin)\n        .map(key => ({[key]: pipes[key](origin[key])}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subjects} from './Subjects'\n\nexport function createPublishers<T extends object>(subjects: Subjects<T>): EventHandlers<T> {\n    return Object.keys(subjects)\n        .map(key => ({[key]: (value: T[typeof key]) => subjects[key].next(value)}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {Subject} from 'rxjs/Subject'\nimport {Subjects} from './Subjects'\n\nexport function createSubjects<T extends object>(names: ShapeOf<T>): Subjects<T> {\n    return Object.keys(names)\n        .map(key => ({[key]: new Subject()}))\n        .reduce((prev, curr) => Object.assign(prev, curr)) as any\n}\n","import {applyMiddleware} from './applyMiddleware'\nimport {createPublishers} from './createPublishers'\nimport {createSubjects} from './createSubjects'\nimport {Observables} from './Observables'\nimport {Pipes} from './Pipes'\n\nexport function createDispatcher<T extends object>(\n    middleware: Pipes<Required<T>>\n): Dispatcher<Required<T>> {\n    const subjects = createSubjects<Required<T>>(middleware)\n    return Object.assign(\n        { publish: createPublishers<Required<T>>(subjects) },\n        applyMiddleware<Required<T>>(subjects, middleware)\n    )\n}\n\nexport type Dispatcher<T extends object> = {\n    publish: EventHandlers<Required<T>>,\n} & Observables<Required<T>>\n\n","import {notExisting} from '../typecheck/existing'\n\nexport function ensure<A>(maybe: Maybe<A>, defaultValue: A): A {\n    return notExisting(maybe) || Number.isNaN(maybe) ? defaultValue : maybe\n}\n\n","export function publishAll<T extends object>(value: T, handlers: EventHandlers<Required<T>>): void {\n    Object.keys(handlers).forEach(key => handlers[key](value[key]))\n}\n","import sharedInstance from 'jss'\nimport * as React from 'react'\nimport FlipMove from 'react-flip-move'\nimport {Observable} from 'rxjs/Observable'\nimport {combineLatest, distinctUntilChanged, map, scan, shareReplay, startWith, withLatestFrom, bufferTime, switchMap} from 'rxjs/operators'\nimport {Subscription} from 'rxjs/Subscription'\nimport {Memoize} from 'typescript-memoize'\nimport {measuring} from '../../../../../lib/react/measure/measuring'\nimport {combineLatestMaybe} from '../../../../../lib/rxjs/combineLatestMaybe'\nimport {createDispatcher} from '../../../../../lib/rxjs/createDispatcher'\nimport {log$} from '../../../../../lib/rxjs/log$'\nimport {Pipes} from '../../../../../lib/rxjs/Pipes'\nimport {existing} from '../../../../../lib/typecheck/existing'\nimport {ensure} from '../../../../../lib/utils/ensure';\nimport {publishAll} from '../../../../../lib/utils/publishAll'\nimport {App} from '../../App'\nimport {View} from '../View'\nimport deepEqual = require('deep-equal')\nimport Exhibition = App.Exhibition\n\nexport class Previews extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props)\n        this.state = { columns: [[]] }\n    }\n\n    componentDidMount() {\n        this.work.add(this.updateState())\n        publishAll<Props>(this.props, this.props$.publish)\n    }\n\n    componentDidUpdate() {\n        publishAll<Props>(this.props, this.props$.publish)\n    }\n\n    render() {\n        const {heightUpdate} = this.actions$.publish\n        const {columns} = this.state\n        const {MeasuredDiv} = this\n\n        return <div className={classes.container}>\n            <div className={classes.columns}>\n                {columns.map((column, index) =>\n                    <FlipMove key={index} className={classes.column}\n                              duration={2000}\n                              enterAnimation={'fade'} leaveAnimation={'fade'}\n                              appearAnimation={'fade'}>\n                        {column.map(exhibition =>\n                            <MeasuredDiv key={exhibition.id} className={classes.item}\n                                         onHeightChange={height =>\n                                             heightUpdate({id: exhibition.id, height})\n                                         }>\n                                <img className={classes.preview}\n                                     style={{display: 'block'}} src={exhibition.image}/>\n                            </MeasuredDiv>\n                        )}\n                    </FlipMove>\n                )}\n            </div>\n        </div>\n    }\n\n    componentWillUnmount() {\n        this.work.unsubscribe()\n    }\n\n    private MeasuredDiv = measuring('div')\n\n    private readonly props$ = createDispatcher<Props>(propsMiddleware)\n    private readonly actions$ = createDispatcher<Actions>(actionsMiddleware)\n\n    private work = new Subscription()\n\n    @Memoize()\n    private get columnNum$(): Observable<1 | 2> {\n        const {width} = this.props$\n\n        return width.pipe(\n            map<px, 1 | 2>(width => width > 600 ? 2 : 1),\n            startWith(this.state.columns.length as 1 | 2),\n            log$('columnNum'),\n            distinctUntilChanged(),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get heights$(): Observable<Map<App.ExhibitionID, px>> {\n        const {heightUpdate} = this.actions$\n\n        return heightUpdate.pipe(\n            bufferTime(200),\n            scan<Array<HeightUpdate>, Map<App.ExhibitionID, px>>(\n                (heights, updates) => {\n                    if (!updates.some(update=> heights.get(update.id) !== update.height))\n                        return heights\n                    const newHeights = new Map(heights)\n                    updates.forEach(update=>\n                        newHeights.set(update.id, update.height)\n                    )\n                    return newHeights\n                },\n                new Map()\n            ),\n            distinctUntilChanged(),\n            startWith(new Map()),\n            log$('heights'),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get layout$(): Observable<Array<Array<App.ExhibitionID>>> {\n        const {columnNum$, heights$} = this\n        const {exhibitionIDs} = this.props$\n\n        return exhibitionIDs.pipe(\n            combineLatest(columnNum$),\n            withLatestFrom(heights$),\n            map(([[ids, columnNum], heights]) => {\n                if (columnNum === 1)\n                    return [ids]\n                const columns = [\n                    [] as Array<App.ExhibitionID>,\n                    [] as Array<App.ExhibitionID>\n                ]\n                ids.forEach(id => {\n                    const [columnA, columnB] = columns\n                    const [heightA, heightB] = columns.map(column => columnHeight(column, heights))\n                    heightA <= heightB ? columnA.push(id) : columnB.push(id)\n                })\n                return columns\n            }),\n            distinctUntilChanged(deepEqual),\n            log$('columns'),\n            shareReplay(1)\n        )\n    }\n\n    @Memoize()\n    private get columns$(): Observable<Array<Array<App.Exhibition>>> {\n        const {getExhibition} = this.props$\n        const {layout$} = this\n\n        return layout$.pipe(\n            combineLatest(getExhibition),\n            switchMap(([columns, getExhibition])=>\n                combineLatestMaybe(columns.map(column=>\n                    combineLatestMaybe<App.Exhibition>(column.map(id=> getExhibition(id)))\n                        .pipe(map(values=> values.filter(existing)))\n                )).pipe(\n                    map(values=> values.filter(existing))\n                )\n            ),\n            startWith(this.state.columns),\n            distinctUntilChanged(deepEqual),\n            shareReplay(1)\n        )\n    }\n\n    private updateState(): Subscription {\n        const {columns$} = this\n\n        return columns$.pipe(\n            map((columns) => ({columns})),\n            distinctUntilChanged(deepEqual),\n            log$('state')\n        ).subscribe(state => this.setState(state))\n    }\n}\n\nfunction columnHeight(column: Array<App.ExhibitionID>, heights: Map<App.ExhibitionID, px>): px {\n    return column.reduce((height, id) => height + ensure<px>(heights.get(id), 1), 0)\n}\n\ntype Props = ContainerDecideWidth & SelfDecideHeight & {\n    exhibitionIDs: Array<App.ExhibitionID>\n    onOpen?: EventHandler<View.Actions.OpenExhibition>\n    getExhibition: App.GetExhibition\n}\nconst propsMiddleware: Pipes<Required<Props>> = {\n    width: distinctUntilChanged(),\n    exhibitionIDs: distinctUntilChanged(deepEqual),\n    onOpen: distinctUntilChanged(),\n    getExhibition: distinctUntilChanged(),\n    onHeightChange: distinctUntilChanged()\n}\n\ntype Actions = {\n    heightUpdate: HeightUpdate\n}\nconst actionsMiddleware: Pipes<Actions> = {\n    heightUpdate: distinctUntilChanged(deepEqual)\n}\ntype HeightUpdate = {\n    id: App.ExhibitionID\n    height: px\n}\n\ntype State = {\n    columns: Array<Array<App.Exhibition>>\n}\n\nconst classes = sharedInstance.createStyleSheet({\n    container: {\n        position: 'relative',\n        display: 'flex',\n        'justify-content': 'center'\n    },\n    columns: {\n        display: 'flex',\n        'max-width': '800px',\n        'justify-content': 'center',\n        width: '100%'\n    },\n    column: {\n        position: 'relative',\n        'flex-grow': 1\n    },\n    item: {\n        position: 'relative',\n        width: '100%'\n    },\n    preview: {\n        'max-width':'100%',\n        'max-height':'100%;'\n    }\n}).attach().classes\n\n","import * as React from 'react'\nimport {Observable} from 'rxjs/Observable'\nimport {ajax} from 'rxjs/observable/dom/ajax'\nimport {empty} from 'rxjs/observable/empty'\nimport {timer} from 'rxjs/observable/timer'\nimport {map} from 'rxjs/operators'\nimport {Observables} from '../../../../../../lib/rxjs/Observables'\nimport {existing} from '../../../../../../lib/typecheck/existing'\nimport {getRandomIntInclusive} from '../../../../../../lib/utils/getRandomIntInclusive'\nimport {TODO} from '../../../../../../lib/utils/TODO'\nimport {App} from '../../../App'\nimport {Previews} from '../Previews'\nimport * as ReactDOM from 'react-dom';\n\nconst ids: Array<App.ExhibitionID> = []\nconst images: Map<App.ExhibitionID, string> = new Map<App.ExhibitionID, string>()\nfor (let i = 0; i < 100; i++) {\n    const id = i.toString()\n    ids.push(id)\n    images.set(id, `https://picsum.photos/500/${getRandomIntInclusive(300, 800)}`)\n}\n\nfunction getExhibition(id: App.ExhibitionID): Observable<App.Exhibition> {\n    const url = images.get(id)\n    return existing(url)\n        ? timer(getRandomIntInclusive(1000, 30000)).pipe(map(()=> ({ id, image: url, text: '' })))\n        : empty()\n}\n\nclass Demo extends React.Component<{}, {\n    width: number,\n    height: number\n}> {\n    render() {\n        const {width, height} = this.state\n\n        return <div style={{width, height, display: 'flex', justifyContent: 'center'}}>\n            <Previews width={width} exhibitionIDs={ids}\n                      getExhibition={getExhibition}/>\n        </div>\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => {\n            const width = window.innerWidth\n            const height = window.innerHeight\n            this.setState({width, height})\n        })\n    }\n\n    constructor(props: {}) {\n        super(props)\n        this.state = {\n            width: window.innerWidth,\n            height: window.innerHeight\n        }\n    }\n}\n\nconst root = document.getElementById('root')!\nReactDOM.render(<Demo/>, root)\n"]}